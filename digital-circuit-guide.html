<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ•°å­—ç”µè·¯é›¶åŸºç¡€å¿«é€Ÿé€šå…³ - 51å•ç‰‡æœºå…¥é—¨ä¸“ç”¨ç‰ˆ</title>
    <style>
        :root {
            --primary: #3b82f6;
            --primary-dark: #2563eb;
            --secondary: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --bg-dark: #1e293b;
            --bg-darker: #0f172a;
            --bg-light: #f8fafc;
            --text-primary: #1e293b;
            --text-secondary: #64748b;
            --border: #e2e8f0;
            --code-bg: #1e293b;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            line-height: 1.8;
            color: var(--text-primary);
            background: var(--bg-light);
        }

        /* é¡¶éƒ¨å¯¼èˆª */
        .top-nav {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 60px;
            background: var(--bg-darker);
            color: white;
            display: flex;
            align-items: center;
            padding: 0 2rem;
            z-index: 1000;
            box-shadow: 0 2px 10px rgba(0,0,0,0.3);
        }

        .top-nav h1 {
            font-size: 1.2rem;
            font-weight: 600;
        }

        .top-nav .emoji {
            font-size: 1.5rem;
            margin-right: 0.5rem;
        }

        .progress-bar {
            position: fixed;
            top: 60px;
            left: 0;
            height: 3px;
            background: var(--primary);
            width: 0%;
            z-index: 1001;
            transition: width 0.1s;
        }

        /* ä¾§è¾¹ç›®å½• */
        .sidebar {
            position: fixed;
            top: 60px;
            left: 0;
            width: 280px;
            height: calc(100vh - 60px);
            background: white;
            border-right: 1px solid var(--border);
            overflow-y: auto;
            padding: 1.5rem 0;
            z-index: 999;
            transition: transform 0.3s;
        }

        .sidebar.hidden {
            transform: translateX(-100%);
        }

        .sidebar-toggle {
            position: fixed;
            top: 75px;
            left: 290px;
            width: 32px;
            height: 32px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 0 4px 4px 0;
            cursor: pointer;
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: left 0.3s;
        }

        .sidebar.hidden + .sidebar-toggle {
            left: 0;
        }

        .toc-title {
            font-size: 0.85rem;
            font-weight: 600;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.05em;
            padding: 0 1.5rem;
            margin-bottom: 1rem;
        }

        .toc-list {
            list-style: none;
        }

        .toc-item {
            border-left: 3px solid transparent;
        }

        .toc-item.active {
            border-left-color: var(--primary);
            background: rgba(59, 130, 246, 0.05);
        }

        .toc-link {
            display: block;
            padding: 0.5rem 1.5rem;
            color: var(--text-secondary);
            text-decoration: none;
            font-size: 0.9rem;
            transition: all 0.2s;
        }

        .toc-link:hover {
            color: var(--primary);
            background: rgba(59, 130, 246, 0.05);
        }

        .toc-item.active .toc-link {
            color: var(--primary);
            font-weight: 500;
        }

        .toc-link.level-2 {
            padding-left: 2.5rem;
            font-size: 0.85rem;
        }

        /* ä¸»å†…å®¹åŒº */
        .main-content {
            margin-left: 280px;
            padding: 80px 2rem 4rem;
            max-width: 900px;
            transition: margin-left 0.3s;
        }

        .sidebar.hidden ~ .main-content {
            margin-left: 0;
            max-width: 100%;
        }

        /* ç« èŠ‚æ ·å¼ */
        .section {
            margin-bottom: 4rem;
            scroll-margin-top: 80px;
        }

        .section-header {
            display: flex;
            align-items: center;
            margin-bottom: 1.5rem;
            padding-bottom: 0.75rem;
            border-bottom: 2px solid var(--border);
        }

        .section-icon {
            font-size: 2rem;
            margin-right: 0.75rem;
        }

        .section-title {
            font-size: 1.75rem;
            font-weight: 700;
            color: var(--text-primary);
        }

        .subsection {
            margin-bottom: 2.5rem;
        }

        .subsection-title {
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
        }

        .subsection-title::before {
            content: '';
            display: inline-block;
            width: 4px;
            height: 1.25rem;
            background: var(--primary);
            margin-right: 0.75rem;
            border-radius: 2px;
        }

        /* æ–‡æœ¬å†…å®¹ */
        p {
            margin-bottom: 1rem;
            color: var(--text-primary);
        }

        strong {
            color: var(--text-primary);
            font-weight: 600;
        }

        /* ä»£ç å— */
        .code-block {
            position: relative;
            margin: 1.5rem 0;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .code-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: var(--bg-darker);
            padding: 0.5rem 1rem;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        .code-lang {
            color: #94a3b8;
            font-size: 0.8rem;
            font-weight: 500;
        }

        .copy-btn {
            background: transparent;
            border: 1px solid rgba(255,255,255,0.2);
            color: #94a3b8;
            padding: 0.25rem 0.75rem;
            border-radius: 4px;
            font-size: 0.75rem;
            cursor: pointer;
            transition: all 0.2s;
        }

        .copy-btn:hover {
            background: rgba(255,255,255,0.1);
            color: white;
        }

        .copy-btn.copied {
            background: var(--secondary);
            border-color: var(--secondary);
            color: white;
        }

        pre {
            margin: 0;
            padding: 1.25rem;
            background: var(--code-bg);
            overflow-x: auto;
        }

        code {
            font-family: 'JetBrains Mono', 'Fira Code', Consolas, Monaco, monospace;
            font-size: 0.875rem;
            line-height: 1.6;
            color: #e2e8f0;
        }

        .inline-code {
            background: #e2e8f0;
            color: #be185d;
            padding: 0.15rem 0.4rem;
            border-radius: 4px;
            font-size: 0.9em;
        }

        /* ASCII å›¾è¡¨ - ä¿ç•™å‘åå…¼å®¹ */
        .ascii-diagram {
            background: var(--code-bg);
            border-radius: 8px;
            padding: 1.5rem;
            overflow-x: auto;
            margin: 1.5rem 0;
        }

        .ascii-diagram pre {
            color: #67e8f9;
            margin: 0;
            padding: 0;
            background: transparent;
            font-family: 'JetBrains Mono', 'Fira Code', Consolas, Monaco, monospace;
        }

        /* ========== ç¾åŒ– SVG å›¾è¡¨æ ·å¼ ========== */
        .svg-diagram {
            background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);
            border-radius: 12px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3), inset 0 1px 0 rgba(255,255,255,0.1);
            overflow-x: auto;
            position: relative;
        }

        .svg-diagram::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, transparent, rgba(103, 232, 249, 0.3), transparent);
        }

        .svg-diagram svg {
            display: block;
            margin: 0 auto;
            max-width: 100%;
            height: auto;
        }

        .svg-diagram .diagram-title {
            color: #94a3b8;
            font-size: 0.85rem;
            text-align: center;
            margin-bottom: 1rem;
            font-weight: 500;
            letter-spacing: 0.05em;
        }

        .svg-diagram .diagram-legend {
            display: flex;
            justify-content: center;
            gap: 1.5rem;
            margin-top: 1rem;
            flex-wrap: wrap;
        }

        .svg-diagram .legend-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: #94a3b8;
            font-size: 0.8rem;
        }

        .svg-diagram .legend-color {
            width: 16px;
            height: 4px;
            border-radius: 2px;
        }

        /* æ³¢å½¢å›¾é…è‰² */
        .waveform-high { fill: #22c55e; }
        .waveform-low { fill: #3b82f6; }
        .waveform-analog { stroke: #f59e0b; fill: none; }
        .waveform-clock { stroke: #8b5cf6; }
        .waveform-data { stroke: #ec4899; }

        /* ç”µè·¯ç»„ä»¶æ ·å¼ */
        .circuit-component {
            background: linear-gradient(145deg, #334155, #1e293b);
            border: 2px solid #475569;
            border-radius: 8px;
            padding: 1rem;
            margin: 0.5rem;
            display: inline-flex;
            flex-direction: column;
            align-items: center;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .circuit-component:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.4);
        }

        .circuit-component .comp-icon {
            font-size: 2rem;
            margin-bottom: 0.5rem;
        }

        .circuit-component .comp-name {
            color: #e2e8f0;
            font-size: 0.85rem;
            font-weight: 600;
        }

        .circuit-component .comp-value {
            color: #67e8f9;
            font-size: 0.75rem;
        }

        /* æ¯”è¾ƒå›¾è¡¨æ ·å¼ */
        .comparison-diagram {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1.5rem;
            margin: 1.5rem 0;
        }

        .comparison-card {
            background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);
            border-radius: 12px;
            padding: 1.5rem;
            border: 1px solid #334155;
            box-shadow: 0 4px 16px rgba(0,0,0,0.2);
        }

        .comparison-card h4 {
            color: #f8fafc;
            font-size: 1rem;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .comparison-card .card-svg {
            margin: 1rem 0;
        }

        .comparison-card .card-desc {
            color: #94a3b8;
            font-size: 0.9rem;
            line-height: 1.6;
        }

        /* æ—¶åºå›¾ä¸“ç”¨æ ·å¼ */
        .timing-diagram {
            background: linear-gradient(180deg, #0f172a 0%, #1e293b 100%);
            border-radius: 12px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border: 1px solid #334155;
            overflow-x: auto;
        }

        .timing-diagram .signal-row {
            display: flex;
            align-items: center;
            margin: 0.75rem 0;
        }

        .timing-diagram .signal-label {
            width: 80px;
            color: #94a3b8;
            font-size: 0.85rem;
            font-weight: 500;
            flex-shrink: 0;
        }

        .timing-diagram .signal-wave {
            flex: 1;
            height: 40px;
            min-width: 400px;
        }

        /* æµç¨‹å›¾æ ·å¼ */
        .flow-diagram {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            align-items: center;
            gap: 0.5rem;
            margin: 1.5rem 0;
            padding: 1.5rem;
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
            border-radius: 12px;
        }

        .flow-step {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            padding: 0.75rem 1.25rem;
            border-radius: 8px;
            font-weight: 500;
            font-size: 0.9rem;
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
        }

        .flow-arrow {
            color: var(--text-secondary);
            font-size: 1.5rem;
        }

        /* ç”µå¹³æŒ‡ç¤ºå™¨ */
        .level-indicator {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-weight: 600;
            font-size: 0.85rem;
        }

        .level-high {
            background: rgba(34, 197, 94, 0.15);
            color: #22c55e;
            border: 1px solid rgba(34, 197, 94, 0.3);
        }

        .level-low {
            background: rgba(59, 130, 246, 0.15);
            color: #3b82f6;
            border: 1px solid rgba(59, 130, 246, 0.3);
        }

        /* åŠ¨ç”»æ•ˆæœ */
        @keyframes signalPulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        .svg-diagram svg .animated-signal {
            animation: signalPulse 2s ease-in-out infinite;
        }

        @keyframes flowGlow {
            0%, 100% { filter: drop-shadow(0 0 4px rgba(59, 130, 246, 0.5)); }
            50% { filter: drop-shadow(0 0 12px rgba(59, 130, 246, 0.8)); }
        }

        .flow-step.active {
            animation: flowGlow 1.5s ease-in-out infinite;
        }

        /* ä¿¡æ¯å¡ç‰‡ */
        .info-card {
            border-radius: 8px;
            padding: 1.25rem;
            margin: 1.5rem 0;
            border-left: 4px solid;
        }

        .info-card.tip {
            background: rgba(16, 185, 129, 0.1);
            border-color: var(--secondary);
        }

        .info-card.warning {
            background: rgba(245, 158, 11, 0.1);
            border-color: var(--warning);
        }

        .info-card.danger {
            background: rgba(239, 68, 68, 0.1);
            border-color: var(--danger);
        }

        .info-card.info {
            background: rgba(59, 130, 246, 0.1);
            border-color: var(--primary);
        }

        .info-card-title {
            font-weight: 600;
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
        }

        .info-card-title .icon {
            margin-right: 0.5rem;
        }

        /* è¡¨æ ¼ */
        .table-wrapper {
            overflow-x: auto;
            margin: 1.5rem 0;
            border-radius: 8px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }

        table {
            width: 100%;
            border-collapse: collapse;
            background: white;
        }

        th, td {
            padding: 0.875rem 1rem;
            text-align: left;
            border-bottom: 1px solid var(--border);
        }

        th {
            background: var(--bg-dark);
            color: white;
            font-weight: 600;
            white-space: nowrap;
        }

        tr:hover td {
            background: rgba(59, 130, 246, 0.05);
        }

        /* æ£€æŸ¥æ¸…å• */
        .checklist {
            list-style: none;
            margin: 1rem 0;
        }

        .checklist li {
            padding: 0.5rem 0;
            padding-left: 2rem;
            position: relative;
        }

        .checklist li::before {
            content: 'â˜';
            position: absolute;
            left: 0;
            color: var(--text-secondary);
            font-size: 1.1rem;
        }

        .checklist li.checked::before {
            content: 'âœ“';
            color: var(--secondary);
        }

        /* æŠ˜å ç­”æ¡ˆ */
        .collapsible {
            margin: 1rem 0;
        }

        .collapsible-header {
            background: linear-gradient(135deg, var(--bg-dark) 0%, #334155 100%);
            color: white;
            padding: 1rem 1.25rem;
            border-radius: 8px 8px 0 0;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: 500;
            transition: background 0.2s;
        }

        .collapsible-header:hover {
            background: linear-gradient(135deg, #334155 0%, var(--bg-dark) 100%);
        }

        .collapsible-header .arrow {
            transition: transform 0.3s;
        }

        .collapsible.open .collapsible-header .arrow {
            transform: rotate(180deg);
        }

        .collapsible-content {
            display: none;
            padding: 1.25rem;
            background: white;
            border: 1px solid var(--border);
            border-top: none;
            border-radius: 0 0 8px 8px;
        }

        .collapsible.open .collapsible-content {
            display: block;
        }

        /* æ—¶é—´çº¿ */
        .timeline {
            position: relative;
            padding-left: 2rem;
            margin: 1.5rem 0;
        }

        .timeline::before {
            content: '';
            position: absolute;
            left: 0.5rem;
            top: 0;
            bottom: 0;
            width: 2px;
            background: var(--border);
        }

        .timeline-item {
            position: relative;
            padding-bottom: 1.5rem;
        }

        .timeline-item::before {
            content: '';
            position: absolute;
            left: -1.5rem;
            top: 0.25rem;
            width: 12px;
            height: 12px;
            background: var(--primary);
            border-radius: 50%;
            border: 2px solid white;
            box-shadow: 0 0 0 2px var(--primary);
        }

        .timeline-title {
            font-weight: 600;
            color: var(--primary);
            margin-bottom: 0.25rem;
        }

        .timeline-content {
            color: var(--text-secondary);
            font-size: 0.95rem;
        }

        /* è¿›åº¦è¿½è¸ªå™¨ */
        .progress-tracker {
            background: white;
            border-radius: 12px;
            padding: 1.5rem;
            margin: 2rem 0;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
        }

        .progress-tracker-title {
            font-weight: 600;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
        }

        .progress-tracker-title .icon {
            margin-right: 0.5rem;
        }

        .week-progress {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem;
        }

        .week-card {
            background: var(--bg-light);
            border-radius: 8px;
            padding: 1rem;
            text-align: center;
            border: 2px solid transparent;
            transition: all 0.2s;
            cursor: pointer;
        }

        .week-card:hover {
            border-color: var(--primary);
            transform: translateY(-2px);
        }

        .week-card.completed {
            background: rgba(16, 185, 129, 0.1);
            border-color: var(--secondary);
        }

        .week-card.current {
            border-color: var(--primary);
            background: rgba(59, 130, 246, 0.1);
        }

        .week-number {
            font-size: 0.85rem;
            color: var(--text-secondary);
        }

        .week-title {
            font-weight: 600;
            margin: 0.5rem 0;
        }

        .week-status {
            font-size: 1.5rem;
        }

        /* èµ„æºé“¾æ¥ */
        .resource-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
            margin: 1.5rem 0;
        }

        .resource-card {
            background: white;
            border-radius: 8px;
            padding: 1.25rem;
            border: 1px solid var(--border);
            transition: all 0.2s;
            text-decoration: none;
            color: inherit;
            display: block;
        }

        .resource-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 16px rgba(0,0,0,0.1);
            border-color: var(--primary);
        }

        .resource-card-icon {
            font-size: 2rem;
            margin-bottom: 0.75rem;
        }

        .resource-card-title {
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .resource-card-desc {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        /* å“åº”å¼ */
        @media (max-width: 1024px) {
            .sidebar.hidden {
                transform: translateX(-100%);
            }

            .sidebar:not(.hidden) {
                transform: translateX(0);
            }

            .main-content {
                margin-left: 0;
                padding: 80px 1.5rem 3rem;
            }

            .sidebar-toggle {
                left: 10px;
            }

            .sidebar:not(.hidden) + .sidebar-toggle {
                left: 290px;
            }

            .week-progress {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 640px) {
            .main-content {
                padding: 75px 1rem 2rem;
            }

            .section-title {
                font-size: 1.5rem;
            }

            .resource-grid {
                grid-template-columns: 1fr;
            }
        }

        /* æ‰“å°æ ·å¼ */
        @media print {
            .sidebar, .sidebar-toggle, .top-nav, .progress-bar {
                display: none;
            }

            .main-content {
                margin-left: 0;
                padding: 0;
                max-width: 100%;
            }

            .code-block {
                break-inside: avoid;
            }
        }

        /* æ»šåŠ¨æ¡ç¾åŒ– */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: var(--bg-light);
        }

        ::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #94a3b8;
        }

        /* åŠ¨ç”» */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .section {
            animation: fadeIn 0.5s ease-out;
        }
    </style>
</head>
<body>
    <!-- é¡¶éƒ¨å¯¼èˆª -->
    <nav class="top-nav">
        <span class="emoji">ğŸ”Œ</span>
        <h1>æ•°å­—ç”µè·¯é›¶åŸºç¡€å¿«é€Ÿé€šå…³ - 51å•ç‰‡æœºå…¥é—¨ä¸“ç”¨ç‰ˆ</h1>
    </nav>

    <!-- é˜…è¯»è¿›åº¦æ¡ -->
    <div class="progress-bar" id="progressBar"></div>

    <!-- ä¾§è¾¹ç›®å½• -->
    <aside class="sidebar" id="sidebar">
        <div class="toc-title">ç›®å½•å¯¼èˆª</div>
        <ul class="toc-list" id="tocList">
            <li class="toc-item"><a href="#goal" class="toc-link">ğŸ¯ å­¦ä¹ ç›®æ ‡</a></li>
            <li class="toc-item"><a href="#week1" class="toc-link">ğŸ“˜ ç¬¬ä¸€å‘¨ï¼šæ ¸å¿ƒæ¦‚å¿µé€Ÿæˆ</a></li>
            <li class="toc-item"><a href="#signal" class="toc-link level-2">1.1 æ•°å­—ä¿¡å· vs æ¨¡æ‹Ÿä¿¡å·</a></li>
            <li class="toc-item"><a href="#level" class="toc-link level-2">1.2 ç”µå¹³æ ‡å‡†</a></li>
            <li class="toc-item"><a href="#gpio" class="toc-link level-2">1.3 GPIO è¾“å‡ºæ¨¡å¼</a></li>
            <li class="toc-item"><a href="#pullup" class="toc-link level-2">1.4 ä¸Šæ‹‰/ä¸‹æ‹‰ç”µé˜»</a></li>
            <li class="toc-item"><a href="#timing" class="toc-link level-2">1.5 æ—¶åºå›¾é˜…è¯»</a></li>
            <li class="toc-item"><a href="#week2" class="toc-link">ğŸ”¬ ç¬¬äºŒå‘¨ï¼šå®éªŒéªŒè¯</a></li>
            <li class="toc-item"><a href="#exp1" class="toc-link level-2">å®éªŒ 1ï¼šLED é—ªçƒ</a></li>
            <li class="toc-item"><a href="#exp2" class="toc-link level-2">å®éªŒ 2ï¼šæŒ‰é”®è¾“å…¥</a></li>
            <li class="toc-item"><a href="#exp3" class="toc-link level-2">å®éªŒ 3ï¼šæ—¶åºè§‚å¯Ÿ</a></li>
            <li class="toc-item"><a href="#week3" class="toc-link">ğŸ“š ç¬¬ä¸‰å‘¨ï¼šèŠ¯ç‰‡æ‰‹å†Œ</a></li>
            <li class="toc-item"><a href="#week3-struct" class="toc-link level-2">3.1 æ‰‹å†Œç»“æ„æ¦‚è§ˆ</a></li>
            <li class="toc-item"><a href="#week3-pinout" class="toc-link level-2">3.2 å¼•è„šå®šä¹‰ä¸å°è£…</a></li>
            <li class="toc-item"><a href="#week3-sfr" class="toc-link level-2">3.3 ç‰¹æ®ŠåŠŸèƒ½å¯„å­˜å™¨</a></li>
            <li class="toc-item"><a href="#week3-uart" class="toc-link level-2">3.4 ä¸²å£å¯„å­˜å™¨</a></li>
            <li class="toc-item"><a href="#week3-timer" class="toc-link level-2">3.5 å®šæ—¶å™¨å¯„å­˜å™¨</a></li>
            <li class="toc-item"><a href="#week3-int" class="toc-link level-2">3.6 ä¸­æ–­ç³»ç»Ÿ</a></li>
            <li class="toc-item"><a href="#week3-peripheral" class="toc-link level-2">3.9 å¤–è®¾èŠ¯ç‰‡æ‰‹å†Œ</a></li>
            <li class="toc-item"><a href="#protocol" class="toc-link">ğŸ“¡ é€šä¿¡åè®®è¯¦è§£</a></li>
            <li class="toc-item"><a href="#protocol-uart" class="toc-link level-2">4.2 UART ä¸²å£</a></li>
            <li class="toc-item"><a href="#protocol-i2c" class="toc-link level-2">4.3 I2C æ¥å£</a></li>
            <li class="toc-item"><a href="#protocol-spi" class="toc-link level-2">4.4 SPI æ¥å£</a></li>
            <li class="toc-item"><a href="#protocol-onewire" class="toc-link level-2">4.5 1-Wire å•æ€»çº¿</a></li>
            <li class="toc-item"><a href="#resources" class="toc-link">ğŸ“ å­¦ä¹ èµ„æº</a></li>
            <li class="toc-item"><a href="#plan" class="toc-link">ğŸ“… ä¸‰å‘¨å­¦ä¹ è®¡åˆ’</a></li>
            <li class="toc-item"><a href="#quiz" class="toc-link">âœ… è‡ªæ£€æ¸…å•</a></li>
            <li class="toc-item"><a href="#speedrun" class="toc-link">ğŸš€ æé€Ÿå…¥é—¨æ–¹æ¡ˆ</a></li>
        </ul>
    </aside>

    <!-- ä¾§è¾¹æ åˆ‡æ¢æŒ‰é’® -->
    <button class="sidebar-toggle" id="sidebarToggle" aria-label="åˆ‡æ¢ç›®å½•">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M15 18l-6-6 6-6"/>
        </svg>
    </button>

    <!-- ä¸»å†…å®¹ -->
    <main class="main-content">
        <!-- å­¦ä¹ ç›®æ ‡ -->
        <section class="section" id="goal">
            <header class="section-header">
                <span class="section-icon">ğŸ¯</span>
                <h2 class="section-title">å­¦ä¹ ç›®æ ‡ï¼ˆ3 å‘¨è¾¾æˆï¼‰</h2>
            </header>

            <p>å­¦ä¹ é€šä¿¡åè®®<strong>ä¸éœ€è¦</strong>å­¦å®Œæ•´æ•°ç”µè¯¾ç¨‹ï¼Œåªéœ€è¦æŒæ¡ä»¥ä¸‹æ ¸å¿ƒæ¦‚å¿µå³å¯å¼€å§‹ã€‚</p>

            <div class="info-card tip">
                <div class="info-card-title"><span class="icon">âœ…</span> å­¦å®Œåä½ èƒ½ï¼š</div>
                <ul class="checklist">
                    <li class="checked">çœ‹æ‡‚é€šä¿¡åè®®çš„æ—¶åºå›¾</li>
                    <li class="checked">ç†è§£é«˜ç”µå¹³/ä½ç”µå¹³ã€ä¸Šå‡æ²¿/ä¸‹é™æ²¿</li>
                    <li class="checked">çŸ¥é“æ¨æŒ½/å¼€æ¼è¾“å‡ºçš„åŒºåˆ«</li>
                    <li class="checked">ä¼šçœ‹èŠ¯ç‰‡æ‰‹å†Œçš„å¼•è„šå®šä¹‰</li>
                    <li class="checked">ç†è§£æ—¶é’Ÿã€æ³¢ç‰¹ç‡ç­‰åŸºæœ¬æ¦‚å¿µ</li>
                </ul>
            </div>

            <div class="info-card info">
                <div class="info-card-title"><span class="icon">ğŸ’¡</span> ä¸éœ€è¦å­¦ï¼š</div>
                <p>å¤æ‚çš„é€»è¾‘é—¨ç”µè·¯è®¾è®¡ã€å¡è¯ºå›¾åŒ–ç®€ã€æ—¶åºç”µè·¯åˆ†æï¼ˆé‚£æ˜¯æ•°ç”µè€ƒè¯•å†…å®¹ï¼‰</p>
            </div>
        </section>

        <!-- ç¬¬ä¸€å‘¨ -->
        <section class="section" id="week1">
            <header class="section-header">
                <span class="section-icon">ğŸ“˜</span>
                <h2 class="section-title">ç¬¬ä¸€å‘¨ï¼šæ ¸å¿ƒæ¦‚å¿µé€Ÿæˆ</h2>
            </header>

            <!-- 1.1 æ•°å­—ä¿¡å· vs æ¨¡æ‹Ÿä¿¡å· -->
            <div class="subsection" id="signal">
                <h3 class="subsection-title">1.1 æ•°å­—ä¿¡å· vs æ¨¡æ‹Ÿä¿¡å·</h3>

                <!-- ç¾åŒ–çš„SVGä¿¡å·å¯¹æ¯”å›¾ -->
                <div class="comparison-diagram">
                    <div class="comparison-card">
                        <h4>ğŸŒŠ æ¨¡æ‹Ÿä¿¡å·ï¼ˆè¿ç»­å˜åŒ–ï¼‰</h4>
                        <div class="card-svg">
                            <svg width="280" height="120" viewBox="0 0 280 120">
                                <!-- ç½‘æ ¼èƒŒæ™¯ -->
                                <defs>
                                    <pattern id="grid1" width="20" height="20" patternUnits="userSpaceOnUse">
                                        <path d="M 20 0 L 0 0 0 20" fill="none" stroke="#334155" stroke-width="0.5"/>
                                    </pattern>
                                    <linearGradient id="analogGrad" x1="0%" y1="0%" x2="100%" y2="0%">
                                        <stop offset="0%" style="stop-color:#f59e0b;stop-opacity:1" />
                                        <stop offset="100%" style="stop-color:#f97316;stop-opacity:1" />
                                    </linearGradient>
                                </defs>
                                <rect width="280" height="120" fill="#0f172a"/>
                                <rect width="280" height="120" fill="url(#grid1)"/>

                                <!-- åæ ‡è½´ -->
                                <line x1="40" y1="20" x2="40" y2="100" stroke="#64748b" stroke-width="2"/>
                                <line x1="40" y1="100" x2="260" y2="100" stroke="#64748b" stroke-width="2"/>

                                <!-- æ ‡ç­¾ -->
                                <text x="15" y="28" fill="#94a3b8" font-size="10">5V</text>
                                <text x="15" y="105" fill="#94a3b8" font-size="10">0V</text>
                                <text x="255" y="115" fill="#94a3b8" font-size="10">t</text>

                                <!-- æ¨¡æ‹Ÿæ³¢å½¢ï¼ˆæ­£å¼¦æ³¢ï¼‰ -->
                                <path d="M 40 60 Q 70 20, 100 60 Q 130 100, 160 60 Q 190 20, 220 60 Q 250 100, 260 75"
                                      fill="none" stroke="url(#analogGrad)" stroke-width="3" stroke-linecap="round"/>

                                <!-- å‘å…‰æ•ˆæœ -->
                                <path d="M 40 60 Q 70 20, 100 60 Q 130 100, 160 60 Q 190 20, 220 60 Q 250 100, 260 75"
                                      fill="none" stroke="#f59e0b" stroke-width="6" stroke-linecap="round" opacity="0.3" class="animated-signal"/>
                            </svg>
                        </div>
                        <p class="card-desc">ğŸ“ å£°éŸ³ã€æ¸©åº¦ä¼ æ„Ÿå™¨è¾“å‡º<br>ç”µå‹åœ¨ 0V~5V ä¹‹é—´<strong>å¹³æ»‘è¿‡æ¸¡</strong></p>
                    </div>

                    <div class="comparison-card">
                        <h4>ğŸ“¶ æ•°å­—ä¿¡å·ï¼ˆåªæœ‰ 0 å’Œ 1ï¼‰</h4>
                        <div class="card-svg">
                            <svg width="280" height="120" viewBox="0 0 280 120">
                                <defs>
                                    <linearGradient id="digitalGrad" x1="0%" y1="0%" x2="0%" y2="100%">
                                        <stop offset="0%" style="stop-color:#22c55e;stop-opacity:1" />
                                        <stop offset="100%" style="stop-color:#16a34a;stop-opacity:1" />
                                    </linearGradient>
                                </defs>
                                <rect width="280" height="120" fill="#0f172a"/>
                                <rect width="280" height="120" fill="url(#grid1)"/>

                                <!-- åæ ‡è½´ -->
                                <line x1="40" y1="20" x2="40" y2="100" stroke="#64748b" stroke-width="2"/>
                                <line x1="40" y1="100" x2="260" y2="100" stroke="#64748b" stroke-width="2"/>

                                <!-- æ ‡ç­¾ -->
                                <text x="15" y="28" fill="#22c55e" font-size="10" font-weight="bold">5V</text>
                                <text x="10" y="35" fill="#64748b" font-size="8">(é«˜/1)</text>
                                <text x="15" y="98" fill="#3b82f6" font-size="10" font-weight="bold">0V</text>
                                <text x="10" y="105" fill="#64748b" font-size="8">(ä½/0)</text>
                                <text x="255" y="115" fill="#94a3b8" font-size="10">t</text>

                                <!-- æ•°å­—æ–¹æ³¢ -->
                                <path d="M 40 95 L 40 95 L 60 95 L 60 25 L 100 25 L 100 95 L 140 95 L 140 25 L 180 25 L 180 95 L 220 95 L 220 25 L 260 25"
                                      fill="none" stroke="url(#digitalGrad)" stroke-width="3" stroke-linecap="square"/>

                                <!-- é«˜ç”µå¹³åŒºåŸŸå¡«å…… -->
                                <path d="M 60 25 L 100 25 L 100 95 L 60 95 Z" fill="#22c55e" opacity="0.15"/>
                                <path d="M 140 25 L 180 25 L 180 95 L 140 95 Z" fill="#22c55e" opacity="0.15"/>
                                <path d="M 220 25 L 260 25 L 260 95 L 220 95 Z" fill="#22c55e" opacity="0.15"/>
                            </svg>
                        </div>
                        <p class="card-desc">ğŸ“ MCU çš„ GPIO å¼•è„šè¾“å‡º<br>ç”µå‹åªæœ‰ <span class="level-indicator level-high">é«˜ 5V</span> æˆ– <span class="level-indicator level-low">ä½ 0V</span></p>
                    </div>
                </div>

                <div class="info-card tip">
                    <div class="info-card-title"><span class="icon">ğŸ’¡</span> æ ¸å¿ƒç†è§£</div>
                    <p><strong>æ•°å­—ç”µè·¯åªå…³å¿ƒä¸¤ä¸ªçŠ¶æ€ï¼šé«˜ï¼ˆ1ï¼‰æˆ–ä½ï¼ˆ0ï¼‰</strong>ï¼Œä¸­é—´çš„è¿‡æ¸¡è¿‡ç¨‹å¾ˆå¿«ï¼Œå¯ä»¥å¿½ç•¥ã€‚</p>
                </div>
            </div>

            <!-- 1.2 ç”µå¹³æ ‡å‡† -->
            <div class="subsection" id="level">
                <h3 class="subsection-title">1.2 ç”µå¹³æ ‡å‡†ï¼ˆæœ€åŸºç¡€ä½†æœ€é‡è¦ï¼‰</h3>

                <!-- ç¾åŒ–çš„ç”µå¹³æ ‡å‡†å¯¹æ¯”å›¾ -->
                <div class="comparison-diagram">
                    <!-- TTL ç”µå¹³ -->
                    <div class="comparison-card">
                        <h4>ğŸ”µ TTL ç”µå¹³ï¼ˆ5V ç³»ç»Ÿï¼‰</h4>
                        <div class="card-svg">
                            <svg width="240" height="180" viewBox="0 0 240 180">
                                <rect width="240" height="180" fill="#0f172a" rx="8"/>

                                <!-- ç”µå‹åˆ»åº¦ -->
                                <line x1="50" y1="20" x2="50" y2="160" stroke="#475569" stroke-width="2"/>
                                <text x="25" y="30" fill="#94a3b8" font-size="10" text-anchor="middle">5V</text>
                                <text x="25" y="90" fill="#94a3b8" font-size="10" text-anchor="middle">2.5V</text>
                                <text x="25" y="160" fill="#94a3b8" font-size="10" text-anchor="middle">0V</text>

                                <!-- é«˜ç”µå¹³åŒºåŸŸ -->
                                <rect x="60" y="20" width="70" height="40" fill="#22c55e" opacity="0.3" rx="4"/>
                                <text x="95" y="45" fill="#22c55e" font-size="11" text-anchor="middle" font-weight="bold">é«˜ç”µå¹³</text>
                                <text x="145" y="35" fill="#94a3b8" font-size="9">è¾“å…¥ â‰¥2.0V</text>
                                <text x="145" y="50" fill="#94a3b8" font-size="9">è¾“å‡º â‰¥2.4V</text>

                                <!-- ä¸ç¡®å®šåŒºåŸŸ -->
                                <rect x="60" y="70" width="70" height="50" fill="#f59e0b" opacity="0.2" rx="4"/>
                                <text x="95" y="100" fill="#f59e0b" font-size="10" text-anchor="middle">ä¸ç¡®å®š</text>

                                <!-- ä½ç”µå¹³åŒºåŸŸ -->
                                <rect x="60" y="130" width="70" height="30" fill="#3b82f6" opacity="0.3" rx="4"/>
                                <text x="95" y="150" fill="#3b82f6" font-size="11" text-anchor="middle" font-weight="bold">ä½ç”µå¹³</text>
                                <text x="145" y="140" fill="#94a3b8" font-size="9">è¾“å…¥ â‰¤0.8V</text>
                                <text x="145" y="155" fill="#94a3b8" font-size="9">è¾“å‡º â‰¤0.4V</text>

                                <!-- åˆ†ç•Œçº¿ -->
                                <line x1="60" y1="60" x2="130" y2="60" stroke="#22c55e" stroke-width="1" stroke-dasharray="4,2"/>
                                <line x1="60" y1="120" x2="130" y2="120" stroke="#3b82f6" stroke-width="1" stroke-dasharray="4,2"/>
                            </svg>
                        </div>
                        <p class="card-desc" style="font-size: 0.85rem;">
                            <strong>å…¸å‹åº”ç”¨ï¼š</strong>51å•ç‰‡æœºã€74HCç³»åˆ—
                        </p>
                    </div>

                    <!-- CMOS ç”µå¹³ -->
                    <div class="comparison-card">
                        <h4>ğŸŸ¢ CMOS ç”µå¹³ï¼ˆ3.3V ç³»ç»Ÿï¼‰</h4>
                        <div class="card-svg">
                            <svg width="240" height="180" viewBox="0 0 240 180">
                                <rect width="240" height="180" fill="#0f172a" rx="8"/>

                                <!-- ç”µå‹åˆ»åº¦ -->
                                <line x1="50" y1="20" x2="50" y2="160" stroke="#475569" stroke-width="2"/>
                                <text x="25" y="30" fill="#94a3b8" font-size="10" text-anchor="middle">3.3V</text>
                                <text x="25" y="90" fill="#94a3b8" font-size="10" text-anchor="middle">1.65V</text>
                                <text x="25" y="160" fill="#94a3b8" font-size="10" text-anchor="middle">0V</text>

                                <!-- é«˜ç”µå¹³åŒºåŸŸ -->
                                <rect x="60" y="20" width="70" height="45" fill="#22c55e" opacity="0.3" rx="4"/>
                                <text x="95" y="47" fill="#22c55e" font-size="11" text-anchor="middle" font-weight="bold">é«˜ç”µå¹³</text>
                                <text x="145" y="35" fill="#94a3b8" font-size="9">è¾“å…¥ â‰¥2.0V</text>
                                <text x="145" y="50" fill="#94a3b8" font-size="9">è¾“å‡º â‰ˆ3.3V</text>

                                <!-- ä¸ç¡®å®šåŒºåŸŸ -->
                                <rect x="60" y="75" width="70" height="45" fill="#f59e0b" opacity="0.2" rx="4"/>
                                <text x="95" y="102" fill="#f59e0b" font-size="10" text-anchor="middle">ä¸ç¡®å®š</text>

                                <!-- ä½ç”µå¹³åŒºåŸŸ -->
                                <rect x="60" y="130" width="70" height="30" fill="#3b82f6" opacity="0.3" rx="4"/>
                                <text x="95" y="150" fill="#3b82f6" font-size="11" text-anchor="middle" font-weight="bold">ä½ç”µå¹³</text>
                                <text x="145" y="140" fill="#94a3b8" font-size="9">è¾“å…¥ â‰¤0.8V</text>
                                <text x="145" y="155" fill="#94a3b8" font-size="9">è¾“å‡º â‰ˆ0V</text>

                                <!-- åˆ†ç•Œçº¿ -->
                                <line x1="60" y1="65" x2="130" y2="65" stroke="#22c55e" stroke-width="1" stroke-dasharray="4,2"/>
                                <line x1="60" y1="120" x2="130" y2="120" stroke="#3b82f6" stroke-width="1" stroke-dasharray="4,2"/>
                            </svg>
                        </div>
                        <p class="card-desc" style="font-size: 0.85rem;">
                            <strong>å…¸å‹åº”ç”¨ï¼š</strong>STM32ã€ESP32ã€æ ‘è“æ´¾
                        </p>
                    </div>
                </div>

                <div class="code-block">
                    <div class="code-header">
                        <span class="code-lang">C51 - 51å•ç‰‡æœº GPIO ç¤ºä¾‹</span>
                        <button class="copy-btn" onclick="copyCode(this)">å¤åˆ¶</button>
                    </div>
                    <pre><code>// 51å•ç‰‡æœº GPIO è¾“å‡ºé«˜ç”µå¹³
P1_0 = 1;  // æˆ– P1 |= 0x01;
// æ­¤æ—¶ P1.0 å¼•è„šç”µå‹ â‰ˆ 5V

// è¾“å‡ºä½ç”µå¹³
P1_0 = 0;  // æˆ– P1 &= ~0x01;
// æ­¤æ—¶ P1.0 å¼•è„šç”µå‹ â‰ˆ 0V</code></pre>
                </div>

                <div class="info-card danger">
                    <div class="info-card-title"><span class="icon">â—</span> å…³é”®é—®é¢˜ï¼š5V å’Œ 3.3V è®¾å¤‡èƒ½ç›´æ¥è¿æ¥å—ï¼Ÿ</div>

                    <!-- ç¾åŒ–çš„ç”µå¹³å…¼å®¹æ€§å›¾ -->
                    <div class="svg-diagram" style="margin: 1rem 0; padding: 1rem;">
                        <svg width="500" height="200" viewBox="0 0 500 200">
                            <rect width="500" height="200" fill="#0f172a" rx="8"/>

                            <!-- 5V â†’ 3.3V å±é™©è¿æ¥ -->
                            <g transform="translate(20, 30)">
                                <rect x="0" y="0" width="80" height="50" rx="6" fill="#3b82f6"/>
                                <text x="40" y="22" fill="white" font-size="10" text-anchor="middle" font-weight="bold">51å•ç‰‡æœº</text>
                                <text x="40" y="38" fill="#93c5fd" font-size="11" text-anchor="middle">5V</text>

                                <line x1="85" y1="25" x2="135" y2="25" stroke="#ef4444" stroke-width="3" marker-end="url(#arrowRed)"/>

                                <rect x="140" y="0" width="80" height="50" rx="6" fill="#22c55e"/>
                                <text x="180" y="22" fill="white" font-size="10" text-anchor="middle" font-weight="bold">STM32</text>
                                <text x="180" y="38" fill="#86efac" font-size="11" text-anchor="middle">3.3V</text>

                                <text x="110" y="5" fill="#ef4444" font-size="20" text-anchor="middle">âŒ</text>
                                <text x="290" y="30" fill="#ef4444" font-size="10">å±é™©ï¼ä¼šçƒ§å3.3Vå™¨ä»¶</text>
                            </g>

                            <!-- 3.3V â†’ 5V é—®é¢˜è¿æ¥ -->
                            <g transform="translate(20, 100)">
                                <rect x="0" y="0" width="80" height="50" rx="6" fill="#22c55e"/>
                                <text x="40" y="22" fill="white" font-size="10" text-anchor="middle" font-weight="bold">STM32</text>
                                <text x="40" y="38" fill="#86efac" font-size="11" text-anchor="middle">3.3V</text>

                                <line x1="85" y1="25" x2="135" y2="25" stroke="#f59e0b" stroke-width="3"/>
                                <polygon points="135,25 125,20 125,30" fill="#f59e0b"/>

                                <rect x="140" y="0" width="80" height="50" rx="6" fill="#3b82f6"/>
                                <text x="180" y="22" fill="white" font-size="10" text-anchor="middle" font-weight="bold">51å•ç‰‡æœº</text>
                                <text x="180" y="38" fill="#93c5fd" font-size="11" text-anchor="middle">5V</text>

                                <text x="110" y="5" fill="#f59e0b" font-size="16" text-anchor="middle">âš ï¸</text>
                                <text x="290" y="30" fill="#f59e0b" font-size="10">å¯èƒ½æ— æ³•è¯†åˆ«ä¸ºé«˜ç”µå¹³</text>
                            </g>

                            <!-- è§£å†³æ–¹æ¡ˆ -->
                            <g transform="translate(320, 80)">
                                <rect x="0" y="-50" width="160" height="120" rx="8" fill="#1e293b" stroke="#475569"/>
                                <text x="80" y="-30" fill="#22c55e" font-size="11" text-anchor="middle" font-weight="bold">âœ… è§£å†³æ–¹æ¡ˆ</text>

                                <text x="10" y="-5" fill="#e2e8f0" font-size="9">1. ç”µå¹³è½¬æ¢èŠ¯ç‰‡</text>
                                <text x="20" y="10" fill="#67e8f9" font-size="8">TXS0108ã€74HC245</text>

                                <text x="10" y="30" fill="#e2e8f0" font-size="9">2. åˆ†å‹ç”µé˜»</text>
                                <text x="20" y="45" fill="#67e8f9" font-size="8">5Vâ†’3.3Vï¼ˆ2:1åˆ†å‹ï¼‰</text>

                                <text x="10" y="65" fill="#e2e8f0" font-size="9">3. é€‰æ‹©åŒç”µå¹³è®¾å¤‡</text>
                            </g>
                        </svg>
                    </div>
                </div>
            </div>

            <!-- 1.3 GPIO è¾“å‡ºæ¨¡å¼ -->
            <div class="subsection" id="gpio">
                <h3 class="subsection-title">1.3 GPIO è¾“å‡ºæ¨¡å¼ï¼ˆé€šä¿¡å¿…å¤‡ï¼‰</h3>

                <!-- ç¾åŒ–çš„æ¨æŒ½/å¼€æ¼è¾“å‡ºå¯¹æ¯”å›¾ -->
                <div class="comparison-diagram">
                    <!-- æ¨æŒ½è¾“å‡ºå¡ç‰‡ -->
                    <div class="comparison-card">
                        <h4>âš¡ æ¨æŒ½è¾“å‡ºï¼ˆPush-Pullï¼‰</h4>
                        <div class="card-svg">
                            <svg width="220" height="280" viewBox="0 0 220 280">
                                <defs>
                                    <linearGradient id="vddGrad" x1="0%" y1="0%" x2="0%" y2="100%">
                                        <stop offset="0%" style="stop-color:#ef4444"/>
                                        <stop offset="100%" style="stop-color:#dc2626"/>
                                    </linearGradient>
                                    <linearGradient id="gndGrad" x1="0%" y1="0%" x2="0%" y2="100%">
                                        <stop offset="0%" style="stop-color:#3b82f6"/>
                                        <stop offset="100%" style="stop-color:#2563eb"/>
                                    </linearGradient>
                                    <linearGradient id="mosGrad" x1="0%" y1="0%" x2="0%" y2="100%">
                                        <stop offset="0%" style="stop-color:#8b5cf6"/>
                                        <stop offset="100%" style="stop-color:#7c3aed"/>
                                    </linearGradient>
                                    <filter id="glow">
                                        <feGaussianBlur stdDeviation="2" result="coloredBlur"/>
                                        <feMerge><feMergeNode in="coloredBlur"/><feMergeNode in="SourceGraphic"/></feMerge>
                                    </filter>
                                </defs>
                                <rect width="220" height="280" fill="#0f172a" rx="8"/>

                                <!-- VDDæ ‡ç­¾ -->
                                <rect x="80" y="15" width="60" height="24" rx="4" fill="url(#vddGrad)"/>
                                <text x="110" y="32" fill="white" font-size="12" font-weight="bold" text-anchor="middle">VDD 5V</text>

                                <!-- å‚ç›´è¿çº¿ -->
                                <line x1="110" y1="39" x2="110" y2="60" stroke="#ef4444" stroke-width="3"/>

                                <!-- P-MOS -->
                                <rect x="70" y="60" width="80" height="36" rx="6" fill="url(#mosGrad)" filter="url(#glow)"/>
                                <text x="110" y="82" fill="white" font-size="11" font-weight="bold" text-anchor="middle">P-MOS</text>
                                <!-- æ§åˆ¶ç®­å¤´ -->
                                <path d="M 160 78 L 175 78" stroke="#94a3b8" stroke-width="2" marker-end="url(#arrowhead)"/>
                                <text x="178" y="82" fill="#94a3b8" font-size="9">æ§åˆ¶</text>

                                <!-- è¿çº¿åˆ°è¾“å‡º -->
                                <line x1="110" y1="96" x2="110" y2="125" stroke="#64748b" stroke-width="3"/>

                                <!-- è¾“å‡ºå¼•è„š -->
                                <line x1="40" y1="140" x2="180" y2="140" stroke="#22c55e" stroke-width="4" filter="url(#glow)"/>
                                <circle cx="110" cy="140" r="8" fill="#22c55e"/>
                                <text x="185" y="144" fill="#22c55e" font-size="11" font-weight="bold">OUT</text>

                                <!-- è¿çº¿åˆ°N-MOS -->
                                <line x1="110" y1="155" x2="110" y2="180" stroke="#64748b" stroke-width="3"/>

                                <!-- N-MOS -->
                                <rect x="70" y="180" width="80" height="36" rx="6" fill="url(#mosGrad)" filter="url(#glow)"/>
                                <text x="110" y="202" fill="white" font-size="11" font-weight="bold" text-anchor="middle">N-MOS</text>
                                <!-- æ§åˆ¶ç®­å¤´ -->
                                <path d="M 160 198 L 175 198" stroke="#94a3b8" stroke-width="2"/>
                                <text x="178" y="202" fill="#94a3b8" font-size="9">æ§åˆ¶</text>

                                <!-- è¿çº¿åˆ°GND -->
                                <line x1="110" y1="216" x2="110" y2="240" stroke="#3b82f6" stroke-width="3"/>

                                <!-- GNDæ ‡ç­¾ -->
                                <rect x="80" y="240" width="60" height="24" rx="4" fill="url(#gndGrad)"/>
                                <text x="110" y="257" fill="white" font-size="12" font-weight="bold" text-anchor="middle">GND</text>
                            </svg>
                        </div>
                        <div class="card-desc" style="font-size: 0.85rem;">
                            <p><strong style="color: #22c55e;">è¾“å‡º 1ï¼š</strong>P-MOS å¯¼é€š â†’ 5V</p>
                            <p><strong style="color: #3b82f6;">è¾“å‡º 0ï¼š</strong>N-MOS å¯¼é€š â†’ 0V</p>
                        </div>
                    </div>

                    <!-- å¼€æ¼è¾“å‡ºå¡ç‰‡ -->
                    <div class="comparison-card">
                        <h4>ğŸ”“ å¼€æ¼è¾“å‡ºï¼ˆOpen-Drainï¼‰</h4>
                        <div class="card-svg">
                            <svg width="220" height="280" viewBox="0 0 220 280">
                                <rect width="220" height="280" fill="#0f172a" rx="8"/>

                                <!-- VDDæ ‡ç­¾ -->
                                <rect x="80" y="15" width="60" height="24" rx="4" fill="url(#vddGrad)"/>
                                <text x="110" y="32" fill="white" font-size="12" font-weight="bold" text-anchor="middle">VDD 5V</text>

                                <!-- è¿çº¿ -->
                                <line x1="110" y1="39" x2="110" y2="55" stroke="#ef4444" stroke-width="3"/>

                                <!-- ä¸Šæ‹‰ç”µé˜»ï¼ˆå…³é”®å·®å¼‚ï¼ï¼‰ -->
                                <rect x="95" y="55" width="30" height="50" rx="4" fill="none" stroke="#f59e0b" stroke-width="2" stroke-dasharray="4,2"/>
                                <text x="110" y="82" fill="#f59e0b" font-size="10" font-weight="bold" text-anchor="middle">R</text>
                                <text x="145" y="75" fill="#f59e0b" font-size="8">å¤–éƒ¨</text>
                                <text x="145" y="85" fill="#f59e0b" font-size="8">ä¸Šæ‹‰</text>

                                <!-- è¿çº¿åˆ°è¾“å‡º -->
                                <line x1="110" y1="105" x2="110" y2="125" stroke="#64748b" stroke-width="3"/>

                                <!-- è¾“å‡ºå¼•è„š -->
                                <line x1="40" y1="140" x2="180" y2="140" stroke="#22c55e" stroke-width="4" filter="url(#glow)"/>
                                <circle cx="110" cy="140" r="8" fill="#22c55e"/>
                                <text x="185" y="144" fill="#22c55e" font-size="11" font-weight="bold">OUT</text>

                                <!-- è¿çº¿åˆ°N-MOS -->
                                <line x1="110" y1="155" x2="110" y2="180" stroke="#64748b" stroke-width="3"/>

                                <!-- N-MOS (åªæœ‰ä¸€ä¸ª) -->
                                <rect x="70" y="180" width="80" height="36" rx="6" fill="url(#mosGrad)" filter="url(#glow)"/>
                                <text x="110" y="202" fill="white" font-size="11" font-weight="bold" text-anchor="middle">N-MOS</text>
                                <path d="M 160 198 L 175 198" stroke="#94a3b8" stroke-width="2"/>
                                <text x="178" y="202" fill="#94a3b8" font-size="9">æ§åˆ¶</text>

                                <!-- è™šçº¿æ¡†è¡¨ç¤º"å¼€æ”¾" -->
                                <rect x="65" y="50" width="90" height="60" rx="4" fill="none" stroke="#f59e0b" stroke-width="1" stroke-dasharray="3,3" opacity="0.5"/>

                                <!-- è¿çº¿åˆ°GND -->
                                <line x1="110" y1="216" x2="110" y2="240" stroke="#3b82f6" stroke-width="3"/>

                                <!-- GNDæ ‡ç­¾ -->
                                <rect x="80" y="240" width="60" height="24" rx="4" fill="url(#gndGrad)"/>
                                <text x="110" y="257" fill="white" font-size="12" font-weight="bold" text-anchor="middle">GND</text>
                            </svg>
                        </div>
                        <div class="card-desc" style="font-size: 0.85rem;">
                            <p><strong style="color: #3b82f6;">è¾“å‡º 0ï¼š</strong>N-MOS å¯¼é€š â†’ 0V</p>
                            <p><strong style="color: #f59e0b;">è¾“å‡º 1ï¼š</strong>N-MOS æ–­å¼€ â†’ ä¸Šæ‹‰åˆ° 5V</p>
                        </div>
                    </div>
                </div>

                <div class="info-card tip">
                    <div class="info-card-title"><span class="icon">âœ…</span> æ¨æŒ½ç‰¹ç‚¹</div>
                    <ul>
                        <li>âœ… èƒ½ä¸»åŠ¨è¾“å‡ºé«˜/ä½ç”µå¹³</li>
                        <li>âœ… é©±åŠ¨èƒ½åŠ›å¼ºï¼ˆèƒ½ç‚¹äº® LEDï¼‰</li>
                        <li>âŒ å¤šä¸ªæ¨æŒ½è¾“å‡ºä¸èƒ½ç›´æ¥è¿åˆ°ä¸€èµ·ï¼ˆä¼šçŸ­è·¯ï¼‰</li>
                    </ul>
                    <p style="margin-top: 0.5rem;"><strong>é€‚ç”¨åè®®ï¼š</strong>UART TXã€SPIï¼ˆMOSI/MISO/SCKï¼‰</p>
                </div>

                <h4 style="margin: 1.5rem 0 0.5rem; color: var(--primary);">I2C å…¸å‹ç”µè·¯</h4>
                <!-- ç¾åŒ–çš„I2Cç”µè·¯å›¾ -->
                <div class="svg-diagram">
                    <div class="diagram-title">I2C æ€»çº¿æ¶æ„ - å¤šè®¾å¤‡å¹¶è”</div>
                    <svg width="500" height="220" viewBox="0 0 500 220">
                        <defs>
                            <linearGradient id="busGrad" x1="0%" y1="0%" x2="100%" y2="0%">
                                <stop offset="0%" style="stop-color:#10b981"/>
                                <stop offset="50%" style="stop-color:#22c55e"/>
                                <stop offset="100%" style="stop-color:#10b981"/>
                            </linearGradient>
                            <linearGradient id="deviceGrad" x1="0%" y1="0%" x2="0%" y2="100%">
                                <stop offset="0%" style="stop-color:#6366f1"/>
                                <stop offset="100%" style="stop-color:#4f46e5"/>
                            </linearGradient>
                        </defs>
                        <rect width="500" height="220" fill="#0f172a" rx="8"/>

                        <!-- VDD ç”µæº -->
                        <rect x="220" y="15" width="60" height="22" rx="4" fill="#ef4444"/>
                        <text x="250" y="31" fill="white" font-size="11" font-weight="bold" text-anchor="middle">VDD 3.3V</text>

                        <!-- ç”µæºçº¿ -->
                        <line x1="250" y1="37" x2="250" y2="50" stroke="#ef4444" stroke-width="2"/>
                        <line x1="150" y1="50" x2="350" y2="50" stroke="#ef4444" stroke-width="2"/>

                        <!-- ä¸Šæ‹‰ç”µé˜» -->
                        <g transform="translate(150, 50)">
                            <rect x="-12" y="5" width="24" height="35" rx="3" fill="none" stroke="#f59e0b" stroke-width="2"/>
                            <text x="0" y="27" fill="#f59e0b" font-size="9" font-weight="bold" text-anchor="middle">4.7k</text>
                            <line x1="0" y1="0" x2="0" y2="5" stroke="#f59e0b" stroke-width="2"/>
                            <line x1="0" y1="40" x2="0" y2="55" stroke="#f59e0b" stroke-width="2"/>
                        </g>
                        <g transform="translate(350, 50)">
                            <rect x="-12" y="5" width="24" height="35" rx="3" fill="none" stroke="#f59e0b" stroke-width="2"/>
                            <text x="0" y="27" fill="#f59e0b" font-size="9" font-weight="bold" text-anchor="middle">4.7k</text>
                            <line x1="0" y1="0" x2="0" y2="5" stroke="#f59e0b" stroke-width="2"/>
                            <line x1="0" y1="40" x2="0" y2="55" stroke="#f59e0b" stroke-width="2"/>
                        </g>

                        <!-- ä¿¡å·æ ‡ç­¾ -->
                        <text x="150" y="118" fill="#ec4899" font-size="11" font-weight="bold" text-anchor="middle">SDA</text>
                        <text x="350" y="118" fill="#8b5cf6" font-size="11" font-weight="bold" text-anchor="middle">SCL</text>

                        <!-- I2C æ€»çº¿ -->
                        <line x1="30" y1="130" x2="470" y2="130" stroke="#ec4899" stroke-width="4" stroke-linecap="round"/>
                        <line x1="30" y1="145" x2="470" y2="145" stroke="#8b5cf6" stroke-width="4" stroke-linecap="round"/>

                        <!-- è¿æ¥ç‚¹ -->
                        <circle cx="150" cy="130" r="5" fill="#ec4899"/>
                        <circle cx="350" cy="145" r="5" fill="#8b5cf6"/>
                        <line x1="150" y1="105" x2="150" y2="130" stroke="#ec4899" stroke-width="2"/>
                        <line x1="350" y1="105" x2="350" y2="145" stroke="#8b5cf6" stroke-width="2"/>

                        <!-- è®¾å¤‡ -->
                        <g transform="translate(80, 165)">
                            <rect x="-35" y="0" width="70" height="40" rx="6" fill="url(#deviceGrad)"/>
                            <text x="0" y="18" fill="white" font-size="10" font-weight="bold" text-anchor="middle">Master</text>
                            <text x="0" y="32" fill="#a5b4fc" font-size="8" text-anchor="middle">51å•ç‰‡æœº</text>
                            <line x1="0" y1="-5" x2="0" y2="0" stroke="#64748b" stroke-width="2"/>
                            <line x1="-15" y1="-20" x2="-15" y2="-5" stroke="#ec4899" stroke-width="2"/>
                            <line x1="15" y1="-20" x2="15" y2="-5" stroke="#8b5cf6" stroke-width="2"/>
                        </g>

                        <g transform="translate(250, 165)">
                            <rect x="-35" y="0" width="70" height="40" rx="6" fill="url(#deviceGrad)"/>
                            <text x="0" y="18" fill="white" font-size="10" font-weight="bold" text-anchor="middle">Slave 1</text>
                            <text x="0" y="32" fill="#a5b4fc" font-size="8" text-anchor="middle">EEPROM</text>
                            <line x1="-15" y1="-20" x2="-15" y2="0" stroke="#ec4899" stroke-width="2"/>
                            <line x1="15" y1="-20" x2="15" y2="0" stroke="#8b5cf6" stroke-width="2"/>
                        </g>

                        <g transform="translate(420, 165)">
                            <rect x="-35" y="0" width="70" height="40" rx="6" fill="url(#deviceGrad)"/>
                            <text x="0" y="18" fill="white" font-size="10" font-weight="bold" text-anchor="middle">Slave 2</text>
                            <text x="0" y="32" fill="#a5b4fc" font-size="8" text-anchor="middle">ä¼ æ„Ÿå™¨</text>
                            <line x1="-15" y1="-20" x2="-15" y2="0" stroke="#ec4899" stroke-width="2"/>
                            <line x1="15" y1="-20" x2="15" y2="0" stroke="#8b5cf6" stroke-width="2"/>
                        </g>

                        <!-- è¿æ¥åˆ°æ€»çº¿ -->
                        <circle cx="65" cy="130" r="4" fill="#ec4899"/>
                        <circle cx="95" cy="145" r="4" fill="#8b5cf6"/>
                        <circle cx="235" cy="130" r="4" fill="#ec4899"/>
                        <circle cx="265" cy="145" r="4" fill="#8b5cf6"/>
                        <circle cx="405" cy="130" r="4" fill="#ec4899"/>
                        <circle cx="435" cy="145" r="4" fill="#8b5cf6"/>
                    </svg>
                    <div class="diagram-legend">
                        <span class="legend-item"><span class="legend-color" style="background: #ec4899;"></span>SDA æ•°æ®çº¿</span>
                        <span class="legend-item"><span class="legend-color" style="background: #8b5cf6;"></span>SCL æ—¶é’Ÿçº¿</span>
                        <span class="legend-item"><span class="legend-color" style="background: #f59e0b;"></span>ä¸Šæ‹‰ç”µé˜»</span>
                    </div>
                </div>
            </div>

            <!-- 1.4 ä¸Šæ‹‰/ä¸‹æ‹‰ç”µé˜» -->
            <div class="subsection" id="pullup">
                <h3 class="subsection-title">1.4 ä¸Šæ‹‰/ä¸‹æ‹‰ç”µé˜»ï¼ˆå…³é”®æ¦‚å¿µï¼‰</h3>

                <!-- ç¾åŒ–çš„ä¸Šæ‹‰/ä¸‹æ‹‰ç”µé˜»å¯¹æ¯”å›¾ -->
                <div class="comparison-diagram">
                    <!-- ä¸Šæ‹‰ç”µé˜» -->
                    <div class="comparison-card">
                        <h4>â¬†ï¸ ä¸Šæ‹‰ç”µé˜»ï¼ˆPull-Upï¼‰</h4>
                        <div class="card-svg">
                            <svg width="200" height="240" viewBox="0 0 200 240">
                                <rect width="200" height="240" fill="#0f172a" rx="8"/>

                                <!-- VDD -->
                                <rect x="70" y="15" width="60" height="22" rx="4" fill="#ef4444"/>
                                <text x="100" y="30" fill="white" font-size="10" font-weight="bold" text-anchor="middle">VDD</text>

                                <!-- ä¸Šæ‹‰ç”µé˜» -->
                                <line x1="100" y1="37" x2="100" y2="50" stroke="#ef4444" stroke-width="2"/>
                                <rect x="85" y="50" width="30" height="40" rx="4" fill="none" stroke="#f59e0b" stroke-width="2"/>
                                <text x="100" y="75" fill="#f59e0b" font-size="10" font-weight="bold" text-anchor="middle">R</text>
                                <text x="135" y="70" fill="#94a3b8" font-size="8">4.7kÎ©</text>
                                <line x1="100" y1="90" x2="100" y2="105" stroke="#f59e0b" stroke-width="2"/>

                                <!-- ä¿¡å·çº¿ -->
                                <line x1="30" y1="115" x2="170" y2="115" stroke="#22c55e" stroke-width="3"/>
                                <circle cx="100" cy="115" r="5" fill="#22c55e"/>
                                <text x="175" y="118" fill="#22c55e" font-size="9" font-weight="bold">GPIO</text>

                                <!-- å¼€å…³ -->
                                <line x1="100" y1="120" x2="100" y2="140" stroke="#64748b" stroke-width="2"/>
                                <rect x="80" y="140" width="40" height="30" rx="4" fill="#475569" stroke="#64748b" stroke-width="1"/>
                                <text x="100" y="160" fill="#e2e8f0" font-size="9" text-anchor="middle">æŒ‰é”®</text>
                                <line x1="100" y1="170" x2="100" y2="195" stroke="#64748b" stroke-width="2"/>

                                <!-- GND -->
                                <rect x="70" y="195" width="60" height="22" rx="4" fill="#3b82f6"/>
                                <text x="100" y="210" fill="white" font-size="10" font-weight="bold" text-anchor="middle">GND</text>

                                <!-- çŠ¶æ€æŒ‡ç¤º -->
                                <text x="10" y="115" fill="#22c55e" font-size="8">é»˜è®¤=1</text>
                            </svg>
                        </div>
                        <p class="card-desc">
                            ğŸ”¹ <strong>æœªæŒ‰ä¸‹ï¼š</strong>ä¸Šæ‹‰åˆ° VDD â†’ è¯»åˆ° <span class="level-indicator level-high">1</span><br>
                            ğŸ”¹ <strong>æŒ‰ä¸‹æ—¶ï¼š</strong>æ¥åœ° â†’ è¯»åˆ° <span class="level-indicator level-low">0</span>
                        </p>
                    </div>

                    <!-- ä¸‹æ‹‰ç”µé˜» -->
                    <div class="comparison-card">
                        <h4>â¬‡ï¸ ä¸‹æ‹‰ç”µé˜»ï¼ˆPull-Downï¼‰</h4>
                        <div class="card-svg">
                            <svg width="200" height="240" viewBox="0 0 200 240">
                                <rect width="200" height="240" fill="#0f172a" rx="8"/>

                                <!-- VDD -->
                                <rect x="70" y="15" width="60" height="22" rx="4" fill="#ef4444"/>
                                <text x="100" y="30" fill="white" font-size="10" font-weight="bold" text-anchor="middle">VDD</text>

                                <!-- å¼€å…³ï¼ˆä¸Šæ–¹ï¼‰ -->
                                <line x1="100" y1="37" x2="100" y2="50" stroke="#ef4444" stroke-width="2"/>
                                <rect x="80" y="50" width="40" height="30" rx="4" fill="#475569" stroke="#64748b" stroke-width="1"/>
                                <text x="100" y="70" fill="#e2e8f0" font-size="9" text-anchor="middle">æŒ‰é”®</text>
                                <line x1="100" y1="80" x2="100" y2="105" stroke="#64748b" stroke-width="2"/>

                                <!-- ä¿¡å·çº¿ -->
                                <line x1="30" y1="115" x2="170" y2="115" stroke="#22c55e" stroke-width="3"/>
                                <circle cx="100" cy="115" r="5" fill="#22c55e"/>
                                <text x="175" y="118" fill="#22c55e" font-size="9" font-weight="bold">GPIO</text>

                                <!-- ä¸‹æ‹‰ç”µé˜» -->
                                <line x1="100" y1="120" x2="100" y2="140" stroke="#64748b" stroke-width="2"/>
                                <rect x="85" y="140" width="30" height="40" rx="4" fill="none" stroke="#3b82f6" stroke-width="2"/>
                                <text x="100" y="165" fill="#3b82f6" font-size="10" font-weight="bold" text-anchor="middle">R</text>
                                <text x="135" y="160" fill="#94a3b8" font-size="8">10kÎ©</text>
                                <line x1="100" y1="180" x2="100" y2="195" stroke="#3b82f6" stroke-width="2"/>

                                <!-- GND -->
                                <rect x="70" y="195" width="60" height="22" rx="4" fill="#3b82f6"/>
                                <text x="100" y="210" fill="white" font-size="10" font-weight="bold" text-anchor="middle">GND</text>

                                <!-- çŠ¶æ€æŒ‡ç¤º -->
                                <text x="10" y="115" fill="#3b82f6" font-size="8">é»˜è®¤=0</text>
                            </svg>
                        </div>
                        <p class="card-desc">
                            ğŸ”¹ <strong>æœªæŒ‰ä¸‹ï¼š</strong>ä¸‹æ‹‰åˆ° GND â†’ è¯»åˆ° <span class="level-indicator level-low">0</span><br>
                            ğŸ”¹ <strong>æŒ‰ä¸‹æ—¶ï¼š</strong>æ¥ VDD â†’ è¯»åˆ° <span class="level-indicator level-high">1</span>
                        </p>
                    </div>
                </div>

                <p><strong>åº”ç”¨åœºæ™¯ï¼š</strong>I2C æ€»çº¿ï¼ˆå¼ºåˆ¶è¦æ±‚ä¸Šæ‹‰ï¼‰ã€æŒ‰é”®è¾“å…¥ã€UART RX ç©ºé—²çŠ¶æ€</p>

                <div class="table-wrapper">
                    <table>
                        <tr>
                            <th>ç”µé˜»å€¼</th>
                            <th>ç‰¹ç‚¹</th>
                            <th>é€‚ç”¨åœºæ™¯</th>
                        </tr>
                        <tr>
                            <td>4.7kÎ© - 10kÎ©</td>
                            <td>é€šç”¨å€¼ï¼Œå¹³è¡¡åŠŸè€—å’Œå“åº”é€Ÿåº¦</td>
                            <td>I2Cã€æŒ‰é”®è¾“å…¥</td>
                        </tr>
                        <tr>
                            <td>&lt; 1kÎ©</td>
                            <td>åŠŸè€—å¤§ï¼Œå“åº”å¿«</td>
                            <td>é«˜é€Ÿä¿¡å·</td>
                        </tr>
                        <tr>
                            <td>&gt; 100kÎ©</td>
                            <td>åŠŸè€—ä½ï¼ŒæŠ—å¹²æ‰°èƒ½åŠ›å¼±</td>
                            <td>æä½åŠŸè€—åœºæ™¯</td>
                        </tr>
                    </table>
                </div>
            </div>

            <!-- 1.5 æ—¶åºå›¾é˜…è¯» -->
            <div class="subsection" id="timing">
                <h3 class="subsection-title">1.5 æ—¶åºå›¾é˜…è¯»ï¼ˆé‡ä¸­ä¹‹é‡ï¼‰</h3>

                <h4 style="margin: 1rem 0 0.5rem; color: var(--primary);">åŸºæœ¬ç¬¦å·</h4>
                <!-- ç¾åŒ–çš„æ—¶åºå›¾åŸºæœ¬ç¬¦å· -->
                <div class="svg-diagram">
                    <div class="diagram-title">æ—¶åºå›¾åŸºæœ¬æ³¢å½¢ç¬¦å·</div>
                    <svg width="600" height="200" viewBox="0 0 600 200">
                        <defs>
                            <linearGradient id="highGrad" x1="0%" y1="0%" x2="0%" y2="100%">
                                <stop offset="0%" style="stop-color:#22c55e"/>
                                <stop offset="100%" style="stop-color:#16a34a"/>
                            </linearGradient>
                            <linearGradient id="lowGrad" x1="0%" y1="0%" x2="0%" y2="100%">
                                <stop offset="0%" style="stop-color:#3b82f6"/>
                                <stop offset="100%" style="stop-color:#2563eb"/>
                            </linearGradient>
                            <marker id="arrow" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                                <polygon points="0 0, 10 3.5, 0 7" fill="#f59e0b"/>
                            </marker>
                        </defs>
                        <rect width="600" height="200" fill="#0f172a" rx="8"/>

                        <!-- ä¸Šå‡æ²¿ -->
                        <g transform="translate(30, 25)">
                            <text x="50" y="0" fill="#94a3b8" font-size="11" text-anchor="middle">ä¸Šå‡æ²¿ (0â†’1)</text>
                            <path d="M 10 50 L 50 50 L 50 15 L 90 15" fill="none" stroke="#22c55e" stroke-width="3" stroke-linecap="round"/>
                            <circle cx="50" cy="32" r="4" fill="#f59e0b"/>
                            <path d="M 55 42 L 65 22" stroke="#f59e0b" stroke-width="2" marker-end="url(#arrow)"/>
                            <text x="75" y="38" fill="#f59e0b" font-size="9">è§¦å‘ç‚¹</text>
                        </g>

                        <!-- ä¸‹é™æ²¿ -->
                        <g transform="translate(160, 25)">
                            <text x="50" y="0" fill="#94a3b8" font-size="11" text-anchor="middle">ä¸‹é™æ²¿ (1â†’0)</text>
                            <path d="M 10 15 L 50 15 L 50 50 L 90 50" fill="none" stroke="#ef4444" stroke-width="3" stroke-linecap="round"/>
                            <circle cx="50" cy="32" r="4" fill="#f59e0b"/>
                            <path d="M 55 22 L 65 42" stroke="#f59e0b" stroke-width="2" marker-end="url(#arrow)"/>
                            <text x="75" y="28" fill="#f59e0b" font-size="9">è§¦å‘ç‚¹</text>
                        </g>

                        <!-- é«˜ç”µå¹³ä¿æŒ -->
                        <g transform="translate(290, 25)">
                            <text x="50" y="0" fill="#94a3b8" font-size="11" text-anchor="middle">é«˜ç”µå¹³ä¿æŒ</text>
                            <path d="M 10 15 L 90 15" fill="none" stroke="#22c55e" stroke-width="4" stroke-linecap="round"/>
                            <rect x="10" y="15" width="80" height="35" fill="#22c55e" opacity="0.15"/>
                            <text x="50" y="40" fill="#22c55e" font-size="10" text-anchor="middle" font-weight="bold">1 / HIGH</text>
                        </g>

                        <!-- ä½ç”µå¹³ä¿æŒ -->
                        <g transform="translate(420, 25)">
                            <text x="50" y="0" fill="#94a3b8" font-size="11" text-anchor="middle">ä½ç”µå¹³ä¿æŒ</text>
                            <path d="M 10 50 L 90 50" fill="none" stroke="#3b82f6" stroke-width="4" stroke-linecap="round"/>
                            <rect x="10" y="15" width="80" height="35" fill="#3b82f6" opacity="0.15"/>
                            <text x="50" y="40" fill="#3b82f6" font-size="10" text-anchor="middle" font-weight="bold">0 / LOW</text>
                        </g>

                        <!-- ä¸‰æ€ï¼ˆé«˜é˜»ï¼‰ -->
                        <g transform="translate(30, 120)">
                            <text x="50" y="0" fill="#94a3b8" font-size="11" text-anchor="middle">ä¸‰æ€ï¼ˆé«˜é˜» Hi-Zï¼‰</text>
                            <path d="M 10 32 L 90 32" fill="none" stroke="#8b5cf6" stroke-width="3" stroke-dasharray="8,4" stroke-linecap="round"/>
                            <text x="50" y="55" fill="#8b5cf6" font-size="9" text-anchor="middle">æµ®ç©º/æœªå®šä¹‰</text>
                        </g>

                        <!-- æ•°æ®æœ‰æ•ˆ -->
                        <g transform="translate(160, 120)">
                            <text x="50" y="0" fill="#94a3b8" font-size="11" text-anchor="middle">æ•°æ®æœ‰æ•ˆåŒº</text>
                            <path d="M 10 15 L 25 32 L 10 50" fill="none" stroke="#ec4899" stroke-width="2"/>
                            <path d="M 25 32 L 75 32" fill="none" stroke="#ec4899" stroke-width="3"/>
                            <path d="M 90 15 L 75 32 L 90 50" fill="none" stroke="#ec4899" stroke-width="2"/>
                            <text x="50" y="35" fill="#ec4899" font-size="9" text-anchor="middle" font-weight="bold">DATA</text>
                        </g>

                        <!-- ä¸ç¡®å®šçŠ¶æ€ -->
                        <g transform="translate(290, 120)">
                            <text x="50" y="0" fill="#94a3b8" font-size="11" text-anchor="middle">ä¸ç¡®å®š/åˆ‡æ¢ä¸­</text>
                            <path d="M 10 15 L 25 50 L 40 15 L 55 50 L 70 15 L 85 50" fill="none" stroke="#f59e0b" stroke-width="2" stroke-linecap="round"/>
                            <rect x="10" y="15" width="80" height="40" fill="#f59e0b" opacity="0.1"/>
                        </g>

                        <!-- æ—¶é’Ÿè„‰å†² -->
                        <g transform="translate(420, 120)">
                            <text x="50" y="0" fill="#94a3b8" font-size="11" text-anchor="middle">æ—¶é’Ÿè„‰å†²</text>
                            <path d="M 10 50 L 20 50 L 20 15 L 40 15 L 40 50 L 50 50 L 50 15 L 70 15 L 70 50 L 90 50" fill="none" stroke="#06b6d4" stroke-width="3" stroke-linecap="square"/>
                        </g>
                    </svg>
                    <div class="diagram-legend">
                        <span class="legend-item"><span class="legend-color" style="background: #22c55e;"></span>é«˜ç”µå¹³ (1)</span>
                        <span class="legend-item"><span class="legend-color" style="background: #3b82f6;"></span>ä½ç”µå¹³ (0)</span>
                        <span class="legend-item"><span class="legend-color" style="background: #f59e0b;"></span>è¾¹æ²¿è§¦å‘ç‚¹</span>
                    </div>
                </div>

                <h4 style="margin: 1.5rem 0 0.5rem; color: var(--primary);">å®æˆ˜æ¡ˆä¾‹ï¼šUART å‘é€å­—èŠ‚ 0x41</h4>
                <!-- ç¾åŒ–çš„UARTæ—¶åºå›¾ -->
                <div class="svg-diagram">
                    <div class="diagram-title">UART å‘é€ 0x41 ('A') - æ³¢ç‰¹ç‡ 9600bps</div>
                    <svg width="700" height="180" viewBox="0 0 700 180">
                        <rect width="700" height="180" fill="#0f172a" rx="8"/>

                        <!-- èƒŒæ™¯ç½‘æ ¼ -->
                        <defs>
                            <pattern id="uartGrid" width="50" height="50" patternUnits="userSpaceOnUse">
                                <path d="M 50 0 L 0 0 0 50" fill="none" stroke="#1e293b" stroke-width="1"/>
                            </pattern>
                        </defs>
                        <rect x="80" y="30" width="580" height="80" fill="url(#uartGrid)"/>

                        <!-- ä¿¡å·æ ‡ç­¾ -->
                        <text x="40" y="75" fill="#94a3b8" font-size="12" text-anchor="middle" font-weight="bold">TX</text>

                        <!-- æ³¢å½¢ -->
                        <path d="M 80 45 L 110 45 L 110 95 L 160 95 L 160 45 L 210 45 L 210 95 L 260 95 L 260 95 L 310 95 L 310 95 L 360 95 L 360 95 L 410 95 L 410 45 L 460 45 L 460 95 L 510 95 L 510 45 L 560 45 L 560 45 L 660 45"
                              fill="none" stroke="#22c55e" stroke-width="3" stroke-linecap="square"/>

                        <!-- ä½æ ‡ç­¾ -->
                        <g fill="#64748b" font-size="9" text-anchor="middle">
                            <text x="95" y="25">ç©ºé—²</text>
                            <text x="135" y="25" fill="#ef4444" font-weight="bold">èµ·å§‹</text>
                            <text x="185" y="25">D0</text>
                            <text x="235" y="25">D1</text>
                            <text x="285" y="25">D2</text>
                            <text x="335" y="25">D3</text>
                            <text x="385" y="25">D4</text>
                            <text x="435" y="25">D5</text>
                            <text x="485" y="25">D6</text>
                            <text x="535" y="25">D7</text>
                            <text x="585" y="25" fill="#22c55e" font-weight="bold">åœæ­¢</text>
                            <text x="635" y="25">ç©ºé—²</text>
                        </g>

                        <!-- ä½å€¼ -->
                        <g font-size="11" font-weight="bold" text-anchor="middle">
                            <text x="95" y="75" fill="#22c55e">1</text>
                            <text x="135" y="75" fill="#ef4444">0</text>
                            <text x="185" y="75" fill="#22c55e">1</text>
                            <text x="235" y="75" fill="#3b82f6">0</text>
                            <text x="285" y="75" fill="#3b82f6">0</text>
                            <text x="335" y="75" fill="#3b82f6">0</text>
                            <text x="385" y="75" fill="#3b82f6">0</text>
                            <text x="435" y="75" fill="#22c55e">1</text>
                            <text x="485" y="75" fill="#3b82f6">0</text>
                            <text x="535" y="75" fill="#22c55e">1</text>
                            <text x="585" y="75" fill="#22c55e">1</text>
                        </g>

                        <!-- æ—¶é—´æ ‡æ³¨ -->
                        <line x1="110" y1="105" x2="110" y2="125" stroke="#f59e0b" stroke-width="1"/>
                        <line x1="160" y1="105" x2="160" y2="125" stroke="#f59e0b" stroke-width="1"/>
                        <line x1="110" y1="120" x2="160" y2="120" stroke="#f59e0b" stroke-width="1"/>
                        <text x="135" y="140" fill="#f59e0b" font-size="10" text-anchor="middle">104Î¼s</text>

                        <!-- è§£é‡Šæ–‡å­— -->
                        <text x="80" y="165" fill="#94a3b8" font-size="10">
                            <tspan font-weight="bold" fill="#ec4899">0x41</tspan> = 0b0<tspan fill="#22c55e">1</tspan>00000<tspan fill="#22c55e">1</tspan>
                            <tspan dx="20">LSB å…ˆå‘ï¼š</tspan>
                            <tspan fill="#22c55e">1</tspan>-0-0-0-0-0-<tspan fill="#22c55e">1</tspan>-0
                        </text>
                    </svg>
                    <div class="diagram-legend">
                        <span class="legend-item"><span class="legend-color" style="background: #22c55e;"></span>é«˜ç”µå¹³ (1)</span>
                        <span class="legend-item"><span class="legend-color" style="background: #ef4444;"></span>èµ·å§‹ä½ (å¿…é¡»ä¸º0)</span>
                        <span class="legend-item"><span class="legend-color" style="background: #f59e0b;"></span>ä½æ—¶é—´ 104Î¼s</span>
                    </div>
                </div>

                <div class="info-card info">
                    <div class="info-card-title"><span class="icon">ğŸ’¡</span> å…³é”®ç‚¹</div>
                    <ul>
                        <li><strong>èµ·å§‹ä½ï¼š</strong>å¿…é¡»æ˜¯ 0ï¼ˆä»ç©ºé—²çŠ¶æ€ä¸‹é™æ²¿è§¦å‘ï¼‰</li>
                        <li><strong>æ•°æ®ä½ï¼š</strong>LSBï¼ˆæœ€ä½ä½ï¼‰å…ˆå‘</li>
                        <li><strong>åœæ­¢ä½ï¼š</strong>å¿…é¡»æ˜¯ 1ï¼ˆå›åˆ°ç©ºé—²çŠ¶æ€ï¼‰</li>
                    </ul>
                </div>

                <h4 style="margin: 1.5rem 0 0.5rem; color: var(--primary);">SPI æ—¶åºå›¾ï¼ˆCPOL=0, CPHA=0ï¼‰</h4>
                <!-- ç¾åŒ–çš„SPIæ—¶åºå›¾ -->
                <div class="svg-diagram">
                    <div class="diagram-title">SPI Mode 0 æ—¶åº - ä¸Šå‡æ²¿é‡‡æ ·</div>
                    <svg width="650" height="240" viewBox="0 0 650 240">
                        <rect width="650" height="240" fill="#0f172a" rx="8"/>

                        <!-- ä¿¡å·æ ‡ç­¾åˆ— -->
                        <g fill="#94a3b8" font-size="11" font-weight="bold">
                            <text x="45" y="50" text-anchor="end">CS</text>
                            <text x="45" y="100" text-anchor="end">CLK</text>
                            <text x="45" y="150" text-anchor="end">MOSI</text>
                            <text x="45" y="200" text-anchor="end">MISO</text>
                        </g>

                        <!-- CS ä¿¡å· -->
                        <path d="M 60 40 L 90 40 L 90 55 L 550 55 L 550 40 L 620 40"
                              fill="none" stroke="#ef4444" stroke-width="2.5" stroke-linecap="square"/>
                        <text x="320" y="68" fill="#ef4444" font-size="8" text-anchor="middle">ç‰‡é€‰æœ‰æ•ˆï¼ˆä½ç”µå¹³ï¼‰</text>

                        <!-- CLK ä¿¡å· -->
                        <path d="M 60 110 L 100 110 L 100 85 L 130 85 L 130 110 L 160 110 L 160 85 L 190 85 L 190 110 L 220 110 L 220 85 L 250 85 L 250 110 L 280 110 L 280 85 L 310 85 L 310 110 L 340 110 L 340 85 L 370 85 L 370 110 L 400 110 L 400 85 L 430 85 L 430 110 L 460 110 L 460 85 L 490 85 L 490 110 L 520 110 L 520 85 L 550 85 L 550 110 L 620 110"
                              fill="none" stroke="#8b5cf6" stroke-width="2.5" stroke-linecap="square"/>

                        <!-- é‡‡æ ·ç®­å¤´ -->
                        <g fill="#f59e0b">
                            <polygon points="100,118 96,128 104,128"/>
                            <polygon points="160,118 156,128 164,128"/>
                            <polygon points="220,118 216,128 224,128"/>
                            <polygon points="280,118 276,128 284,128"/>
                            <polygon points="340,118 336,128 344,128"/>
                            <polygon points="400,118 396,128 404,128"/>
                            <polygon points="460,118 456,128 464,128"/>
                            <polygon points="520,118 516,128 524,128"/>
                        </g>
                        <text x="540" y="128" fill="#f59e0b" font-size="8">â†‘é‡‡æ ·</text>

                        <!-- MOSI æ•°æ® -->
                        <g transform="translate(60, 140)">
                            <path d="M 0 15 L 40 15" fill="none" stroke="#22c55e" stroke-width="2"/>
                            <!-- æ•°æ®ä½ -->
                            <g stroke="#22c55e" stroke-width="2" fill="none">
                                <path d="M 40 0 L 55 15 L 40 30"/>
                                <path d="M 55 15 L 115 15"/>
                                <path d="M 115 0 L 130 15 L 115 30"/>
                                <path d="M 130 15 L 175 15"/>
                                <path d="M 175 0 L 190 15 L 175 30"/>
                                <path d="M 190 15 L 235 15"/>
                                <path d="M 235 0 L 250 15 L 235 30"/>
                                <path d="M 250 15 L 295 15"/>
                                <path d="M 295 0 L 310 15 L 295 30"/>
                                <path d="M 310 15 L 355 15"/>
                                <path d="M 355 0 L 370 15 L 355 30"/>
                                <path d="M 370 15 L 415 15"/>
                                <path d="M 415 0 L 430 15 L 415 30"/>
                                <path d="M 430 15 L 475 15"/>
                                <path d="M 475 0 L 490 15 L 475 30"/>
                                <path d="M 490 15 L 560 15"/>
                            </g>
                        </g>
                        <!-- MOSI ä½æ ‡ç­¾ -->
                        <g fill="#22c55e" font-size="9" font-weight="bold" text-anchor="middle">
                            <text x="145" y="158">D7</text>
                            <text x="205" y="158">D6</text>
                            <text x="265" y="158">D5</text>
                            <text x="325" y="158">D4</text>
                            <text x="385" y="158">D3</text>
                            <text x="445" y="158">D2</text>
                            <text x="505" y="158">D1</text>
                            <text x="565" y="158">D0</text>
                        </g>

                        <!-- MISO æ•°æ® -->
                        <g transform="translate(60, 190)">
                            <path d="M 0 15 L 40 15" fill="none" stroke="#ec4899" stroke-width="2"/>
                            <g stroke="#ec4899" stroke-width="2" fill="none">
                                <path d="M 40 0 L 55 15 L 40 30"/>
                                <path d="M 55 15 L 115 15"/>
                                <path d="M 115 0 L 130 15 L 115 30"/>
                                <path d="M 130 15 L 175 15"/>
                                <path d="M 175 0 L 190 15 L 175 30"/>
                                <path d="M 190 15 L 235 15"/>
                                <path d="M 235 0 L 250 15 L 235 30"/>
                                <path d="M 250 15 L 295 15"/>
                                <path d="M 295 0 L 310 15 L 295 30"/>
                                <path d="M 310 15 L 355 15"/>
                                <path d="M 355 0 L 370 15 L 355 30"/>
                                <path d="M 370 15 L 415 15"/>
                                <path d="M 415 0 L 430 15 L 415 30"/>
                                <path d="M 430 15 L 475 15"/>
                                <path d="M 475 0 L 490 15 L 475 30"/>
                                <path d="M 490 15 L 560 15"/>
                            </g>
                        </g>
                        <!-- MISO ä½æ ‡ç­¾ -->
                        <g fill="#ec4899" font-size="9" font-weight="bold" text-anchor="middle">
                            <text x="145" y="208">D7</text>
                            <text x="205" y="208">D6</text>
                            <text x="265" y="208">D5</text>
                            <text x="325" y="208">D4</text>
                            <text x="385" y="208">D3</text>
                            <text x="445" y="208">D2</text>
                            <text x="505" y="208">D1</text>
                            <text x="565" y="208">D0</text>
                        </g>
                    </svg>
                    <div class="diagram-legend">
                        <span class="legend-item"><span class="legend-color" style="background: #ef4444;"></span>CS ç‰‡é€‰</span>
                        <span class="legend-item"><span class="legend-color" style="background: #8b5cf6;"></span>CLK æ—¶é’Ÿ</span>
                        <span class="legend-item"><span class="legend-color" style="background: #22c55e;"></span>MOSI ä¸»å‡ºä»å…¥</span>
                        <span class="legend-item"><span class="legend-color" style="background: #ec4899;"></span>MISO ä¸»å…¥ä»å‡º</span>
                    </div>
                </div>

                <div class="table-wrapper">
                    <table>
                        <tr>
                            <th>æ—¶åºå‚æ•°</th>
                            <th>å«ä¹‰</th>
                        </tr>
                        <tr>
                            <td>tsuï¼ˆSetup Timeï¼‰</td>
                            <td>æ•°æ®åœ¨æ—¶é’Ÿæ²¿ä¹‹å‰ç¨³å®šçš„æ—¶é—´</td>
                        </tr>
                        <tr>
                            <td>thï¼ˆHold Timeï¼‰</td>
                            <td>æ•°æ®åœ¨æ—¶é’Ÿæ²¿ä¹‹åä¿æŒçš„æ—¶é—´</td>
                        </tr>
                        <tr>
                            <td>tpdï¼ˆPropagation Delayï¼‰</td>
                            <td>ä¿¡å·ä¼ è¾“å»¶è¿Ÿ</td>
                        </tr>
                    </table>
                </div>
            </div>
        </section>

        <!-- ç¬¬äºŒå‘¨ -->
        <section class="section" id="week2">
            <header class="section-header">
                <span class="section-icon">ğŸ”¬</span>
                <h2 class="section-title">ç¬¬äºŒå‘¨ï¼šå®éªŒéªŒè¯ï¼ˆå¿…é¡»åŠ¨æ‰‹ï¼‰</h2>
            </header>

            <!-- å®éªŒ1 -->
            <div class="subsection" id="exp1">
                <h3 class="subsection-title">å®éªŒ 1ï¼šLED é—ªçƒï¼ˆç†è§£ç”µå¹³è¾“å‡ºï¼‰</h3>

                <p><strong>ææ–™ï¼š</strong>STC89C52 å¼€å‘æ¿ï¼ˆæˆ–ä»»æ„ 51 å•ç‰‡æœºå¼€å‘æ¿ï¼‰ã€LED + 1kÎ© é™æµç”µé˜»</p>

                <h4 style="margin: 1rem 0 0.5rem; color: var(--primary);">ç”µè·¯è¿æ¥</h4>
                <!-- ç¾åŒ–çš„LEDç”µè·¯å›¾ -->
                <div class="svg-diagram" style="padding: 1rem;">
                    <svg width="200" height="220" viewBox="0 0 200 220">
                        <rect width="200" height="220" fill="#0f172a" rx="8"/>

                        <!-- P1.0 å¼•è„š -->
                        <rect x="70" y="15" width="60" height="28" rx="5" fill="#3b82f6"/>
                        <text x="100" y="34" fill="white" font-size="11" text-anchor="middle" font-weight="bold">P1.0</text>

                        <!-- è¿çº¿ -->
                        <line x1="100" y1="43" x2="100" y2="60" stroke="#64748b" stroke-width="3"/>

                        <!-- é™æµç”µé˜» -->
                        <rect x="80" y="60" width="40" height="35" rx="4" fill="none" stroke="#f59e0b" stroke-width="2"/>
                        <text x="100" y="82" fill="#f59e0b" font-size="10" text-anchor="middle" font-weight="bold">1kÎ©</text>
                        <text x="140" y="78" fill="#94a3b8" font-size="8">é™æµç”µé˜»</text>

                        <!-- è¿çº¿ -->
                        <line x1="100" y1="95" x2="100" y2="115" stroke="#64748b" stroke-width="3"/>

                        <!-- LED -->
                        <g transform="translate(100, 145)">
                            <!-- LED ä¸‰è§’å½¢ -->
                            <polygon points="0,-25 -20,5 20,5" fill="#ef4444" opacity="0.8"/>
                            <line x1="-20" y1="5" x2="20" y2="5" stroke="#ef4444" stroke-width="3"/>
                            <!-- å‘å…‰çº¿æ¡ -->
                            <line x1="25" y1="-15" x2="35" y2="-25" stroke="#fca5a5" stroke-width="2"/>
                            <line x1="28" y1="-5" x2="40" y2="-10" stroke="#fca5a5" stroke-width="2"/>
                        </g>
                        <text x="145" y="145" fill="#ef4444" font-size="9">LED</text>
                        <text x="145" y="158" fill="#94a3b8" font-size="7">é•¿è„š=é˜³æ</text>

                        <!-- è¿çº¿åˆ°GND -->
                        <line x1="100" y1="150" x2="100" y2="180" stroke="#64748b" stroke-width="3"/>

                        <!-- GND -->
                        <rect x="70" y="180" width="60" height="24" rx="4" fill="#475569"/>
                        <text x="100" y="196" fill="white" font-size="11" text-anchor="middle" font-weight="bold">GND</text>
                    </svg>
                </div>

                <div class="code-block">
                    <div class="code-header">
                        <span class="code-lang">C51 - LED é—ªçƒ</span>
                        <button class="copy-btn" onclick="copyCode(this)">å¤åˆ¶</button>
                    </div>
                    <pre><code>#include &lt;reg52.h&gt;

sbit LED = P1^0;  // å®šä¹‰ P1.0 ä¸º LED æ§åˆ¶å¼•è„š

void delay_ms(unsigned int ms) {
    unsigned int i, j;
    for(i = ms; i > 0; i--)
        for(j = 110; j > 0; j--);  // 12MHz æ™¶æŒ¯çº¦ 1ms
}

void main() {
    while(1) {
        LED = 0;  // è¾“å‡ºä½ç”µå¹³ â†’ LED äº®ï¼ˆå…±é˜³ææ¥æ³•ï¼‰
        delay_ms(500);
        LED = 1;  // è¾“å‡ºé«˜ç”µå¹³ â†’ LED ç­
        delay_ms(500);
    }
}</code></pre>
                </div>

                <div class="info-card tip">
                    <div class="info-card-title"><span class="icon">ğŸ”§</span> ç”¨ä¸‡ç”¨è¡¨æµ‹é‡</div>
                    <ul>
                        <li>LED ç­æ—¶ï¼šP1.0 ç”µå‹ â‰ˆ 5Vï¼ˆé«˜ç”µå¹³ï¼‰</li>
                        <li>LED äº®æ—¶ï¼šP1.0 ç”µå‹ â‰ˆ 0Vï¼ˆä½ç”µå¹³ï¼‰</li>
                    </ul>
                    <p style="margin-top: 0.5rem;"><strong>æ³¨æ„ï¼š</strong>51å•ç‰‡æœº I/O å£çŒç”µæµèƒ½åŠ›å¼ºï¼Œæ‹‰ç”µæµèƒ½åŠ›å¼±ï¼Œå¸¸ç”¨ä½ç”µå¹³ç‚¹äº® LEDã€‚</p>
                </div>
            </div>

            <!-- å®éªŒ2 -->
            <div class="subsection" id="exp2">
                <h3 class="subsection-title">å®éªŒ 2ï¼šæŒ‰é”®è¾“å…¥ï¼ˆç†è§£ä¸Šæ‹‰ç”µé˜»ï¼‰</h3>

                <h4 style="margin: 1rem 0 0.5rem; color: var(--primary);">ç”µè·¯è¿æ¥</h4>
                <!-- ç¾åŒ–çš„æŒ‰é”®ç”µè·¯å›¾ -->
                <div class="svg-diagram" style="padding: 1rem;">
                    <svg width="240" height="240" viewBox="0 0 240 240">
                        <rect width="240" height="240" fill="#0f172a" rx="8"/>

                        <!-- 5V ç”µæº -->
                        <rect x="90" y="15" width="60" height="24" rx="4" fill="#ef4444"/>
                        <text x="120" y="32" fill="white" font-size="11" text-anchor="middle" font-weight="bold">5V</text>

                        <!-- è¿çº¿ -->
                        <line x1="120" y1="39" x2="120" y2="55" stroke="#ef4444" stroke-width="2"/>

                        <!-- ä¸Šæ‹‰ç”µé˜» -->
                        <rect x="100" y="55" width="40" height="35" rx="4" fill="none" stroke="#f59e0b" stroke-width="2"/>
                        <text x="120" y="77" fill="#f59e0b" font-size="10" text-anchor="middle" font-weight="bold">10kÎ©</text>
                        <text x="160" y="68" fill="#94a3b8" font-size="8">ä¸Šæ‹‰ç”µé˜»</text>
                        <text x="160" y="80" fill="#64748b" font-size="7">(å¯é€‰)</text>

                        <!-- è¿çº¿åˆ°GPIO -->
                        <line x1="120" y1="90" x2="120" y2="110" stroke="#f59e0b" stroke-width="2"/>

                        <!-- P3.2 ä¿¡å·çº¿ -->
                        <line x1="40" y1="120" x2="200" y2="120" stroke="#22c55e" stroke-width="4"/>
                        <circle cx="120" cy="120" r="6" fill="#22c55e"/>
                        <rect x="170" y="108" width="55" height="24" rx="4" fill="#3b82f6"/>
                        <text x="197" y="123" fill="white" font-size="9" text-anchor="middle" font-weight="bold">P3.2</text>
                        <text x="197" y="145" fill="#64748b" font-size="8" text-anchor="middle">(INT0)</text>

                        <!-- è¿çº¿åˆ°æŒ‰é”® -->
                        <line x1="120" y1="126" x2="120" y2="150" stroke="#64748b" stroke-width="2"/>

                        <!-- æŒ‰é”® -->
                        <rect x="95" y="150" width="50" height="35" rx="6" fill="#475569" stroke="#64748b" stroke-width="1"/>
                        <text x="120" y="172" fill="#e2e8f0" font-size="10" text-anchor="middle" font-weight="bold">æŒ‰é”®</text>

                        <!-- è¿çº¿åˆ°GND -->
                        <line x1="120" y1="185" x2="120" y2="200" stroke="#64748b" stroke-width="2"/>

                        <!-- GND -->
                        <rect x="90" y="200" width="60" height="24" rx="4" fill="#3b82f6"/>
                        <text x="120" y="217" fill="white" font-size="11" text-anchor="middle" font-weight="bold">GND</text>

                        <!-- çŠ¶æ€è¯´æ˜ -->
                        <text x="25" y="115" fill="#22c55e" font-size="8">æ¾å¼€=1</text>
                        <text x="25" y="128" fill="#3b82f6" font-size="8">æŒ‰ä¸‹=0</text>
                    </svg>
                </div>

                <div class="code-block">
                    <div class="code-header">
                        <span class="code-lang">C51 - æŒ‰é”®æ£€æµ‹</span>
                        <button class="copy-btn" onclick="copyCode(this)">å¤åˆ¶</button>
                    </div>
                    <pre><code>#include &lt;reg52.h&gt;

sbit KEY = P3^2;   // æŒ‰é”®æ¥ P3.2
sbit LED = P1^0;   // LED æ¥ P1.0

void main() {
    KEY = 1;  // è®¾ç½®ä¸ºè¾“å…¥ï¼ˆå†™1ä½¿èƒ½å†…éƒ¨ä¸Šæ‹‰ï¼‰

    while(1) {
        if(KEY == 0) {    // æŒ‰é”®æŒ‰ä¸‹ï¼ˆä½ç”µå¹³ï¼‰
            LED = 0;      // ç‚¹äº® LED
        } else {          // æŒ‰é”®æ¾å¼€ï¼ˆé«˜ç”µå¹³ï¼‰
            LED = 1;      // ç†„ç­ LED
        }
    }
}</code></pre>
                </div>

                <div class="info-card tip">
                    <div class="info-card-title"><span class="icon">ğŸ’¡</span> 51å•ç‰‡æœº I/O ç‰¹ç‚¹</div>
                    <p>51å•ç‰‡æœº P1-P3 å£å†…éƒ¨æœ‰<strong>å¼±ä¸Šæ‹‰ç”µé˜»</strong>ï¼ˆçº¦ 40kÎ©ï¼‰ï¼Œè¯»å–å‰éœ€å…ˆå†™ 1ã€‚å¤–éƒ¨æŒ‰é”®å¯ä¸åŠ ä¸Šæ‹‰ç”µé˜»ï¼Œä½†åŠ ä¸Šä¼šæ›´ç¨³å®šã€‚</p>
                </div>
            </div>

            <!-- å®éªŒ3 -->
            <div class="subsection" id="exp3">
                <h3 class="subsection-title">å®éªŒ 3ï¼šç”¨ç¤ºæ³¢å™¨/é€»è¾‘åˆ†æä»ªçœ‹æ—¶åº</h3>

                <div class="info-card info">
                    <div class="info-card-title"><span class="icon">ğŸ’»</span> å¦‚æœæ²¡æœ‰ç¡¬ä»¶</div>
                    <p>ä½¿ç”¨ä»¿çœŸè½¯ä»¶ï¼š<strong>Proteus</strong> æˆ– <strong>Keil è°ƒè¯•æ¨¡å¼</strong>ï¼ˆå¯è§‚å¯Ÿè™šæ‹Ÿç¤ºæ³¢å™¨ï¼‰</p>
                </div>

                <div class="code-block">
                    <div class="code-header">
                        <span class="code-lang">C51 - ä¸²å£å‘é€æ–¹æ³¢</span>
                        <button class="copy-btn" onclick="copyCode(this)">å¤åˆ¶</button>
                    </div>
                    <pre><code>#include &lt;reg52.h&gt;

void uart_init() {
    SCON = 0x50;   // 8ä½æ•°æ®ï¼Œå¯å˜æ³¢ç‰¹ç‡
    TMOD |= 0x20;  // å®šæ—¶å™¨1ï¼Œæ¨¡å¼2ï¼ˆè‡ªåŠ¨é‡è£…ï¼‰
    TH1 = 0xFD;    // æ³¢ç‰¹ç‡ 9600ï¼ˆ11.0592MHz æ™¶æŒ¯ï¼‰
    TL1 = 0xFD;
    TR1 = 1;       // å¯åŠ¨å®šæ—¶å™¨1
}

void uart_send(unsigned char dat) {
    SBUF = dat;
    while(!TI);    // ç­‰å¾…å‘é€å®Œæˆ
    TI = 0;        // æ¸…é™¤å‘é€æ ‡å¿—
}

void main() {
    uart_init();
    while(1) {
        uart_send(0x55);  // å‘é€ 0b01010101ï¼ˆæ–¹æ³¢ï¼‰
        // å¯ç”¨ç¤ºæ³¢å™¨è§‚å¯Ÿ TXD (P3.1) å¼•è„šæ³¢å½¢
    }
}</code></pre>
                </div>

                <h4 style="margin: 1rem 0 0.5rem; color: var(--primary);">é€»è¾‘åˆ†æä»ªæŠ“å–ç»“æœ</h4>
                <!-- ç¾åŒ–çš„é€»è¾‘åˆ†æä»ªæ³¢å½¢å›¾ -->
                <div class="svg-diagram">
                    <div class="diagram-title">TXD (P3.1) å‘é€ 0x55 æ³¢å½¢ - å®Œç¾æ–¹æ³¢</div>
                    <svg width="550" height="140" viewBox="0 0 550 140">
                        <rect width="550" height="140" fill="#0f172a" rx="8"/>

                        <!-- ä¿¡å·æ ‡ç­¾ -->
                        <text x="30" y="70" fill="#94a3b8" font-size="11" text-anchor="middle" font-weight="bold">TXD</text>

                        <!-- æ³¢å½¢ -->
                        <path d="M 50 45 L 70 45 L 70 95 L 100 95 L 100 45 L 130 45 L 130 95 L 160 95 L 160 45 L 190 45 L 190 95 L 220 95 L 220 45 L 250 45 L 250 95 L 280 95 L 280 45 L 310 45 L 310 95 L 340 95 L 340 45 L 370 45 L 370 45 L 520 45"
                              fill="none" stroke="#22c55e" stroke-width="3" stroke-linecap="square"/>

                        <!-- ä½æ ‡ç­¾ -->
                        <g fill="#94a3b8" font-size="9" text-anchor="middle">
                            <text x="60" y="115">ç©ºé—²</text>
                            <text x="85" y="115" fill="#ef4444">èµ·å§‹</text>
                            <text x="115" y="115">1</text>
                            <text x="145" y="115">0</text>
                            <text x="175" y="115">1</text>
                            <text x="205" y="115">0</text>
                            <text x="235" y="115">1</text>
                            <text x="265" y="115">0</text>
                            <text x="295" y="115">1</text>
                            <text x="325" y="115">0</text>
                            <text x="355" y="115" fill="#22c55e">åœæ­¢</text>
                            <text x="400" y="115">ç©ºé—²</text>
                        </g>

                        <!-- æ•°æ®è¯´æ˜ -->
                        <text x="450" y="70" fill="#67e8f9" font-size="10" text-anchor="middle">0x55 = 01010101</text>
                        <text x="450" y="85" fill="#94a3b8" font-size="9" text-anchor="middle">å®Œç¾äº¤æ›¿æ–¹æ³¢</text>

                        <!-- ç”µå¹³æ ‡æ³¨ -->
                        <text x="530" y="50" fill="#22c55e" font-size="9">HIGH</text>
                        <text x="530" y="100" fill="#3b82f6" font-size="9">LOW</text>
                    </svg>
                </div>
            </div>
        </section>

        <!-- ç¬¬ä¸‰å‘¨ -->
        <section class="section" id="week3">
            <header class="section-header">
                <span class="section-icon">ğŸ“š</span>
                <h2 class="section-title">ç¬¬ä¸‰å‘¨ï¼šèŠ¯ç‰‡æ‰‹å†Œé˜…è¯»è®­ç»ƒ</h2>
            </header>

            <div class="info-card info">
                <div class="info-card-title"><span class="icon">ğŸ“š</span> ä¸ºä»€ä¹ˆè¦å­¦ä¼šçœ‹æ‰‹å†Œï¼Ÿ</div>
                <p>èŠ¯ç‰‡æ‰‹å†Œæ˜¯æœ€æƒå¨çš„èµ„æ–™ï¼Œä»»ä½•æ•™ç¨‹éƒ½æ˜¯ä»æ‰‹å†Œä¸­æå–çš„ã€‚å­¦ä¼šçœ‹æ‰‹å†Œ = æ‹¥æœ‰"ç¬¬ä¸€æ‰‹ä¿¡æ¯"èƒ½åŠ›ã€‚</p>
            </div>

            <div class="subsection" id="week3-struct">
                <h3 class="subsection-title">3.1 èŠ¯ç‰‡æ‰‹å†Œç»“æ„æ¦‚è§ˆ</h3>

                <p>STC89C52 æ•°æ®æ‰‹å†Œé€šå¸¸åŒ…å«ä»¥ä¸‹ç« èŠ‚ï¼ˆå¿«é€Ÿå®šä½ä½ éœ€è¦çš„å†…å®¹ï¼‰ï¼š</p>

                <div class="table-wrapper">
                    <table>
                        <tr>
                            <th>ç« èŠ‚</th>
                            <th>å†…å®¹</th>
                            <th>ä»€ä¹ˆæ—¶å€™çœ‹</th>
                        </tr>
                        <tr><td>äº§å“æ¦‚è¿°</td><td>åŠŸèƒ½ç‰¹æ€§ã€å‹å·å¯¹æ¯”</td><td>é€‰å‹æ—¶</td></tr>
                        <tr><td>å¼•è„šå®šä¹‰</td><td>å¼•è„šåŠŸèƒ½ã€å°è£…å›¾</td><td>ç”»åŸç†å›¾æ—¶</td></tr>
                        <tr><td>ç”µæ°”ç‰¹æ€§</td><td>ç”µå‹ã€ç”µæµã€æ—¶åºå‚æ•°</td><td>ç¡¬ä»¶è®¾è®¡æ—¶</td></tr>
                        <tr><td>å­˜å‚¨å™¨ç»“æ„</td><td>RAMã€ROMã€SFR åœ°å€</td><td>ç¼–ç¨‹æ—¶</td></tr>
                        <tr><td>I/O ç«¯å£</td><td>ç«¯å£ç»“æ„ã€é©±åŠ¨èƒ½åŠ›</td><td>æ¥å¤–è®¾æ—¶</td></tr>
                        <tr><td>å®šæ—¶å™¨/è®¡æ•°å™¨</td><td>å·¥ä½œæ¨¡å¼ã€å¯„å­˜å™¨</td><td>å®šæ—¶ã€PWM æ—¶</td></tr>
                        <tr><td>ä¸²è¡Œå£</td><td>UART é…ç½®ã€æ³¢ç‰¹ç‡</td><td>é€šä¿¡æ—¶</td></tr>
                        <tr><td>ä¸­æ–­ç³»ç»Ÿ</td><td>ä¸­æ–­æºã€ä¼˜å…ˆçº§</td><td>å†™ä¸­æ–­ç¨‹åºæ—¶</td></tr>
                    </table>
                </div>
            </div>

            <div class="subsection" id="week3-pinout">
                <h3 class="subsection-title">3.2 å¼•è„šå®šä¹‰ä¸å°è£…å›¾ï¼ˆDIP-40ï¼‰</h3>

                <!-- ç¾åŒ–çš„DIP-40èŠ¯ç‰‡å°è£…å›¾ -->
                <div class="svg-diagram">
                    <div class="diagram-title">STC89C52 DIP-40 å°è£…å¼•è„šå›¾</div>
                    <svg width="600" height="480" viewBox="0 0 600 480">
                        <defs>
                            <linearGradient id="chipGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" style="stop-color:#334155"/>
                                <stop offset="100%" style="stop-color:#1e293b"/>
                            </linearGradient>
                            <filter id="chipShadow">
                                <feDropShadow dx="3" dy="3" stdDeviation="4" flood-opacity="0.4"/>
                            </filter>
                        </defs>
                        <rect width="600" height="480" fill="#0f172a" rx="8"/>

                        <!-- èŠ¯ç‰‡ä¸»ä½“ -->
                        <rect x="180" y="30" width="240" height="420" rx="8" fill="url(#chipGrad)" stroke="#475569" stroke-width="2" filter="url(#chipShadow)"/>

                        <!-- èŠ¯ç‰‡ç¼ºå£ -->
                        <circle cx="300" cy="50" r="12" fill="#0f172a" stroke="#475569"/>

                        <!-- èŠ¯ç‰‡æ ‡ç­¾ -->
                        <text x="300" y="235" fill="#94a3b8" font-size="14" text-anchor="middle" font-weight="bold">STC89C52</text>
                        <text x="300" y="255" fill="#64748b" font-size="10" text-anchor="middle">DIP-40</text>

                        <!-- å·¦ä¾§å¼•è„š (1-20) -->
                        <g font-size="9">
                            <!-- P1ç«¯å£ - è“è‰² -->
                            <g fill="#3b82f6">
                                <rect x="155" y="65" width="25" height="14" rx="2"/><text x="100" y="75" fill="#93c5fd" text-anchor="end">P1.0</text><text x="168" y="75" fill="white" font-size="8">1</text>
                                <rect x="155" y="85" width="25" height="14" rx="2"/><text x="100" y="95" fill="#93c5fd" text-anchor="end">P1.1</text><text x="168" y="95" fill="white" font-size="8">2</text>
                                <rect x="155" y="105" width="25" height="14" rx="2"/><text x="100" y="115" fill="#93c5fd" text-anchor="end">P1.2</text><text x="168" y="115" fill="white" font-size="8">3</text>
                                <rect x="155" y="125" width="25" height="14" rx="2"/><text x="100" y="135" fill="#93c5fd" text-anchor="end">P1.3</text><text x="168" y="135" fill="white" font-size="8">4</text>
                                <rect x="155" y="145" width="25" height="14" rx="2"/><text x="100" y="155" fill="#93c5fd" text-anchor="end">P1.4</text><text x="168" y="155" fill="white" font-size="8">5</text>
                                <rect x="155" y="165" width="25" height="14" rx="2"/><text x="100" y="175" fill="#93c5fd" text-anchor="end">P1.5</text><text x="168" y="175" fill="white" font-size="8">6</text>
                                <rect x="155" y="185" width="25" height="14" rx="2"/><text x="100" y="195" fill="#93c5fd" text-anchor="end">P1.6</text><text x="168" y="195" fill="white" font-size="8">7</text>
                                <rect x="155" y="205" width="25" height="14" rx="2"/><text x="100" y="215" fill="#93c5fd" text-anchor="end">P1.7</text><text x="168" y="215" fill="white" font-size="8">8</text>
                            </g>
                            <!-- RST - çº¢è‰² -->
                            <g fill="#ef4444">
                                <rect x="155" y="225" width="25" height="14" rx="2"/><text x="100" y="235" fill="#fca5a5" text-anchor="end">RST</text><text x="168" y="235" fill="white" font-size="8">9</text>
                            </g>
                            <!-- P3ç«¯å£ - ç»¿è‰² -->
                            <g fill="#22c55e">
                                <rect x="155" y="245" width="25" height="14" rx="2"/><text x="100" y="255" fill="#86efac" text-anchor="end">P3.0 (RXD)</text><text x="165" y="255" fill="white" font-size="7">10</text>
                                <rect x="155" y="265" width="25" height="14" rx="2"/><text x="100" y="275" fill="#86efac" text-anchor="end">P3.1 (TXD)</text><text x="165" y="275" fill="white" font-size="7">11</text>
                                <rect x="155" y="285" width="25" height="14" rx="2"/><text x="100" y="295" fill="#86efac" text-anchor="end">P3.2 (INT0)</text><text x="165" y="295" fill="white" font-size="7">12</text>
                                <rect x="155" y="305" width="25" height="14" rx="2"/><text x="100" y="315" fill="#86efac" text-anchor="end">P3.3 (INT1)</text><text x="165" y="315" fill="white" font-size="7">13</text>
                                <rect x="155" y="325" width="25" height="14" rx="2"/><text x="100" y="335" fill="#86efac" text-anchor="end">P3.4 (T0)</text><text x="165" y="335" fill="white" font-size="7">14</text>
                                <rect x="155" y="345" width="25" height="14" rx="2"/><text x="100" y="355" fill="#86efac" text-anchor="end">P3.5 (T1)</text><text x="165" y="355" fill="white" font-size="7">15</text>
                                <rect x="155" y="365" width="25" height="14" rx="2"/><text x="100" y="375" fill="#86efac" text-anchor="end">P3.6 (WR)</text><text x="165" y="375" fill="white" font-size="7">16</text>
                                <rect x="155" y="385" width="25" height="14" rx="2"/><text x="100" y="395" fill="#86efac" text-anchor="end">P3.7 (RD)</text><text x="165" y="395" fill="white" font-size="7">17</text>
                            </g>
                            <!-- æ™¶æŒ¯ - ç´«è‰² -->
                            <g fill="#8b5cf6">
                                <rect x="155" y="405" width="25" height="14" rx="2"/><text x="100" y="415" fill="#c4b5fd" text-anchor="end">XTAL2</text><text x="165" y="415" fill="white" font-size="7">18</text>
                                <rect x="155" y="425" width="25" height="14" rx="2"/><text x="100" y="435" fill="#c4b5fd" text-anchor="end">XTAL1</text><text x="165" y="435" fill="white" font-size="7">19</text>
                            </g>
                            <!-- GND -->
                            <g fill="#475569">
                                <rect x="155" y="445" width="25" height="14" rx="2"/><text x="100" y="455" fill="#94a3b8" text-anchor="end">GND</text><text x="165" y="455" fill="white" font-size="7">20</text>
                            </g>
                        </g>

                        <!-- å³ä¾§å¼•è„š (21-40) -->
                        <g font-size="9">
                            <!-- P2ç«¯å£ - é»„è‰² -->
                            <g fill="#f59e0b">
                                <rect x="420" y="445" width="25" height="14" rx="2"/><text x="500" y="455" fill="#fcd34d">P2.0 (A8)</text><text x="432" y="455" fill="white" font-size="7">21</text>
                                <rect x="420" y="425" width="25" height="14" rx="2"/><text x="500" y="435" fill="#fcd34d">P2.1 (A9)</text><text x="432" y="435" fill="white" font-size="7">22</text>
                                <rect x="420" y="405" width="25" height="14" rx="2"/><text x="500" y="415" fill="#fcd34d">P2.2 (A10)</text><text x="432" y="415" fill="white" font-size="7">23</text>
                                <rect x="420" y="385" width="25" height="14" rx="2"/><text x="500" y="395" fill="#fcd34d">P2.3 (A11)</text><text x="432" y="395" fill="white" font-size="7">24</text>
                                <rect x="420" y="365" width="25" height="14" rx="2"/><text x="500" y="375" fill="#fcd34d">P2.4 (A12)</text><text x="432" y="375" fill="white" font-size="7">25</text>
                                <rect x="420" y="345" width="25" height="14" rx="2"/><text x="500" y="355" fill="#fcd34d">P2.5 (A13)</text><text x="432" y="355" fill="white" font-size="7">26</text>
                                <rect x="420" y="325" width="25" height="14" rx="2"/><text x="500" y="335" fill="#fcd34d">P2.6 (A14)</text><text x="432" y="335" fill="white" font-size="7">27</text>
                                <rect x="420" y="305" width="25" height="14" rx="2"/><text x="500" y="315" fill="#fcd34d">P2.7 (A15)</text><text x="432" y="315" fill="white" font-size="7">28</text>
                            </g>
                            <!-- æ§åˆ¶ä¿¡å· - é’è‰² -->
                            <g fill="#06b6d4">
                                <rect x="420" y="285" width="25" height="14" rx="2"/><text x="500" y="295" fill="#67e8f9">PSEN</text><text x="432" y="295" fill="white" font-size="7">29</text>
                                <rect x="420" y="265" width="25" height="14" rx="2"/><text x="500" y="275" fill="#67e8f9">ALE/PROG</text><text x="432" y="275" fill="white" font-size="7">30</text>
                                <rect x="420" y="245" width="25" height="14" rx="2"/><text x="500" y="255" fill="#67e8f9">EA/VPP</text><text x="432" y="255" fill="white" font-size="7">31</text>
                            </g>
                            <!-- P0ç«¯å£ - ç²‰è‰² -->
                            <g fill="#ec4899">
                                <rect x="420" y="225" width="25" height="14" rx="2"/><text x="500" y="235" fill="#f9a8d4">P0.7 (AD7)</text><text x="432" y="235" fill="white" font-size="7">32</text>
                                <rect x="420" y="205" width="25" height="14" rx="2"/><text x="500" y="215" fill="#f9a8d4">P0.6 (AD6)</text><text x="432" y="215" fill="white" font-size="7">33</text>
                                <rect x="420" y="185" width="25" height="14" rx="2"/><text x="500" y="195" fill="#f9a8d4">P0.5 (AD5)</text><text x="432" y="195" fill="white" font-size="7">34</text>
                                <rect x="420" y="165" width="25" height="14" rx="2"/><text x="500" y="175" fill="#f9a8d4">P0.4 (AD4)</text><text x="432" y="175" fill="white" font-size="7">35</text>
                                <rect x="420" y="145" width="25" height="14" rx="2"/><text x="500" y="155" fill="#f9a8d4">P0.3 (AD3)</text><text x="432" y="155" fill="white" font-size="7">36</text>
                                <rect x="420" y="125" width="25" height="14" rx="2"/><text x="500" y="135" fill="#f9a8d4">P0.2 (AD2)</text><text x="432" y="135" fill="white" font-size="7">37</text>
                                <rect x="420" y="105" width="25" height="14" rx="2"/><text x="500" y="115" fill="#f9a8d4">P0.1 (AD1)</text><text x="432" y="115" fill="white" font-size="7">38</text>
                                <rect x="420" y="85" width="25" height="14" rx="2"/><text x="500" y="95" fill="#f9a8d4">P0.0 (AD0)</text><text x="432" y="95" fill="white" font-size="7">39</text>
                            </g>
                            <!-- VCC - çº¢è‰² -->
                            <g fill="#ef4444">
                                <rect x="420" y="65" width="25" height="14" rx="2"/><text x="500" y="75" fill="#fca5a5">VCC (5V)</text><text x="432" y="75" fill="white" font-size="7">40</text>
                            </g>
                        </g>
                    </svg>
                    <div class="diagram-legend">
                        <span class="legend-item"><span class="legend-color" style="background: #3b82f6;"></span>P1 é€šç”¨IO</span>
                        <span class="legend-item"><span class="legend-color" style="background: #22c55e;"></span>P3 ç¬¬äºŒåŠŸèƒ½</span>
                        <span class="legend-item"><span class="legend-color" style="background: #f59e0b;"></span>P2 åœ°å€çº¿</span>
                        <span class="legend-item"><span class="legend-color" style="background: #ec4899;"></span>P0 æ•°æ®æ€»çº¿</span>
                    </div>
                </div>

                <div class="table-wrapper">
                    <table>
                        <tr>
                            <th>ç«¯å£</th>
                            <th>ç‰¹ç‚¹</th>
                            <th>å¸¸è§ç”¨é€”</th>
                        </tr>
                        <tr><td><strong>P0</strong></td><td>å¼€æ¼è¾“å‡ºï¼Œéœ€å¤–æ¥ä¸Šæ‹‰ç”µé˜»</td><td>æ•°æ®æ€»çº¿ã€LCD æ•°æ®å£</td></tr>
                        <tr><td><strong>P1</strong></td><td>å‡†åŒå‘å£ï¼Œå†…éƒ¨å¼±ä¸Šæ‹‰</td><td>é€šç”¨ I/Oã€æŒ‰é”®ã€LED</td></tr>
                        <tr><td><strong>P2</strong></td><td>å‡†åŒå‘å£ï¼Œå†…éƒ¨å¼±ä¸Šæ‹‰</td><td>é«˜ 8 ä½åœ°å€çº¿ã€é€šç”¨ I/O</td></tr>
                        <tr><td><strong>P3</strong></td><td>å‡†åŒå‘å£ï¼Œç¬¬äºŒåŠŸèƒ½ä¸°å¯Œ</td><td>ä¸²å£ã€ä¸­æ–­ã€å®šæ—¶å™¨</td></tr>
                    </table>
                </div>

                <div class="info-card warning">
                    <div class="info-card-title"><span class="icon">âš ï¸</span> P0 å£ç‰¹æ®Šæ³¨æ„</div>
                    <p>P0 å£æ˜¯<strong>å¼€æ¼è¾“å‡º</strong>ï¼Œä½œä¸ºé€šç”¨ I/O ä½¿ç”¨æ—¶å¿…é¡»å¤–æ¥ 10kÎ© ä¸Šæ‹‰ç”µé˜»ï¼Œå¦åˆ™æ— æ³•è¾“å‡ºé«˜ç”µå¹³ï¼</p>
                </div>
            </div>

            <div class="subsection" id="week3-sfr">
                <h3 class="subsection-title">3.3 ç‰¹æ®ŠåŠŸèƒ½å¯„å­˜å™¨ï¼ˆSFRï¼‰</h3>

                <p>51å•ç‰‡æœºé€šè¿‡é…ç½® <strong>SFRï¼ˆSpecial Function Registerï¼‰</strong> æ¥æ§åˆ¶å„ç§å¤–è®¾ã€‚ä»¥ä¸‹æ˜¯æœ€å¸¸ç”¨çš„å¯„å­˜å™¨ï¼š</p>

                <h4 style="margin: 1rem 0 0.5rem; color: var(--primary);">I/O ç«¯å£å¯„å­˜å™¨</h4>
                <div class="table-wrapper">
                    <table>
                        <tr>
                            <th>å¯„å­˜å™¨</th>
                            <th>åœ°å€</th>
                            <th>åŠŸèƒ½</th>
                            <th>å¤ä½å€¼</th>
                        </tr>
                        <tr><td>P0</td><td>0x80</td><td>P0 å£æ•°æ®å¯„å­˜å™¨</td><td>0xFF</td></tr>
                        <tr><td>P1</td><td>0x90</td><td>P1 å£æ•°æ®å¯„å­˜å™¨</td><td>0xFF</td></tr>
                        <tr><td>P2</td><td>0xA0</td><td>P2 å£æ•°æ®å¯„å­˜å™¨</td><td>0xFF</td></tr>
                        <tr><td>P3</td><td>0xB0</td><td>P3 å£æ•°æ®å¯„å­˜å™¨</td><td>0xFF</td></tr>
                    </table>
                </div>

                <div class="code-block">
                    <div class="code-header">
                        <span class="code-lang">C51 - å¯„å­˜å™¨æ“ä½œç¤ºä¾‹</span>
                        <button class="copy-btn" onclick="copyCode(this)">å¤åˆ¶</button>
                    </div>
                    <pre><code>// æ–¹å¼1ï¼šæ•´ä½“æ“ä½œ
P1 = 0x00;        // P1 å£å…¨éƒ¨è¾“å‡ºä½ç”µå¹³
P1 = 0xFF;        // P1 å£å…¨éƒ¨è¾“å‡ºé«˜ç”µå¹³
P1 = 0x0F;        // P1.0-P1.3 é«˜ï¼ŒP1.4-P1.7 ä½

// æ–¹å¼2ï¼šä½æ“ä½œï¼ˆéœ€è¦ sbit å®šä¹‰ï¼‰
sbit LED = P1^0;  // å®šä¹‰ P1.0
LED = 0;          // P1.0 è¾“å‡ºä½ç”µå¹³
LED = 1;          // P1.0 è¾“å‡ºé«˜ç”µå¹³

// æ–¹å¼3ï¼šä½è¿ç®—
P1 |= 0x01;       // P1.0 ç½® 1ï¼Œå…¶ä»–ä½ä¸å˜
P1 &= ~0x01;      // P1.0 ç½® 0ï¼Œå…¶ä»–ä½ä¸å˜
P1 ^= 0x01;       // P1.0 å–åï¼Œå…¶ä»–ä½ä¸å˜</code></pre>
                </div>
            </div>

            <div class="subsection" id="week3-uart">
                <h3 class="subsection-title">3.4 ä¸²å£å¯„å­˜å™¨è¯¦è§£ï¼ˆé‡ç‚¹ï¼‰</h3>

                <h4 style="margin: 1rem 0 0.5rem; color: var(--primary);">SCON - ä¸²å£æ§åˆ¶å¯„å­˜å™¨ï¼ˆåœ°å€ 0x98ï¼‰</h4>
                <div class="svg-diagram">
                    <svg viewBox="0 0 700 360" style="width: 100%; max-width: 700px;">
                        <defs>
                            <linearGradient id="sconGrad" x1="0%" y1="0%" x2="100%" y2="0%">
                                <stop offset="0%" style="stop-color:#8b5cf6;stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#6366f1;stop-opacity:1" />
                            </linearGradient>
                            <linearGradient id="bitGradScon" x1="0%" y1="0%" x2="0%" y2="100%">
                                <stop offset="0%" style="stop-color:#1e293b;stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#0f172a;stop-opacity:1" />
                            </linearGradient>
                        </defs>

                        <!-- æ ‡é¢˜ -->
                        <text x="350" y="25" fill="#e2e8f0" font-size="16" text-anchor="middle" font-weight="bold">SCON ä¸²å£æ§åˆ¶å¯„å­˜å™¨ç»“æ„</text>

                        <!-- ä½å·æ ‡ç­¾ -->
                        <text x="100" y="55" fill="#94a3b8" font-size="11" text-anchor="middle">Bit 7</text>
                        <text x="170" y="55" fill="#94a3b8" font-size="11" text-anchor="middle">Bit 6</text>
                        <text x="240" y="55" fill="#94a3b8" font-size="11" text-anchor="middle">Bit 5</text>
                        <text x="310" y="55" fill="#94a3b8" font-size="11" text-anchor="middle">Bit 4</text>
                        <text x="380" y="55" fill="#94a3b8" font-size="11" text-anchor="middle">Bit 3</text>
                        <text x="450" y="55" fill="#94a3b8" font-size="11" text-anchor="middle">Bit 2</text>
                        <text x="520" y="55" fill="#94a3b8" font-size="11" text-anchor="middle">Bit 1</text>
                        <text x="590" y="55" fill="#94a3b8" font-size="11" text-anchor="middle">Bit 0</text>

                        <!-- å¯„å­˜å™¨åç§° -->
                        <text x="40" y="88" fill="url(#sconGrad)" font-size="14" font-weight="bold">SCON</text>

                        <!-- ä½æ¡† -->
                        <rect x="65" y="65" width="60" height="38" fill="url(#bitGradScon)" stroke="#8b5cf6" stroke-width="2" rx="4"/>
                        <text x="95" y="88" fill="#c4b5fd" font-size="12" text-anchor="middle" font-weight="bold">SM0</text>

                        <rect x="130" y="65" width="60" height="38" fill="url(#bitGradScon)" stroke="#8b5cf6" stroke-width="2" rx="4"/>
                        <text x="160" y="88" fill="#c4b5fd" font-size="12" text-anchor="middle" font-weight="bold">SM1</text>

                        <rect x="195" y="65" width="60" height="38" fill="url(#bitGradScon)" stroke="#7c3aed" stroke-width="2" rx="4"/>
                        <text x="225" y="88" fill="#a78bfa" font-size="12" text-anchor="middle" font-weight="bold">SM2</text>

                        <rect x="260" y="65" width="60" height="38" fill="url(#bitGradScon)" stroke="#22c55e" stroke-width="2" rx="4"/>
                        <text x="290" y="88" fill="#86efac" font-size="12" text-anchor="middle" font-weight="bold">REN</text>

                        <rect x="325" y="65" width="60" height="38" fill="url(#bitGradScon)" stroke="#64748b" stroke-width="2" rx="4"/>
                        <text x="355" y="88" fill="#94a3b8" font-size="12" text-anchor="middle" font-weight="bold">TB8</text>

                        <rect x="390" y="65" width="60" height="38" fill="url(#bitGradScon)" stroke="#64748b" stroke-width="2" rx="4"/>
                        <text x="420" y="88" fill="#94a3b8" font-size="12" text-anchor="middle" font-weight="bold">RB8</text>

                        <rect x="455" y="65" width="60" height="38" fill="url(#bitGradScon)" stroke="#f59e0b" stroke-width="2" rx="4"/>
                        <text x="485" y="88" fill="#fcd34d" font-size="12" text-anchor="middle" font-weight="bold">TI</text>

                        <rect x="520" y="65" width="60" height="38" fill="url(#bitGradScon)" stroke="#f59e0b" stroke-width="2" rx="4"/>
                        <text x="550" y="88" fill="#fcd34d" font-size="12" text-anchor="middle" font-weight="bold">RI</text>

                        <!-- å·¥ä½œæ¨¡å¼è¡¨æ ¼ -->
                        <text x="100" y="130" fill="#c4b5fd" font-size="12" font-weight="bold">SM0/SM1 å·¥ä½œæ¨¡å¼é€‰æ‹©ï¼š</text>

                        <!-- è¡¨æ ¼èƒŒæ™¯ -->
                        <rect x="65" y="140" width="520" height="120" fill="#0f172a" stroke="#334155" stroke-width="1" rx="6"/>

                        <!-- è¡¨å¤´ -->
                        <rect x="65" y="140" width="520" height="25" fill="#1e293b" rx="6"/>
                        <text x="105" y="158" fill="#e2e8f0" font-size="11" text-anchor="middle" font-weight="bold">SM0</text>
                        <text x="160" y="158" fill="#e2e8f0" font-size="11" text-anchor="middle" font-weight="bold">SM1</text>
                        <text x="390" y="158" fill="#e2e8f0" font-size="11" text-anchor="middle" font-weight="bold">æ¨¡å¼è¯´æ˜</text>

                        <!-- è¡¨æ ¼è¡Œ -->
                        <line x1="65" y1="165" x2="585" y2="165" stroke="#334155" stroke-width="1"/>
                        <text x="105" y="183" fill="#94a3b8" font-size="11" text-anchor="middle">0</text>
                        <text x="160" y="183" fill="#94a3b8" font-size="11" text-anchor="middle">0</text>
                        <text x="390" y="183" fill="#94a3b8" font-size="11" text-anchor="middle">æ¨¡å¼0ï¼šåŒæ­¥ç§»ä½å¯„å­˜å™¨ï¼ˆæ‰©å±•I/Oï¼‰</text>

                        <line x1="65" y1="193" x2="585" y2="193" stroke="#334155" stroke-width="1"/>
                        <text x="105" y="211" fill="#22c55e" font-size="11" text-anchor="middle" font-weight="bold">0</text>
                        <text x="160" y="211" fill="#22c55e" font-size="11" text-anchor="middle" font-weight="bold">1</text>
                        <text x="390" y="211" fill="#22c55e" font-size="11" text-anchor="middle" font-weight="bold">æ¨¡å¼1ï¼š8ä½UARTï¼Œæ³¢ç‰¹ç‡å¯å˜ â˜…å¸¸ç”¨</text>

                        <line x1="65" y1="221" x2="585" y2="221" stroke="#334155" stroke-width="1"/>
                        <text x="105" y="239" fill="#94a3b8" font-size="11" text-anchor="middle">1</text>
                        <text x="160" y="239" fill="#94a3b8" font-size="11" text-anchor="middle">0</text>
                        <text x="390" y="239" fill="#94a3b8" font-size="11" text-anchor="middle">æ¨¡å¼2ï¼š9ä½UARTï¼Œæ³¢ç‰¹ç‡å›ºå®š</text>

                        <line x1="65" y1="249" x2="585" y2="249" stroke="#334155" stroke-width="1"/>
                        <text x="105" y="267" fill="#94a3b8" font-size="11" text-anchor="middle">1</text>
                        <text x="160" y="267" fill="#94a3b8" font-size="11" text-anchor="middle">1</text>
                        <text x="390" y="267" fill="#94a3b8" font-size="11" text-anchor="middle">æ¨¡å¼3ï¼š9ä½UARTï¼Œæ³¢ç‰¹ç‡å¯å˜</text>

                        <!-- ä½è¯´æ˜ -->
                        <rect x="65" y="280" width="16" height="14" fill="#22c55e" rx="3"/>
                        <text x="90" y="292" fill="#86efac" font-size="10">RENï¼šæ¥æ”¶ä½¿èƒ½ï¼ˆ1=å…è®¸æ¥æ”¶ï¼‰</text>

                        <rect x="280" y="280" width="16" height="14" fill="#f59e0b" rx="3"/>
                        <text x="305" y="292" fill="#fcd34d" font-size="10">TIï¼šå‘é€ä¸­æ–­æ ‡å¿—ï¼ˆéœ€è½¯ä»¶æ¸…0ï¼‰</text>

                        <rect x="65" y="302" width="16" height="14" fill="#f59e0b" rx="3"/>
                        <text x="90" y="314" fill="#fcd34d" font-size="10">RIï¼šæ¥æ”¶ä¸­æ–­æ ‡å¿—ï¼ˆéœ€è½¯ä»¶æ¸…0ï¼‰</text>
                    </svg>
                </div>

                <h4 style="margin: 1rem 0 0.5rem; color: var(--primary);">æ³¢ç‰¹ç‡è®¡ç®—ï¼ˆæ¨¡å¼1ï¼Œå®šæ—¶å™¨1ï¼‰</h4>
                <div class="svg-diagram">
                    <svg viewBox="0 0 650 320" style="width: 100%; max-width: 650px;">
                        <defs>
                            <linearGradient id="formulaGrad" x1="0%" y1="0%" x2="100%" y2="0%">
                                <stop offset="0%" style="stop-color:#3b82f6;stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#6366f1;stop-opacity:1" />
                            </linearGradient>
                        </defs>

                        <!-- æ ‡é¢˜ -->
                        <text x="325" y="25" fill="#e2e8f0" font-size="15" text-anchor="middle" font-weight="bold">æ³¢ç‰¹ç‡è®¡ç®—å…¬å¼ä¸é…ç½®</text>

                        <!-- å…¬å¼æ¡† -->
                        <rect x="50" y="40" width="550" height="45" fill="#1e3a5f" stroke="#3b82f6" stroke-width="2" rx="8"/>
                        <text x="325" y="68" fill="#93c5fd" font-size="13" text-anchor="middle" font-family="monospace" font-weight="bold">æ³¢ç‰¹ç‡ = (2^SMOD / 32) Ã— (æ™¶æŒ¯é¢‘ç‡ / 12) / (256 - TH1)</text>

                        <!-- é…ç½®è¡¨æ ‡é¢˜ -->
                        <text x="100" y="110" fill="#a5b4fc" font-size="12" font-weight="bold">å¸¸ç”¨æ³¢ç‰¹ç‡é…ç½®ï¼ˆ11.0592MHz æ™¶æŒ¯ï¼ŒSMOD=0ï¼‰ï¼š</text>

                        <!-- è¡¨æ ¼èƒŒæ™¯ -->
                        <rect x="50" y="120" width="400" height="135" fill="#0f172a" stroke="#334155" stroke-width="1" rx="6"/>

                        <!-- è¡¨å¤´ -->
                        <rect x="50" y="120" width="400" height="28" fill="#1e293b" rx="6"/>
                        <text x="120" y="140" fill="#e2e8f0" font-size="12" text-anchor="middle" font-weight="bold">æ³¢ç‰¹ç‡</text>
                        <text x="220" y="140" fill="#e2e8f0" font-size="12" text-anchor="middle" font-weight="bold">TH1</text>
                        <text x="350" y="140" fill="#e2e8f0" font-size="12" text-anchor="middle" font-weight="bold">è¯´æ˜</text>

                        <!-- è¡Œ1: 9600 (é«˜äº®) -->
                        <rect x="50" y="148" width="400" height="26" fill="#22c55e" fill-opacity="0.1"/>
                        <text x="120" y="166" fill="#22c55e" font-size="12" text-anchor="middle" font-weight="bold">9600</text>
                        <text x="220" y="166" fill="#86efac" font-size="12" text-anchor="middle" font-family="monospace">0xFD</text>
                        <text x="350" y="166" fill="#22c55e" font-size="12" text-anchor="middle">â˜… æœ€å¸¸ç”¨</text>

                        <!-- è¡Œ2: 4800 -->
                        <line x1="50" y1="174" x2="450" y2="174" stroke="#334155" stroke-width="1"/>
                        <text x="120" y="192" fill="#94a3b8" font-size="12" text-anchor="middle">4800</text>
                        <text x="220" y="192" fill="#cbd5e1" font-size="12" text-anchor="middle" font-family="monospace">0xFA</text>
                        <text x="350" y="192" fill="#64748b" font-size="12" text-anchor="middle">-</text>

                        <!-- è¡Œ3: 2400 -->
                        <line x1="50" y1="200" x2="450" y2="200" stroke="#334155" stroke-width="1"/>
                        <text x="120" y="218" fill="#94a3b8" font-size="12" text-anchor="middle">2400</text>
                        <text x="220" y="218" fill="#cbd5e1" font-size="12" text-anchor="middle" font-family="monospace">0xF4</text>
                        <text x="350" y="218" fill="#64748b" font-size="12" text-anchor="middle">-</text>

                        <!-- è¡Œ4: 19200 -->
                        <line x1="50" y1="226" x2="450" y2="226" stroke="#334155" stroke-width="1"/>
                        <text x="120" y="244" fill="#f59e0b" font-size="12" text-anchor="middle">19200</text>
                        <text x="220" y="244" fill="#fcd34d" font-size="12" text-anchor="middle" font-family="monospace">0xFD</text>
                        <text x="350" y="244" fill="#f59e0b" font-size="12" text-anchor="middle">éœ€è®¾ç½® SMOD=1</text>

                        <!-- æç¤ºå¡ç‰‡ -->
                        <rect x="50" y="270" width="550" height="40" fill="#422006" stroke="#f59e0b" stroke-width="1" rx="6"/>
                        <text x="75" y="285" fill="#fcd34d" font-size="16">ğŸ’¡</text>
                        <text x="100" y="285" fill="#fcd34d" font-size="11" font-weight="bold">ä¸ºä»€ä¹ˆç”¨ 11.0592MHz æ™¶æŒ¯ï¼Ÿ</text>
                        <text x="100" y="302" fill="#fde68a" font-size="11">å› ä¸ºå®ƒèƒ½äº§ç”Ÿç²¾ç¡®çš„æ ‡å‡†æ³¢ç‰¹ç‡ï¼Œ12MHz ä¼šæœ‰è¯¯å·®ï¼</text>
                    </svg>
                </div>

                <div class="code-block">
                    <div class="code-header">
                        <span class="code-lang">C51 - ä¸²å£åˆå§‹åŒ–ï¼ˆ9600bpsï¼‰</span>
                        <button class="copy-btn" onclick="copyCode(this)">å¤åˆ¶</button>
                    </div>
                    <pre><code>void uart_init() {
    SCON = 0x50;   // æ¨¡å¼1ï¼ˆSM0=0,SM1=1ï¼‰ï¼Œå…è®¸æ¥æ”¶ï¼ˆREN=1ï¼‰
    TMOD &= 0x0F;  // æ¸…é™¤å®šæ—¶å™¨1è®¾ç½®
    TMOD |= 0x20;  // å®šæ—¶å™¨1ï¼Œæ¨¡å¼2ï¼ˆ8ä½è‡ªåŠ¨é‡è£…ï¼‰
    TH1 = 0xFD;    // æ³¢ç‰¹ç‡ 9600ï¼ˆ11.0592MHzï¼‰
    TL1 = 0xFD;    // åˆå€¼
    TR1 = 1;       // å¯åŠ¨å®šæ—¶å™¨1
    ES = 1;        // ä½¿èƒ½ä¸²å£ä¸­æ–­ï¼ˆå¯é€‰ï¼‰
    EA = 1;        // ä½¿èƒ½æ€»ä¸­æ–­ï¼ˆå¯é€‰ï¼‰
}</code></pre>
                </div>
            </div>

            <div class="subsection" id="week3-timer">
                <h3 class="subsection-title">3.5 å®šæ—¶å™¨å¯„å­˜å™¨è¯¦è§£</h3>

                <h4 style="margin: 1rem 0 0.5rem; color: var(--primary);">TMOD - å®šæ—¶å™¨æ¨¡å¼å¯„å­˜å™¨ï¼ˆåœ°å€ 0x89ï¼‰</h4>
                <div class="svg-diagram">
                    <svg viewBox="0 0 700 340" style="width: 100%; max-width: 700px;">
                        <defs>
                            <linearGradient id="tmodGrad" x1="0%" y1="0%" x2="100%" y2="0%">
                                <stop offset="0%" style="stop-color:#14b8a6;stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#22c55e;stop-opacity:1" />
                            </linearGradient>
                            <linearGradient id="timer1Grad" x1="0%" y1="0%" x2="0%" y2="100%">
                                <stop offset="0%" style="stop-color:#1e3a5f;stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#0f172a;stop-opacity:1" />
                            </linearGradient>
                            <linearGradient id="timer0Grad" x1="0%" y1="0%" x2="0%" y2="100%">
                                <stop offset="0%" style="stop-color:#3f1f0f;stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#0f172a;stop-opacity:1" />
                            </linearGradient>
                        </defs>

                        <!-- æ ‡é¢˜ -->
                        <text x="350" y="25" fill="#e2e8f0" font-size="15" text-anchor="middle" font-weight="bold">TMOD å®šæ—¶å™¨æ¨¡å¼å¯„å­˜å™¨ç»“æ„</text>

                        <!-- ä½å·æ ‡ç­¾ -->
                        <text x="100" y="50" fill="#94a3b8" font-size="10" text-anchor="middle">Bit 7</text>
                        <text x="170" y="50" fill="#94a3b8" font-size="10" text-anchor="middle">Bit 6</text>
                        <text x="240" y="50" fill="#94a3b8" font-size="10" text-anchor="middle">Bit 5</text>
                        <text x="310" y="50" fill="#94a3b8" font-size="10" text-anchor="middle">Bit 4</text>
                        <text x="380" y="50" fill="#94a3b8" font-size="10" text-anchor="middle">Bit 3</text>
                        <text x="450" y="50" fill="#94a3b8" font-size="10" text-anchor="middle">Bit 2</text>
                        <text x="520" y="50" fill="#94a3b8" font-size="10" text-anchor="middle">Bit 1</text>
                        <text x="590" y="50" fill="#94a3b8" font-size="10" text-anchor="middle">Bit 0</text>

                        <!-- å¯„å­˜å™¨åç§° -->
                        <text x="40" y="80" fill="url(#tmodGrad)" font-size="13" font-weight="bold">TMOD</text>

                        <!-- å®šæ—¶å™¨1ä½ï¼ˆè“è‰²ä¸»é¢˜ï¼‰ -->
                        <rect x="65" y="58" width="60" height="36" fill="url(#timer1Grad)" stroke="#3b82f6" stroke-width="2" rx="4"/>
                        <text x="95" y="80" fill="#93c5fd" font-size="11" text-anchor="middle" font-weight="bold">GATE1</text>

                        <rect x="130" y="58" width="60" height="36" fill="url(#timer1Grad)" stroke="#3b82f6" stroke-width="2" rx="4"/>
                        <text x="160" y="80" fill="#93c5fd" font-size="11" text-anchor="middle" font-weight="bold">C/T1</text>

                        <rect x="195" y="58" width="60" height="36" fill="url(#timer1Grad)" stroke="#3b82f6" stroke-width="2" rx="4"/>
                        <text x="225" y="80" fill="#93c5fd" font-size="11" text-anchor="middle" font-weight="bold">M1</text>

                        <rect x="260" y="58" width="60" height="36" fill="url(#timer1Grad)" stroke="#3b82f6" stroke-width="2" rx="4"/>
                        <text x="290" y="80" fill="#93c5fd" font-size="11" text-anchor="middle" font-weight="bold">M0</text>

                        <!-- å®šæ—¶å™¨0ä½ï¼ˆæ©™è‰²ä¸»é¢˜ï¼‰ -->
                        <rect x="325" y="58" width="60" height="36" fill="url(#timer0Grad)" stroke="#f59e0b" stroke-width="2" rx="4"/>
                        <text x="355" y="80" fill="#fcd34d" font-size="11" text-anchor="middle" font-weight="bold">GATE0</text>

                        <rect x="390" y="58" width="60" height="36" fill="url(#timer0Grad)" stroke="#f59e0b" stroke-width="2" rx="4"/>
                        <text x="420" y="80" fill="#fcd34d" font-size="11" text-anchor="middle" font-weight="bold">C/T0</text>

                        <rect x="455" y="58" width="60" height="36" fill="url(#timer0Grad)" stroke="#f59e0b" stroke-width="2" rx="4"/>
                        <text x="485" y="80" fill="#fcd34d" font-size="11" text-anchor="middle" font-weight="bold">M1</text>

                        <rect x="520" y="58" width="60" height="36" fill="url(#timer0Grad)" stroke="#f59e0b" stroke-width="2" rx="4"/>
                        <text x="550" y="80" fill="#fcd34d" font-size="11" text-anchor="middle" font-weight="bold">M0</text>

                        <!-- åˆ†ç»„æ ‡ç­¾ -->
                        <line x1="95" y1="100" x2="260" y2="100" stroke="#3b82f6" stroke-width="2"/>
                        <text x="177" y="115" fill="#93c5fd" font-size="11" text-anchor="middle">â† å®šæ—¶å™¨1 â†’</text>

                        <line x1="355" y1="100" x2="520" y2="100" stroke="#f59e0b" stroke-width="2"/>
                        <text x="437" y="115" fill="#fcd34d" font-size="11" text-anchor="middle">â† å®šæ—¶å™¨0 â†’</text>

                        <!-- C/Tè¯´æ˜ -->
                        <text x="80" y="140" fill="#94a3b8" font-size="11">C/T: 0=å®šæ—¶å™¨æ¨¡å¼ï¼Œ1=è®¡æ•°å™¨æ¨¡å¼</text>

                        <!-- M1/M0æ¨¡å¼è¡¨ -->
                        <text x="80" y="160" fill="#a5b4fc" font-size="11" font-weight="bold">M1/M0 å·¥ä½œæ¨¡å¼é€‰æ‹©ï¼š</text>

                        <!-- è¡¨æ ¼ -->
                        <rect x="65" y="170" width="450" height="120" fill="#0f172a" stroke="#334155" stroke-width="1" rx="6"/>

                        <rect x="65" y="170" width="450" height="25" fill="#1e293b" rx="6"/>
                        <text x="105" y="187" fill="#e2e8f0" font-size="11" text-anchor="middle" font-weight="bold">M1</text>
                        <text x="160" y="187" fill="#e2e8f0" font-size="11" text-anchor="middle" font-weight="bold">M0</text>
                        <text x="350" y="187" fill="#e2e8f0" font-size="11" text-anchor="middle" font-weight="bold">æ¨¡å¼è¯´æ˜</text>

                        <line x1="65" y1="195" x2="515" y2="195" stroke="#334155" stroke-width="1"/>
                        <text x="105" y="213" fill="#94a3b8" font-size="11" text-anchor="middle">0</text>
                        <text x="160" y="213" fill="#94a3b8" font-size="11" text-anchor="middle">0</text>
                        <text x="350" y="213" fill="#94a3b8" font-size="11" text-anchor="middle">æ¨¡å¼0ï¼š13ä½å®šæ—¶å™¨</text>

                        <line x1="65" y1="221" x2="515" y2="221" stroke="#334155" stroke-width="1"/>
                        <text x="105" y="239" fill="#22c55e" font-size="11" text-anchor="middle" font-weight="bold">0</text>
                        <text x="160" y="239" fill="#22c55e" font-size="11" text-anchor="middle" font-weight="bold">1</text>
                        <text x="350" y="239" fill="#22c55e" font-size="11" text-anchor="middle" font-weight="bold">æ¨¡å¼1ï¼š16ä½å®šæ—¶å™¨ â˜…å¸¸ç”¨</text>

                        <line x1="65" y1="247" x2="515" y2="247" stroke="#334155" stroke-width="1"/>
                        <text x="105" y="265" fill="#f59e0b" font-size="11" text-anchor="middle" font-weight="bold">1</text>
                        <text x="160" y="265" fill="#f59e0b" font-size="11" text-anchor="middle" font-weight="bold">0</text>
                        <text x="350" y="265" fill="#f59e0b" font-size="11" text-anchor="middle" font-weight="bold">æ¨¡å¼2ï¼š8ä½è‡ªåŠ¨é‡è£… â˜…æ³¢ç‰¹ç‡</text>

                        <line x1="65" y1="273" x2="515" y2="273" stroke="#334155" stroke-width="1"/>
                        <text x="105" y="291" fill="#94a3b8" font-size="11" text-anchor="middle">1</text>
                        <text x="160" y="291" fill="#94a3b8" font-size="11" text-anchor="middle">1</text>
                        <text x="350" y="291" fill="#94a3b8" font-size="11" text-anchor="middle">æ¨¡å¼3ï¼šåŒ8ä½å®šæ—¶å™¨</text>
                    </svg>
                </div>

                <h4 style="margin: 1rem 0 0.5rem; color: var(--primary);">å®šæ—¶æ—¶é—´è®¡ç®—ï¼ˆæ¨¡å¼1ï¼Œ16ä½ï¼‰</h4>
                <div class="svg-diagram">
                    <svg viewBox="0 0 600 220" style="width: 100%; max-width: 600px;">
                        <!-- å…¬å¼æ¡† -->
                        <rect x="30" y="10" width="540" height="40" fill="#1e3a5f" stroke="#3b82f6" stroke-width="2" rx="8"/>
                        <text x="300" y="36" fill="#93c5fd" font-size="13" text-anchor="middle" font-family="monospace" font-weight="bold">å®šæ—¶æ—¶é—´ = (65536 - åˆå€¼) Ã— 12 / æ™¶æŒ¯é¢‘ç‡</text>

                        <!-- è®¡ç®—ç¤ºä¾‹ -->
                        <rect x="30" y="60" width="540" height="150" fill="#0f172a" stroke="#334155" stroke-width="1" rx="8"/>

                        <text x="50" y="85" fill="#22c55e" font-size="13" font-weight="bold">ğŸ“ ç¤ºä¾‹ï¼šæ™¶æŒ¯ 11.0592MHzï¼Œå®šæ—¶ 1ms</text>

                        <text x="60" y="110" fill="#94a3b8" font-size="12">åˆå€¼ = 65536 - (1ms Ã— 11.0592MHz / 12)</text>

                        <text x="60" y="132" fill="#94a3b8" font-size="12">     = 65536 - 921.6</text>

                        <text x="60" y="154" fill="#e2e8f0" font-size="12" font-weight="bold">     â‰ˆ 64614 = 0xFC66</text>

                        <!-- ç»“æœé«˜äº®æ¡† -->
                        <rect x="50" y="170" width="220" height="30" fill="#14532d" stroke="#22c55e" stroke-width="1" rx="6"/>
                        <text x="160" y="190" fill="#86efac" font-size="12" text-anchor="middle" font-family="monospace" font-weight="bold">TH0 = 0xFC;  TL0 = 0x66;</text>

                        <!-- æç¤º -->
                        <text x="290" y="190" fill="#64748b" font-size="11">â† åˆå€¼æ‹†åˆ†ä¸ºé«˜8ä½å’Œä½8ä½</text>
                    </svg>
                </div>

                <div class="code-block">
                    <div class="code-header">
                        <span class="code-lang">C51 - å®šæ—¶å™¨0ä¸­æ–­ï¼ˆ1msï¼‰</span>
                        <button class="copy-btn" onclick="copyCode(this)">å¤åˆ¶</button>
                    </div>
                    <pre><code>void timer0_init() {
    TMOD &= 0xF0;  // æ¸…é™¤å®šæ—¶å™¨0è®¾ç½®
    TMOD |= 0x01;  // å®šæ—¶å™¨0ï¼Œæ¨¡å¼1ï¼ˆ16ä½ï¼‰
    TH0 = 0xFC;    // åˆå€¼é«˜8ä½
    TL0 = 0x66;    // åˆå€¼ä½8ä½
    TR0 = 1;       // å¯åŠ¨å®šæ—¶å™¨0
    ET0 = 1;       // ä½¿èƒ½å®šæ—¶å™¨0ä¸­æ–­
    EA = 1;        // ä½¿èƒ½æ€»ä¸­æ–­
}

// å®šæ—¶å™¨0ä¸­æ–­æœåŠ¡å‡½æ•°
void timer0_isr() interrupt 1 {
    TH0 = 0xFC;    // é‡è£…åˆå€¼
    TL0 = 0x66;
    // æ¯ 1ms æ‰§è¡Œä¸€æ¬¡çš„ä»£ç 
}</code></pre>
                </div>
            </div>

            <div class="subsection" id="week3-int">
                <h3 class="subsection-title">3.6 ä¸­æ–­ç³»ç»Ÿ</h3>

                <div class="table-wrapper">
                    <table>
                        <tr>
                            <th>ä¸­æ–­æº</th>
                            <th>ä¸­æ–­å·</th>
                            <th>å…¥å£åœ°å€</th>
                            <th>è§¦å‘æ¡ä»¶</th>
                        </tr>
                        <tr><td>å¤–éƒ¨ä¸­æ–­0 (INT0)</td><td>0</td><td>0x0003</td><td>P3.2 ä¸‹é™æ²¿/ä½ç”µå¹³</td></tr>
                        <tr><td>å®šæ—¶å™¨0 (T0)</td><td>1</td><td>0x000B</td><td>å®šæ—¶å™¨æº¢å‡º</td></tr>
                        <tr><td>å¤–éƒ¨ä¸­æ–­1 (INT1)</td><td>2</td><td>0x0013</td><td>P3.3 ä¸‹é™æ²¿/ä½ç”µå¹³</td></tr>
                        <tr><td>å®šæ—¶å™¨1 (T1)</td><td>3</td><td>0x001B</td><td>å®šæ—¶å™¨æº¢å‡º</td></tr>
                        <tr><td>ä¸²å£ (UART)</td><td>4</td><td>0x0023</td><td>å‘é€/æ¥æ”¶å®Œæˆ</td></tr>
                    </table>
                </div>

                <div class="svg-diagram">
                    <svg viewBox="0 0 700 280" style="width: 100%; max-width: 700px;">
                        <defs>
                            <linearGradient id="ieGrad" x1="0%" y1="0%" x2="100%" y2="0%">
                                <stop offset="0%" style="stop-color:#ef4444;stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#f97316;stop-opacity:1" />
                            </linearGradient>
                            <linearGradient id="ieBitGrad" x1="0%" y1="0%" x2="0%" y2="100%">
                                <stop offset="0%" style="stop-color:#1e293b;stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#0f172a;stop-opacity:1" />
                            </linearGradient>
                        </defs>

                        <!-- æ ‡é¢˜ -->
                        <text x="350" y="22" fill="#e2e8f0" font-size="14" text-anchor="middle" font-weight="bold">ä¸­æ–­ä½¿èƒ½å¯„å­˜å™¨ IEï¼ˆåœ°å€ 0xA8ï¼‰</text>

                        <!-- ä½å·æ ‡ç­¾ -->
                        <text x="100" y="48" fill="#94a3b8" font-size="10" text-anchor="middle">Bit 7</text>
                        <text x="170" y="48" fill="#94a3b8" font-size="10" text-anchor="middle">Bit 6</text>
                        <text x="240" y="48" fill="#94a3b8" font-size="10" text-anchor="middle">Bit 5</text>
                        <text x="310" y="48" fill="#94a3b8" font-size="10" text-anchor="middle">Bit 4</text>
                        <text x="380" y="48" fill="#94a3b8" font-size="10" text-anchor="middle">Bit 3</text>
                        <text x="450" y="48" fill="#94a3b8" font-size="10" text-anchor="middle">Bit 2</text>
                        <text x="520" y="48" fill="#94a3b8" font-size="10" text-anchor="middle">Bit 1</text>
                        <text x="590" y="48" fill="#94a3b8" font-size="10" text-anchor="middle">Bit 0</text>

                        <!-- å¯„å­˜å™¨åç§° -->
                        <text x="45" y="77" fill="url(#ieGrad)" font-size="14" font-weight="bold">IE</text>

                        <!-- ä½æ¡† -->
                        <rect x="65" y="55" width="60" height="36" fill="url(#ieBitGrad)" stroke="#ef4444" stroke-width="2" rx="4"/>
                        <text x="95" y="78" fill="#fca5a5" font-size="12" text-anchor="middle" font-weight="bold">EA</text>

                        <rect x="130" y="55" width="60" height="36" fill="url(#ieBitGrad)" stroke="#475569" stroke-width="2" rx="4"/>
                        <text x="160" y="78" fill="#64748b" font-size="12" text-anchor="middle">-</text>

                        <rect x="195" y="55" width="60" height="36" fill="url(#ieBitGrad)" stroke="#475569" stroke-width="2" rx="4"/>
                        <text x="225" y="78" fill="#64748b" font-size="12" text-anchor="middle">-</text>

                        <rect x="260" y="55" width="60" height="36" fill="url(#ieBitGrad)" stroke="#8b5cf6" stroke-width="2" rx="4"/>
                        <text x="290" y="78" fill="#c4b5fd" font-size="12" text-anchor="middle" font-weight="bold">ES</text>

                        <rect x="325" y="55" width="60" height="36" fill="url(#ieBitGrad)" stroke="#3b82f6" stroke-width="2" rx="4"/>
                        <text x="355" y="78" fill="#93c5fd" font-size="12" text-anchor="middle" font-weight="bold">ET1</text>

                        <rect x="390" y="55" width="60" height="36" fill="url(#ieBitGrad)" stroke="#22c55e" stroke-width="2" rx="4"/>
                        <text x="420" y="78" fill="#86efac" font-size="12" text-anchor="middle" font-weight="bold">EX1</text>

                        <rect x="455" y="55" width="60" height="36" fill="url(#ieBitGrad)" stroke="#3b82f6" stroke-width="2" rx="4"/>
                        <text x="485" y="78" fill="#93c5fd" font-size="12" text-anchor="middle" font-weight="bold">ET0</text>

                        <rect x="520" y="55" width="60" height="36" fill="url(#ieBitGrad)" stroke="#22c55e" stroke-width="2" rx="4"/>
                        <text x="550" y="78" fill="#86efac" font-size="12" text-anchor="middle" font-weight="bold">EX0</text>

                        <!-- ä½è¯´æ˜ï¼ˆå¸¦è¿æ¥çº¿ï¼‰ -->
                        <line x1="95" y1="91" x2="95" y2="105" stroke="#ef4444" stroke-width="1"/>
                        <line x1="95" y1="105" x2="50" y2="105" stroke="#ef4444" stroke-width="1"/>
                        <circle cx="50" cy="105" r="3" fill="#ef4444"/>
                        <text x="55" y="108" fill="#fca5a5" font-size="10">æ€»ä¸­æ–­å¼€å…³ï¼ˆå¿…é¡»=1æ‰èƒ½ä¸­æ–­ï¼‰</text>

                        <line x1="290" y1="91" x2="290" y2="135" stroke="#8b5cf6" stroke-width="1"/>
                        <line x1="290" y1="135" x2="50" y2="135" stroke="#8b5cf6" stroke-width="1"/>
                        <circle cx="50" cy="135" r="3" fill="#8b5cf6"/>
                        <text x="55" y="138" fill="#c4b5fd" font-size="10">ä¸²å£ä¸­æ–­</text>

                        <line x1="355" y1="91" x2="355" y2="165" stroke="#3b82f6" stroke-width="1"/>
                        <line x1="355" y1="165" x2="50" y2="165" stroke="#3b82f6" stroke-width="1"/>
                        <circle cx="50" cy="165" r="3" fill="#3b82f6"/>
                        <text x="55" y="168" fill="#93c5fd" font-size="10">å®šæ—¶å™¨1ä¸­æ–­</text>

                        <line x1="420" y1="91" x2="420" y2="195" stroke="#22c55e" stroke-width="1"/>
                        <line x1="420" y1="195" x2="50" y2="195" stroke="#22c55e" stroke-width="1"/>
                        <circle cx="50" cy="195" r="3" fill="#22c55e"/>
                        <text x="55" y="198" fill="#86efac" font-size="10">å¤–éƒ¨ä¸­æ–­1</text>

                        <line x1="485" y1="91" x2="485" y2="225" stroke="#3b82f6" stroke-width="1"/>
                        <line x1="485" y1="225" x2="50" y2="225" stroke="#3b82f6" stroke-width="1"/>
                        <circle cx="50" cy="225" r="3" fill="#3b82f6"/>
                        <text x="55" y="228" fill="#93c5fd" font-size="10">å®šæ—¶å™¨0ä¸­æ–­</text>

                        <line x1="550" y1="91" x2="550" y2="255" stroke="#22c55e" stroke-width="1"/>
                        <line x1="550" y1="255" x2="50" y2="255" stroke="#22c55e" stroke-width="1"/>
                        <circle cx="50" cy="255" r="3" fill="#22c55e"/>
                        <text x="55" y="258" fill="#86efac" font-size="10">å¤–éƒ¨ä¸­æ–­0</text>

                        <!-- å›¾ä¾‹ -->
                        <rect x="550" y="115" width="12" height="12" fill="#ef4444" rx="2"/>
                        <text x="568" y="125" fill="#fca5a5" font-size="9">æ€»å¼€å…³</text>
                        <rect x="550" y="135" width="12" height="12" fill="#3b82f6" rx="2"/>
                        <text x="568" y="145" fill="#93c5fd" font-size="9">å®šæ—¶å™¨</text>
                        <rect x="550" y="155" width="12" height="12" fill="#22c55e" rx="2"/>
                        <text x="568" y="165" fill="#86efac" font-size="9">å¤–éƒ¨ä¸­æ–­</text>
                        <rect x="550" y="175" width="12" height="12" fill="#8b5cf6" rx="2"/>
                        <text x="568" y="185" fill="#c4b5fd" font-size="9">ä¸²å£</text>
                    </svg>
                </div>

                <div class="code-block">
                    <div class="code-header">
                        <span class="code-lang">C51 - ä¸­æ–­æœåŠ¡å‡½æ•°å†™æ³•</span>
                        <button class="copy-btn" onclick="copyCode(this)">å¤åˆ¶</button>
                    </div>
                    <pre><code>// å¤–éƒ¨ä¸­æ–­0ï¼ˆæŒ‰é”®è§¦å‘ï¼‰
void int0_isr() interrupt 0 {
    // å¤„ç†ä»£ç 
}

// å®šæ—¶å™¨0ä¸­æ–­
void timer0_isr() interrupt 1 {
    TH0 = 0xFC; TL0 = 0x66;  // é‡è£…åˆå€¼
}

// ä¸²å£ä¸­æ–­
void uart_isr() interrupt 4 {
    if(RI) {                  // æ¥æ”¶ä¸­æ–­
        unsigned char dat = SBUF;
        RI = 0;               // æ¸…æ ‡å¿—
    }
    if(TI) {                  // å‘é€ä¸­æ–­
        TI = 0;               // æ¸…æ ‡å¿—
    }
}</code></pre>
                </div>
            </div>

            <div class="subsection">
                <h3 class="subsection-title">3.7 ç”µæ°”ç‰¹æ€§è¡¨</h3>

                <div class="table-wrapper">
                    <table>
                        <tr>
                            <th>å‚æ•°</th>
                            <th>æœ€å°å€¼</th>
                            <th>å…¸å‹å€¼</th>
                            <th>æœ€å¤§å€¼</th>
                            <th>å•ä½</th>
                        </tr>
                        <tr><td>å·¥ä½œç”µå‹ VCC</td><td>4.0</td><td>5.0</td><td>5.5</td><td>V</td></tr>
                        <tr><td>å•ä¸ª I/O çŒç”µæµ</td><td>-</td><td>-</td><td>20</td><td>mA</td></tr>
                        <tr><td>å•ä¸ª I/O æ‹‰ç”µæµ</td><td>-</td><td>-</td><td>1</td><td>mA</td></tr>
                        <tr><td>è¾“å…¥é«˜ç”µå¹³ VIH</td><td>2.0</td><td>-</td><td>VCC+0.5</td><td>V</td></tr>
                        <tr><td>è¾“å…¥ä½ç”µå¹³ VIL</td><td>-0.5</td><td>-</td><td>0.8</td><td>V</td></tr>
                        <tr><td>å·¥ä½œæ¸©åº¦</td><td>-40</td><td>25</td><td>85</td><td>Â°C</td></tr>
                        <tr><td>å·¥ä½œé¢‘ç‡</td><td>0</td><td>11.0592</td><td>40</td><td>MHz</td></tr>
                    </table>
                </div>

                <div class="info-card warning">
                    <div class="info-card-title"><span class="icon">ğŸ’¡</span> é©±åŠ¨èƒ½åŠ›å…³é”®ç‚¹</div>
                    <ul>
                        <li><strong>çŒç”µæµå¼º</strong>ï¼ˆ20mAï¼‰â†’ ç”¨ä½ç”µå¹³é©±åŠ¨ LEDï¼ˆLED é˜³ææ¥ VCCï¼‰</li>
                        <li><strong>æ‹‰ç”µæµå¼±</strong>ï¼ˆ1mAï¼‰â†’ é«˜ç”µå¹³æ— æ³•ç›´æ¥é©±åŠ¨ LED</li>
                        <li>é©±åŠ¨ç»§ç”µå™¨ã€ç”µæœº â†’ éœ€è¦ä¸‰æç®¡æˆ–é©±åŠ¨èŠ¯ç‰‡ï¼ˆå¦‚ ULN2003ï¼‰</li>
                        <li>P0 å£ â†’ å¿…é¡»å¤–æ¥ä¸Šæ‹‰ç”µé˜»ï¼ˆ10kÎ©ï¼‰ï¼Œå¦åˆ™åªèƒ½è¾“å‡ºä½ç”µå¹³</li>
                    </ul>
                </div>
            </div>

            <div class="subsection">
                <h3 class="subsection-title">3.8 æ‰‹å†Œé˜…è¯»æŠ€å·§æ€»ç»“</h3>

                <div class="info-card tip">
                    <div class="info-card-title"><span class="icon">ğŸ¯</span> æ–°æ‰‹å¿…çœ‹ç« èŠ‚ï¼ˆæŒ‰ä¼˜å…ˆçº§ï¼‰</div>
                    <ol>
                        <li><strong>å¼•è„šå®šä¹‰</strong> â†’ ç”»åŸç†å›¾å¿…çœ‹</li>
                        <li><strong>ç”µæ°”ç‰¹æ€§</strong> â†’ ç”µå‹ã€ç”µæµé™åˆ¶</li>
                        <li><strong>I/O ç«¯å£</strong> â†’ P0 éœ€è¦ä¸Šæ‹‰ï¼</li>
                        <li><strong>å®šæ—¶å™¨</strong> â†’ å»¶æ—¶ã€PWM å¿…ç”¨</li>
                        <li><strong>ä¸²å£</strong> â†’ è°ƒè¯•ã€é€šä¿¡å¿…ç”¨</li>
                        <li><strong>ä¸­æ–­</strong> â†’ å®æ—¶å“åº”å¿…ç”¨</li>
                    </ol>
                </div>

                <div class="collapsible">
                    <div class="collapsible-header" onclick="toggleCollapsible(this.parentElement)">
                        <span>ğŸ“ ç»ƒä¹ ï¼šé…ç½®ä¸²å£ 9600bps éœ€è¦è®¾ç½®å“ªäº›å¯„å­˜å™¨ï¼Ÿ</span>
                        <span class="arrow">â–¼</span>
                    </div>
                    <div class="collapsible-content">
                        <ol>
                            <li><strong>SCON = 0x50</strong>ï¼šæ¨¡å¼1 + å…è®¸æ¥æ”¶</li>
                            <li><strong>TMOD |= 0x20</strong>ï¼šå®šæ—¶å™¨1 æ¨¡å¼2</li>
                            <li><strong>TH1 = TL1 = 0xFD</strong>ï¼šæ³¢ç‰¹ç‡ 9600</li>
                            <li><strong>TR1 = 1</strong>ï¼šå¯åŠ¨å®šæ—¶å™¨1</li>
                            <li>ï¼ˆå¯é€‰ï¼‰<strong>ES = 1; EA = 1;</strong>ï¼šä½¿èƒ½ä¸²å£ä¸­æ–­</li>
                        </ol>
                    </div>
                </div>
            </div>

            <div class="subsection" id="week3-peripheral">
                <h3 class="subsection-title">3.9 å¤–è®¾èŠ¯ç‰‡æ‰‹å†Œé˜…è¯»ï¼ˆä»¥ DS1302 ä¸ºä¾‹ï¼‰</h3>

                <p>å•ç‰‡æœºæ‰‹å†Œå‘Šè¯‰ä½ "æˆ‘æœ‰ä»€ä¹ˆåŠŸèƒ½"ï¼Œè€Œ<strong>å¤–è®¾èŠ¯ç‰‡æ‰‹å†Œ</strong>å‘Šè¯‰ä½ "æ€ä¹ˆè·Ÿæˆ‘é€šä¿¡"ã€‚é˜…è¯»æ–¹æ³•å®Œå…¨ä¸åŒï¼</p>

                <div class="info-card info">
                    <div class="info-card-title"><span class="icon">ğŸ’¡</span> æ ¸å¿ƒåŒºåˆ«</div>
                    <ul>
                        <li><strong>å•ç‰‡æœºæ‰‹å†Œ</strong> â†’ å…³æ³¨å¯„å­˜å™¨é…ç½®ï¼ˆæˆ‘æ€ä¹ˆå·¥ä½œï¼‰</li>
                        <li><strong>å¤–è®¾èŠ¯ç‰‡æ‰‹å†Œ</strong> â†’ å…³æ³¨é€šä¿¡æ—¶åºï¼ˆæ€ä¹ˆè·Ÿæˆ‘è¯´è¯ï¼‰</li>
                    </ul>
                </div>

                <h4 style="margin: 1.5rem 0 0.5rem; color: var(--primary);">äº”æ­¥é˜…è¯»æ³•</h4>
                <!-- ç¾åŒ–çš„äº”æ­¥æµç¨‹å›¾ -->
                <div class="svg-diagram">
                    <div class="diagram-title">å¤–è®¾èŠ¯ç‰‡æ‰‹å†Œäº”æ­¥é˜…è¯»æ³•</div>
                    <svg width="600" height="160" viewBox="0 0 600 160">
                        <defs>
                            <linearGradient id="step1Grad" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" style="stop-color:#3b82f6"/><stop offset="100%" style="stop-color:#2563eb"/>
                            </linearGradient>
                            <linearGradient id="step2Grad" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" style="stop-color:#22c55e"/><stop offset="100%" style="stop-color:#16a34a"/>
                            </linearGradient>
                            <linearGradient id="step3Grad" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" style="stop-color:#f59e0b"/><stop offset="100%" style="stop-color:#d97706"/>
                            </linearGradient>
                            <linearGradient id="step4Grad" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" style="stop-color:#8b5cf6"/><stop offset="100%" style="stop-color:#7c3aed"/>
                            </linearGradient>
                            <linearGradient id="step5Grad" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" style="stop-color:#ec4899"/><stop offset="100%" style="stop-color:#db2777"/>
                            </linearGradient>
                        </defs>
                        <rect width="600" height="160" fill="#0f172a" rx="8"/>

                        <!-- Step 1 -->
                        <g transform="translate(25, 45)">
                            <rect x="0" y="0" width="90" height="70" rx="8" fill="url(#step1Grad)"/>
                            <text x="45" y="25" fill="white" font-size="10" text-anchor="middle" font-weight="bold">Step 1</text>
                            <text x="45" y="42" fill="#bfdbfe" font-size="8" text-anchor="middle">è¿™èŠ¯ç‰‡</text>
                            <text x="45" y="54" fill="#bfdbfe" font-size="8" text-anchor="middle">å¹²å˜›çš„ï¼Ÿ</text>
                            <text x="45" y="66" fill="#93c5fd" font-size="7" text-anchor="middle">Features</text>
                        </g>

                        <!-- Arrow 1 -->
                        <polygon points="120,80 135,70 135,90" fill="#64748b"/>

                        <!-- Step 2 -->
                        <g transform="translate(140, 45)">
                            <rect x="0" y="0" width="90" height="70" rx="8" fill="url(#step2Grad)"/>
                            <text x="45" y="25" fill="white" font-size="10" text-anchor="middle" font-weight="bold">Step 2</text>
                            <text x="45" y="42" fill="#bbf7d0" font-size="8" text-anchor="middle">æ€ä¹ˆ</text>
                            <text x="45" y="54" fill="#bbf7d0" font-size="8" text-anchor="middle">æ¥çº¿ï¼Ÿ</text>
                            <text x="45" y="66" fill="#86efac" font-size="7" text-anchor="middle">Pin Config</text>
                        </g>

                        <!-- Arrow 2 -->
                        <polygon points="235,80 250,70 250,90" fill="#64748b"/>

                        <!-- Step 3 - æœ€é‡è¦ -->
                        <g transform="translate(255, 35)">
                            <rect x="0" y="0" width="90" height="90" rx="8" fill="url(#step3Grad)" stroke="#fbbf24" stroke-width="2"/>
                            <text x="45" y="22" fill="white" font-size="10" text-anchor="middle" font-weight="bold">Step 3 â­</text>
                            <text x="45" y="42" fill="#fef3c7" font-size="8" text-anchor="middle">æ€ä¹ˆ</text>
                            <text x="45" y="54" fill="#fef3c7" font-size="8" text-anchor="middle">é€šä¿¡ï¼Ÿ</text>
                            <text x="45" y="70" fill="#fde68a" font-size="7" text-anchor="middle">Timing</text>
                            <text x="45" y="82" fill="#fcd34d" font-size="7" text-anchor="middle" font-weight="bold">æœ€é‡è¦ï¼</text>
                        </g>

                        <!-- Arrow 3 -->
                        <polygon points="350,80 365,70 365,90" fill="#64748b"/>

                        <!-- Step 4 -->
                        <g transform="translate(370, 45)">
                            <rect x="0" y="0" width="90" height="70" rx="8" fill="url(#step4Grad)"/>
                            <text x="45" y="25" fill="white" font-size="10" text-anchor="middle" font-weight="bold">Step 4</text>
                            <text x="45" y="42" fill="#e9d5ff" font-size="8" text-anchor="middle">å‘ä»€ä¹ˆ</text>
                            <text x="45" y="54" fill="#e9d5ff" font-size="8" text-anchor="middle">å‘½ä»¤ï¼Ÿ</text>
                            <text x="45" y="66" fill="#c4b5fd" font-size="7" text-anchor="middle">Command</text>
                        </g>

                        <!-- Arrow 4 -->
                        <polygon points="465,80 480,70 480,90" fill="#64748b"/>

                        <!-- Step 5 -->
                        <g transform="translate(485, 45)">
                            <rect x="0" y="0" width="90" height="70" rx="8" fill="url(#step5Grad)"/>
                            <text x="45" y="25" fill="white" font-size="10" text-anchor="middle" font-weight="bold">Step 5</text>
                            <text x="45" y="42" fill="#fbcfe8" font-size="8" text-anchor="middle">æ•°æ®</text>
                            <text x="45" y="54" fill="#fbcfe8" font-size="8" text-anchor="middle">æ ¼å¼ï¼Ÿ</text>
                            <text x="45" y="66" fill="#f9a8d4" font-size="7" text-anchor="middle">BCDç¼–ç </text>
                        </g>
                    </svg>
                </div>

                <h4 style="margin: 1.5rem 0 0.5rem; color: var(--primary);">ç¬¬ 1 æ­¥ï¼šè¿™èŠ¯ç‰‡æ˜¯å¹²å˜›çš„ï¼Ÿ</h4>
                <p>çœ‹æ‰‹å†Œç¬¬ 1 é¡µçš„ <strong>FEATURES</strong>ï¼Œå¿«é€Ÿæå–å…³é”®ä¿¡æ¯ï¼š</p>
                <!-- ç¾åŒ–çš„Featuresä¿¡æ¯å¡ -->
                <div class="svg-diagram" style="padding: 1rem;">
                    <svg width="450" height="180" viewBox="0 0 450 180">
                        <rect width="450" height="180" fill="#0f172a" rx="8"/>

                        <!-- æ ‡é¢˜ -->
                        <rect x="15" y="15" width="420" height="30" rx="6" fill="#3b82f6"/>
                        <text x="225" y="36" fill="white" font-size="12" text-anchor="middle" font-weight="bold">ğŸ“‹ DS1302 å…³é”®ä¿¡æ¯æå–</text>

                        <!-- åŠŸèƒ½åˆ—è¡¨ -->
                        <g font-size="11" fill="#e2e8f0">
                            <g transform="translate(25, 65)">
                                <circle cx="8" cy="4" r="6" fill="#22c55e"/>
                                <text x="8" y="7" fill="white" font-size="9" text-anchor="middle">âœ“</text>
                                <text x="22" y="8">å®æ—¶æ—¶é’Ÿï¼ˆç§’/åˆ†/æ—¶/æ—¥/æœˆ/å¹´/æ˜ŸæœŸï¼‰</text>
                            </g>
                            <g transform="translate(25, 90)">
                                <circle cx="8" cy="4" r="6" fill="#22c55e"/>
                                <text x="8" y="7" fill="white" font-size="9" text-anchor="middle">âœ“</text>
                                <text x="22" y="8">31 å­—èŠ‚ RAMï¼ˆå¯å­˜æ•°æ®ï¼Œæ‰ç”µä¸¢å¤±ï¼‰</text>
                            </g>
                            <g transform="translate(25, 115)">
                                <circle cx="8" cy="4" r="6" fill="#f59e0b"/>
                                <text x="8" y="7" fill="white" font-size="9" text-anchor="middle">âœ“</text>
                                <text x="22" y="8">3 çº¿ä¸²è¡Œæ¥å£ï¼ˆ<tspan fill="#f59e0b" font-weight="bold">CEã€I/Oã€SCLK</tspan>ï¼‰</text>
                            </g>
                            <g transform="translate(25, 140)">
                                <circle cx="8" cy="4" r="6" fill="#22c55e"/>
                                <text x="8" y="7" fill="white" font-size="9" text-anchor="middle">âœ“</text>
                                <text x="22" y="8">å·¥ä½œç”µå‹ 2.0V - 5.5Vï¼ˆå…¼å®¹ 51 å•ç‰‡æœºï¼‰</text>
                            </g>
                            <g transform="translate(25, 165)">
                                <circle cx="8" cy="4" r="6" fill="#22c55e"/>
                                <text x="8" y="7" fill="white" font-size="9" text-anchor="middle">âœ“</text>
                                <text x="22" y="8">æ”¯æŒå¤‡ç”¨ç”µæ± ï¼ˆVCC1 æ¥ç”µæ± ï¼‰</text>
                            </g>
                        </g>
                    </svg>
                </div>

                <h4 style="margin: 1.5rem 0 0.5rem; color: var(--primary);">ç¬¬ 2 æ­¥ï¼šæ€ä¹ˆæ¥çº¿ï¼Ÿ</h4>
                <p>çœ‹ <strong>Pin Configuration</strong> å’Œ <strong>Typical Operating Circuit</strong>ï¼š</p>
                <!-- ç¾åŒ–çš„DS1302æ¥çº¿å›¾ -->
                <div class="svg-diagram">
                    <div class="diagram-title">DS1302 æ¥çº¿å›¾ï¼ˆæœ€å°ç³»ç»Ÿï¼‰</div>
                    <svg width="550" height="280" viewBox="0 0 550 280">
                        <defs>
                            <linearGradient id="mcuGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" style="stop-color:#3b82f6"/><stop offset="100%" style="stop-color:#1d4ed8"/>
                            </linearGradient>
                            <linearGradient id="ds1302Grad" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" style="stop-color:#22c55e"/><stop offset="100%" style="stop-color:#15803d"/>
                            </linearGradient>
                        </defs>
                        <rect width="550" height="280" fill="#0f172a" rx="8"/>

                        <!-- 51å•ç‰‡æœº -->
                        <rect x="30" y="60" width="120" height="160" rx="10" fill="url(#mcuGrad)" stroke="#60a5fa" stroke-width="2"/>
                        <text x="90" y="90" fill="white" font-size="12" text-anchor="middle" font-weight="bold">51å•ç‰‡æœº</text>
                        <text x="90" y="110" fill="#93c5fd" font-size="9" text-anchor="middle">STC89C52</text>

                        <!-- MCUå¼•è„š -->
                        <g font-size="9">
                            <rect x="150" y="125" width="25" height="16" rx="3" fill="#ef4444"/>
                            <text x="135" y="137" fill="#fca5a5" text-anchor="end">P3.5</text>

                            <rect x="150" y="150" width="25" height="16" rx="3" fill="#f59e0b"/>
                            <text x="135" y="162" fill="#fcd34d" text-anchor="end">P3.4</text>

                            <rect x="150" y="175" width="25" height="16" rx="3" fill="#8b5cf6"/>
                            <text x="135" y="187" fill="#c4b5fd" text-anchor="end">P3.6</text>

                            <rect x="150" y="200" width="25" height="16" rx="3" fill="#475569"/>
                            <text x="135" y="212" fill="#94a3b8" text-anchor="end">GND</text>
                        </g>

                        <!-- è¿æ¥çº¿ -->
                        <line x1="175" y1="133" x2="355" y2="133" stroke="#ef4444" stroke-width="2"/>
                        <line x1="175" y1="158" x2="355" y2="158" stroke="#f59e0b" stroke-width="2"/>
                        <line x1="175" y1="183" x2="355" y2="183" stroke="#8b5cf6" stroke-width="2"/>
                        <line x1="175" y1="208" x2="355" y2="208" stroke="#64748b" stroke-width="2"/>

                        <!-- DS1302 èŠ¯ç‰‡ -->
                        <rect x="355" y="60" width="140" height="160" rx="10" fill="url(#ds1302Grad)" stroke="#4ade80" stroke-width="2"/>
                        <text x="425" y="90" fill="white" font-size="12" text-anchor="middle" font-weight="bold">DS1302</text>
                        <text x="425" y="108" fill="#bbf7d0" font-size="9" text-anchor="middle">å®æ—¶æ—¶é’Ÿ</text>

                        <!-- DS1302å¼•è„š -->
                        <g font-size="9">
                            <text x="375" y="137" fill="#fca5a5" font-weight="bold">CE</text>
                            <text x="375" y="162" fill="#fcd34d" font-weight="bold">I/O</text>
                            <text x="375" y="187" fill="#c4b5fd" font-weight="bold">SCLK</text>
                            <text x="375" y="212" fill="#94a3b8" font-weight="bold">GND</text>

                            <!-- å³ä¾§å¼•è„š -->
                            <text x="460" y="137" fill="#86efac">X1</text>
                            <text x="460" y="157" fill="#86efac">X2</text>
                            <text x="460" y="182" fill="#fca5a5">VCC1</text>
                            <text x="460" y="207" fill="#fca5a5">VCC2</text>
                        </g>

                        <!-- æ™¶æŒ¯ -->
                        <rect x="490" y="122" width="45" height="40" rx="5" fill="none" stroke="#8b5cf6" stroke-width="2"/>
                        <text x="512" y="147" fill="#c4b5fd" font-size="8" text-anchor="middle">32.768</text>
                        <text x="512" y="158" fill="#c4b5fd" font-size="8" text-anchor="middle">kHz</text>

                        <!-- ç”µæºè¿æ¥ -->
                        <line x1="485" y1="182" x2="530" y2="182" stroke="#ef4444" stroke-width="2"/>
                        <line x1="485" y1="207" x2="530" y2="207" stroke="#ef4444" stroke-width="2"/>
                        <text x="535" y="187" fill="#fca5a5" font-size="9">+5V</text>
                        <text x="535" y="212" fill="#fca5a5" font-size="9">+5V</text>

                        <!-- å›¾ä¾‹ -->
                        <g transform="translate(30, 245)" font-size="9">
                            <rect x="0" y="0" width="12" height="12" rx="2" fill="#ef4444"/>
                            <text x="18" y="10" fill="#94a3b8">CE=ç‰‡é€‰(é«˜ç”µå¹³æœ‰æ•ˆ)</text>

                            <rect x="150" y="0" width="12" height="12" rx="2" fill="#f59e0b"/>
                            <text x="168" y="10" fill="#94a3b8">I/O=åŒå‘æ•°æ®çº¿</text>

                            <rect x="300" y="0" width="12" height="12" rx="2" fill="#8b5cf6"/>
                            <text x="318" y="10" fill="#94a3b8">SCLK=æ—¶é’Ÿ(MCUäº§ç”Ÿ)</text>
                        </g>
                    </svg>
                </div>

                <h4 style="margin: 1.5rem 0 0.5rem; color: var(--primary);">ç¬¬ 3 æ­¥ï¼šæ€ä¹ˆé€šä¿¡ï¼Ÿï¼ˆâ­é‡ç‚¹ï¼‰</h4>
                <p>çœ‹ <strong>Timing Diagram</strong>ï¼ˆæ—¶åºå›¾ï¼‰â€”â€” è¿™æ˜¯å¤–è®¾èŠ¯ç‰‡æ‰‹å†Œçš„<strong>æ ¸å¿ƒ</strong>ï¼</p>
                <!-- ç¾åŒ–çš„DS1302æ—¶åºå›¾ -->
                <div class="svg-diagram">
                    <div class="diagram-title">DS1302 å•å­—èŠ‚å†™å…¥æ—¶åº</div>
                    <svg width="600" height="260" viewBox="0 0 600 260">
                        <rect width="600" height="260" fill="#0f172a" rx="8"/>

                        <!-- ä¿¡å·æ ‡ç­¾ -->
                        <g font-size="11" font-weight="bold" fill="#94a3b8">
                            <text x="35" y="55" text-anchor="end">CE</text>
                            <text x="35" y="115" text-anchor="end">SCLK</text>
                            <text x="35" y="175" text-anchor="end">I/O</text>
                        </g>

                        <!-- CE ä¿¡å· -->
                        <path d="M 50 65 L 80 65 L 80 40 L 500 40 L 500 65 L 560 65" fill="none" stroke="#ef4444" stroke-width="3"/>
                        <text x="90" y="35" fill="#fca5a5" font-size="9">æ‹‰é«˜ â†‘</text>
                        <text x="490" y="35" fill="#fca5a5" font-size="9">â†“ æ‹‰ä½</text>

                        <!-- SCLK ä¿¡å· -->
                        <path d="M 50 125 L 90 125 L 90 100 L 115 100 L 115 125 L 140 125 L 140 100 L 165 100 L 165 125 L 190 125 L 190 100 L 215 100 L 215 125 L 240 125 L 240 100 L 265 100 L 265 125 L 290 125 L 290 100 L 315 100 L 315 125 L 340 125 L 340 100 L 365 100 L 365 125 L 390 125 L 390 100 L 415 100 L 415 125 L 440 125 L 440 100 L 465 100 L 465 125 L 560 125"
                              fill="none" stroke="#8b5cf6" stroke-width="3"/>

                        <!-- è„‰å†²ç¼–å· -->
                        <g font-size="8" fill="#c4b5fd" text-anchor="middle">
                            <text x="102" y="138">1</text>
                            <text x="152" y="138">2</text>
                            <text x="202" y="138">3</text>
                            <text x="252" y="138">4</text>
                            <text x="302" y="138">5</text>
                            <text x="352" y="138">6</text>
                            <text x="402" y="138">7</text>
                            <text x="452" y="138">8</text>
                        </g>

                        <!-- I/O æ•°æ® -->
                        <g transform="translate(50, 160)">
                            <path d="M 0 20 L 40 20" fill="none" stroke="#f59e0b" stroke-width="2"/>
                            <!-- æ•°æ®ä½ -->
                            <g stroke="#f59e0b" stroke-width="2" fill="none">
                                <path d="M 40 5 L 55 20 L 40 35"/>
                                <path d="M 55 20 L 105 20"/>
                                <path d="M 105 5 L 120 20 L 105 35"/>
                                <path d="M 120 20 L 155 20"/>
                                <path d="M 155 5 L 170 20 L 155 35"/>
                                <path d="M 170 20 L 205 20"/>
                                <path d="M 205 5 L 220 20 L 205 35"/>
                                <path d="M 220 20 L 255 20"/>
                                <path d="M 255 5 L 270 20 L 255 35"/>
                                <path d="M 270 20 L 305 20"/>
                                <path d="M 305 5 L 320 20 L 305 35"/>
                                <path d="M 320 20 L 355 20"/>
                                <path d="M 355 5 L 370 20 L 355 35"/>
                                <path d="M 370 20 L 405 20"/>
                                <path d="M 405 5 L 420 20 L 405 35"/>
                                <path d="M 420 20 L 510 20"/>
                            </g>
                        </g>

                        <!-- æ•°æ®ä½æ ‡ç­¾ -->
                        <g font-size="9" font-weight="bold" fill="#fcd34d" text-anchor="middle">
                            <text x="125" y="182">D0</text>
                            <text x="175" y="182">D1</text>
                            <text x="225" y="182">D2</text>
                            <text x="275" y="182">D3</text>
                            <text x="325" y="182">D4</text>
                            <text x="375" y="182">D5</text>
                            <text x="425" y="182">D6</text>
                            <text x="475" y="182">D7</text>
                        </g>
                        <text x="80" y="205" fill="#f59e0b" font-size="8">â†‘ LSBå…ˆå‘</text>

                        <!-- é‡‡æ ·ç®­å¤´ -->
                        <g fill="#22c55e">
                            <polygon points="90,145 86,155 94,155"/>
                            <polygon points="140,145 136,155 144,155"/>
                            <polygon points="190,145 186,155 194,155"/>
                            <polygon points="240,145 236,155 244,155"/>
                            <polygon points="290,145 286,155 294,155"/>
                            <polygon points="340,145 336,155 344,155"/>
                            <polygon points="390,145 386,155 394,155"/>
                            <polygon points="440,145 436,155 444,155"/>
                        </g>
                        <text x="470" y="153" fill="#22c55e" font-size="8">â†‘ä¸Šå‡æ²¿é‡‡æ ·</text>

                        <!-- å…³é”®æ—¶åºè¯´æ˜ -->
                        <g transform="translate(50, 218)" font-size="9">
                            <rect x="0" y="0" width="500" height="35" rx="5" fill="#1e293b" stroke="#334155"/>
                            <text x="15" y="15" fill="#22c55e">â‘  CEæ‹‰é«˜åSCLKæ‰æœ‰æ•ˆ</text>
                            <text x="170" y="15" fill="#f59e0b">â‘¡ ä¸Šå‡æ²¿é‡‡æ ·æ•°æ®</text>
                            <text x="310" y="15" fill="#8b5cf6">â‘¢ LSBå…ˆå‘</text>
                            <text x="400" y="15" fill="#ef4444">â‘£ å®ŒæˆåCEæ‹‰ä½</text>
                        </g>
                    </svg>
                </div>

                <div class="code-block">
                    <div class="code-header">
                        <span class="code-lang">C51 - æ—¶åºè½¬ä»£ç </span>
                        <button class="copy-btn" onclick="copyCode(this)">å¤åˆ¶</button>
                    </div>
                    <pre><code>sbit CE   = P3^5;
sbit IO   = P3^4;
sbit SCLK = P3^6;

// å†™ä¸€ä¸ªå­—èŠ‚ï¼ˆå¯¹ç…§æ—¶åºå›¾ç†è§£ï¼‰
void ds1302_write_byte(unsigned char dat) {
    unsigned char i;
    for(i = 0; i < 8; i++) {
        IO = dat & 0x01;   // â‘  å–æœ€ä½ä½æ”¾åˆ° I/O çº¿
        SCLK = 1;          // â‘¡ ä¸Šå‡æ²¿ï¼ŒDS1302 é‡‡æ ·
        SCLK = 0;          // â‘¢ ä¸ºä¸‹ä¸€ä½åšå‡†å¤‡
        dat >>= 1;         // â‘£ å³ç§»ï¼Œå‡†å¤‡ä¸‹ä¸€ä½
    }
}</code></pre>
                </div>

                <h4 style="margin: 1.5rem 0 0.5rem; color: var(--primary);">ç¬¬ 4 æ­¥ï¼šå‘ä»€ä¹ˆå‘½ä»¤ï¼Ÿ</h4>
                <p>çœ‹ <strong>Command Byte</strong> å’Œ <strong>Register Map</strong>ï¼š</p>
                <!-- ç¾åŒ–çš„å‘½ä»¤å­—èŠ‚æ ¼å¼å›¾ -->
                <div class="svg-diagram">
                    <div class="diagram-title">DS1302 å‘½ä»¤å­—èŠ‚æ ¼å¼</div>
                    <svg width="550" height="180" viewBox="0 0 550 180">
                        <rect width="550" height="180" fill="#0f172a" rx="8"/>

                        <!-- ä½æ ‡ç­¾ -->
                        <g font-size="10" fill="#94a3b8" text-anchor="middle">
                            <text x="75" y="30">bit7</text>
                            <text x="135" y="30">bit6</text>
                            <text x="195" y="30">bit5</text>
                            <text x="255" y="30">bit4</text>
                            <text x="315" y="30">bit3</text>
                            <text x="375" y="30">bit2</text>
                            <text x="435" y="30">bit1</text>
                            <text x="495" y="30">bit0</text>
                        </g>

                        <!-- å‘½ä»¤å­—èŠ‚æ ¼å­ -->
                        <g transform="translate(45, 40)">
                            <rect x="0" y="0" width="60" height="40" rx="4" fill="#ef4444" stroke="#fca5a5"/>
                            <text x="30" y="28" fill="white" font-size="14" text-anchor="middle" font-weight="bold">1</text>

                            <rect x="60" y="0" width="60" height="40" rx="4" fill="#3b82f6" stroke="#93c5fd"/>
                            <text x="90" y="18" fill="white" font-size="9" text-anchor="middle">RAM/</text>
                            <text x="90" y="32" fill="white" font-size="9" text-anchor="middle">CK</text>

                            <rect x="120" y="0" width="60" height="40" rx="4" fill="#22c55e" stroke="#86efac"/>
                            <text x="150" y="28" fill="white" font-size="11" text-anchor="middle" font-weight="bold">A4</text>

                            <rect x="180" y="0" width="60" height="40" rx="4" fill="#22c55e" stroke="#86efac"/>
                            <text x="210" y="28" fill="white" font-size="11" text-anchor="middle" font-weight="bold">A3</text>

                            <rect x="240" y="0" width="60" height="40" rx="4" fill="#22c55e" stroke="#86efac"/>
                            <text x="270" y="28" fill="white" font-size="11" text-anchor="middle" font-weight="bold">A2</text>

                            <rect x="300" y="0" width="60" height="40" rx="4" fill="#22c55e" stroke="#86efac"/>
                            <text x="330" y="28" fill="white" font-size="11" text-anchor="middle" font-weight="bold">A1</text>

                            <rect x="360" y="0" width="60" height="40" rx="4" fill="#22c55e" stroke="#86efac"/>
                            <text x="390" y="28" fill="white" font-size="11" text-anchor="middle" font-weight="bold">A0</text>

                            <rect x="420" y="0" width="60" height="40" rx="4" fill="#8b5cf6" stroke="#c4b5fd"/>
                            <text x="450" y="18" fill="white" font-size="9" text-anchor="middle">RD/</text>
                            <text x="450" y="32" fill="white" font-size="9" text-anchor="middle">WR</text>
                        </g>

                        <!-- è¯´æ˜æ–‡å­— -->
                        <g font-size="9">
                            <line x1="75" y1="85" x2="75" y2="105" stroke="#ef4444" stroke-width="2"/>
                            <text x="75" y="118" fill="#fca5a5" text-anchor="middle">å¿…é¡»ä¸º1</text>

                            <line x1="105" y1="85" x2="105" y2="105" stroke="#3b82f6" stroke-width="2"/>
                            <text x="105" y="118" fill="#93c5fd" text-anchor="middle">0=æ—¶é’Ÿ</text>
                            <text x="105" y="130" fill="#93c5fd" text-anchor="middle">1=RAM</text>

                            <line x1="285" y1="85" x2="285" y2="105" stroke="#22c55e" stroke-width="2"/>
                            <text x="285" y="120" fill="#86efac" text-anchor="middle">å¯„å­˜å™¨åœ°å€ (A4-A0)</text>

                            <line x1="495" y1="85" x2="495" y2="105" stroke="#8b5cf6" stroke-width="2"/>
                            <text x="495" y="118" fill="#c4b5fd" text-anchor="middle">0=å†™</text>
                            <text x="495" y="130" fill="#c4b5fd" text-anchor="middle">1=è¯»</text>
                        </g>

                        <!-- ç¤ºä¾‹ -->
                        <rect x="45" y="145" width="460" height="28" rx="5" fill="#1e293b" stroke="#334155"/>
                        <text x="55" y="163" fill="#94a3b8" font-size="9">
                            <tspan fill="#f59e0b">ç¤ºä¾‹ï¼š</tspan>
                            <tspan>å†™ç§’å¯„å­˜å™¨ = </tspan>
                            <tspan fill="#ef4444">1</tspan>
                            <tspan fill="#3b82f6">0</tspan>
                            <tspan fill="#22c55e">00000</tspan>
                            <tspan fill="#8b5cf6">0</tspan>
                            <tspan> = 0x80 | è¯»ç§’å¯„å­˜å™¨ = </tspan>
                            <tspan fill="#ef4444">1</tspan>
                            <tspan fill="#3b82f6">0</tspan>
                            <tspan fill="#22c55e">00000</tspan>
                            <tspan fill="#8b5cf6">1</tspan>
                            <tspan> = 0x81</tspan>
                        </text>
                    </svg>
                </div>

                <div class="table-wrapper">
                    <table>
                        <tr>
                            <th>åŠŸèƒ½</th>
                            <th>å†™å‘½ä»¤</th>
                            <th>è¯»å‘½ä»¤</th>
                            <th>è¯´æ˜</th>
                        </tr>
                        <tr><td>ç§’</td><td>0x80</td><td>0x81</td><td>bit7=CHï¼ˆ1=åœæ­¢ï¼‰</td></tr>
                        <tr><td>åˆ†</td><td>0x82</td><td>0x83</td><td>0-59</td></tr>
                        <tr><td>æ—¶</td><td>0x84</td><td>0x85</td><td>1-12 æˆ– 0-23</td></tr>
                        <tr><td>æ—¥</td><td>0x86</td><td>0x87</td><td>1-31</td></tr>
                        <tr><td>æœˆ</td><td>0x88</td><td>0x89</td><td>1-12</td></tr>
                        <tr><td>æ˜ŸæœŸ</td><td>0x8A</td><td>0x8B</td><td>1-7</td></tr>
                        <tr><td>å¹´</td><td>0x8C</td><td>0x8D</td><td>00-99</td></tr>
                        <tr><td>å†™ä¿æŠ¤</td><td>0x8E</td><td>0x8F</td><td>bit7=WPï¼ˆ1=ä¿æŠ¤ï¼‰</td></tr>
                    </table>
                </div>

                <h4 style="margin: 1.5rem 0 0.5rem; color: var(--primary);">ç¬¬ 5 æ­¥ï¼šæ•°æ®æ ¼å¼ï¼Ÿ</h4>
                <p>DS1302 ä½¿ç”¨ <strong>BCD ç¼–ç </strong>ï¼ˆä¸æ˜¯äºŒè¿›åˆ¶ï¼ï¼‰ï¼š</p>
                <!-- ç¾åŒ–çš„BCDç¼–ç è¯´æ˜å›¾ -->
                <div class="svg-diagram">
                    <div class="diagram-title">BCD ç¼–ç ç¤ºä¾‹ï¼šå­˜å‚¨æ—¶é—´ 23:59:30</div>
                    <svg width="500" height="200" viewBox="0 0 500 200">
                        <rect width="500" height="200" fill="#0f172a" rx="8"/>

                        <!-- è¡¨å¤´ -->
                        <g font-size="10" fill="#64748b" font-weight="bold" text-anchor="middle">
                            <text x="80" y="35">åè¿›åˆ¶</text>
                            <text x="180" y="35">BCDç¼–ç </text>
                            <text x="320" y="35">äºŒè¿›åˆ¶è¡¨ç¤º</text>
                            <text x="440" y="35">å«ä¹‰</text>
                        </g>

                        <!-- åˆ†éš”çº¿ -->
                        <line x1="30" y1="45" x2="470" y2="45" stroke="#334155" stroke-width="1"/>

                        <!-- ç§’ -->
                        <g transform="translate(0, 60)">
                            <rect x="55" y="0" width="50" height="28" rx="4" fill="#3b82f6"/>
                            <text x="80" y="20" fill="white" font-size="14" text-anchor="middle" font-weight="bold">30</text>

                            <text x="130" y="18" fill="#64748b" font-size="14">â†’</text>

                            <rect x="150" y="0" width="60" height="28" rx="4" fill="#22c55e"/>
                            <text x="180" y="20" fill="white" font-size="12" text-anchor="middle" font-weight="bold">0x30</text>

                            <text x="230" y="18" fill="#64748b" font-size="14">=</text>

                            <rect x="250" y="0" width="130" height="28" rx="4" fill="#1e293b" stroke="#475569"/>
                            <text x="315" y="18" fill="#f59e0b" font-size="10" text-anchor="middle" font-family="monospace">
                                <tspan fill="#22c55e">0011</tspan> <tspan fill="#3b82f6">0000</tspan>
                            </text>

                            <text x="440" y="18" fill="#94a3b8" font-size="10" text-anchor="middle">ç§’å¯„å­˜å™¨</text>
                        </g>

                        <!-- åˆ† -->
                        <g transform="translate(0, 95)">
                            <rect x="55" y="0" width="50" height="28" rx="4" fill="#3b82f6"/>
                            <text x="80" y="20" fill="white" font-size="14" text-anchor="middle" font-weight="bold">59</text>

                            <text x="130" y="18" fill="#64748b" font-size="14">â†’</text>

                            <rect x="150" y="0" width="60" height="28" rx="4" fill="#22c55e"/>
                            <text x="180" y="20" fill="white" font-size="12" text-anchor="middle" font-weight="bold">0x59</text>

                            <text x="230" y="18" fill="#64748b" font-size="14">=</text>

                            <rect x="250" y="0" width="130" height="28" rx="4" fill="#1e293b" stroke="#475569"/>
                            <text x="315" y="18" fill="#f59e0b" font-size="10" text-anchor="middle" font-family="monospace">
                                <tspan fill="#22c55e">0101</tspan> <tspan fill="#3b82f6">1001</tspan>
                            </text>

                            <text x="440" y="18" fill="#94a3b8" font-size="10" text-anchor="middle">åˆ†å¯„å­˜å™¨</text>
                        </g>

                        <!-- æ—¶ -->
                        <g transform="translate(0, 130)">
                            <rect x="55" y="0" width="50" height="28" rx="4" fill="#3b82f6"/>
                            <text x="80" y="20" fill="white" font-size="14" text-anchor="middle" font-weight="bold">23</text>

                            <text x="130" y="18" fill="#64748b" font-size="14">â†’</text>

                            <rect x="150" y="0" width="60" height="28" rx="4" fill="#22c55e"/>
                            <text x="180" y="20" fill="white" font-size="12" text-anchor="middle" font-weight="bold">0x23</text>

                            <text x="230" y="18" fill="#64748b" font-size="14">=</text>

                            <rect x="250" y="0" width="130" height="28" rx="4" fill="#1e293b" stroke="#475569"/>
                            <text x="315" y="18" fill="#f59e0b" font-size="10" text-anchor="middle" font-family="monospace">
                                <tspan fill="#22c55e">0010</tspan> <tspan fill="#3b82f6">0011</tspan>
                            </text>

                            <text x="440" y="18" fill="#94a3b8" font-size="10" text-anchor="middle">æ—¶å¯„å­˜å™¨</text>
                        </g>

                        <!-- æ³¨æ„ -->
                        <rect x="30" y="168" width="440" height="25" rx="5" fill="#ef4444" opacity="0.2"/>
                        <text x="250" y="185" fill="#fca5a5" font-size="10" text-anchor="middle">
                            âš ï¸ æ³¨æ„ï¼šåè¿›åˆ¶ 23 çš„ BCD æ˜¯ 0x23ï¼Œä¸æ˜¯äºŒè¿›åˆ¶çš„ 0x17 (10111)ï¼
                        </text>
                    </svg>
                </div>

                <div class="code-block">
                    <div class="code-header">
                        <span class="code-lang">C51 - BCD è½¬æ¢å‡½æ•°</span>
                        <button class="copy-btn" onclick="copyCode(this)">å¤åˆ¶</button>
                    </div>
                    <pre><code>// åè¿›åˆ¶ â†’ BCDï¼ˆå†™å…¥ DS1302 å‰è½¬æ¢ï¼‰
unsigned char dec_to_bcd(unsigned char dec) {
    return ((dec / 10) &lt;&lt; 4) | (dec % 10);
}

// BCD â†’ åè¿›åˆ¶ï¼ˆä» DS1302 è¯»å‡ºåè½¬æ¢ï¼‰
unsigned char bcd_to_dec(unsigned char bcd) {
    return (bcd >> 4) * 10 + (bcd & 0x0F);
}</code></pre>
                </div>

                <h4 style="margin: 1.5rem 0 0.5rem; color: var(--primary);">å®Œæ•´é©±åŠ¨ç¤ºä¾‹</h4>
                <div class="code-block">
                    <div class="code-header">
                        <span class="code-lang">C51 - DS1302 å®Œæ•´é©±åŠ¨</span>
                        <button class="copy-btn" onclick="copyCode(this)">å¤åˆ¶</button>
                    </div>
                    <pre><code>#include &lt;reg52.h&gt;

sbit CE   = P3^5;
sbit IO   = P3^4;
sbit SCLK = P3^6;

// å†™ä¸€ä¸ªå­—èŠ‚
void ds1302_write_byte(unsigned char dat) {
    unsigned char i;
    for(i = 0; i < 8; i++) {
        IO = dat & 0x01;
        SCLK = 1; SCLK = 0;
        dat >>= 1;
    }
}

// è¯»ä¸€ä¸ªå­—èŠ‚
unsigned char ds1302_read_byte() {
    unsigned char i, dat = 0;
    for(i = 0; i < 8; i++) {
        dat >>= 1;
        if(IO) dat |= 0x80;
        SCLK = 1; SCLK = 0;
    }
    return dat;
}

// å†™å¯„å­˜å™¨
void ds1302_write(unsigned char addr, unsigned char dat) {
    CE = 0; SCLK = 0;
    CE = 1;
    ds1302_write_byte(addr);  // å‘å‘½ä»¤
    ds1302_write_byte(dat);   // å‘æ•°æ®
    CE = 0;
}

// è¯»å¯„å­˜å™¨
unsigned char ds1302_read(unsigned char addr) {
    unsigned char dat;
    CE = 0; SCLK = 0;
    CE = 1;
    ds1302_write_byte(addr | 0x01);  // å‘è¯»å‘½ä»¤
    dat = ds1302_read_byte();
    CE = 0;
    return dat;
}

// ä½¿ç”¨ç¤ºä¾‹
void main() {
    unsigned char hour, min, sec;

    ds1302_write(0x8E, 0x00);  // å…³é—­å†™ä¿æŠ¤
    ds1302_write(0x80, 0x00);  // ç§’=0ï¼Œå¯åŠ¨æ—¶é’Ÿ
    ds1302_write(0x82, 0x30);  // åˆ†=30
    ds1302_write(0x84, 0x12);  // æ—¶=12
    ds1302_write(0x8E, 0x80);  // å¼€å¯å†™ä¿æŠ¤

    while(1) {
        sec  = ds1302_read(0x81);  // è¯»ç§’ï¼ˆBCDï¼‰
        min  = ds1302_read(0x83);  // è¯»åˆ†ï¼ˆBCDï¼‰
        hour = ds1302_read(0x85);  // è¯»æ—¶ï¼ˆBCDï¼‰
        // æ˜¾ç¤ºåˆ°æ•°ç ç®¡ï¼ˆéœ€è½¬æˆåè¿›åˆ¶ï¼‰
    }
}</code></pre>
                </div>

                <h4 style="margin: 1.5rem 0 0.5rem; color: var(--primary);">å¤–è®¾èŠ¯ç‰‡æ‰‹å†Œé˜…è¯»æŠ€å·§æ€»ç»“</h4>
                <div class="table-wrapper">
                    <table>
                        <tr>
                            <th>ç« èŠ‚</th>
                            <th>å…³æ³¨ç‚¹</th>
                            <th>ä»€ä¹ˆæ—¶å€™çœ‹</th>
                        </tr>
                        <tr><td><strong>Features</strong></td><td>èŠ¯ç‰‡åŠŸèƒ½ã€ç”µå‹èŒƒå›´</td><td>é€‰å‹æ—¶</td></tr>
                        <tr><td><strong>Pin Description</strong></td><td>æ¯ä¸ªå¼•è„šåŠŸèƒ½</td><td>ç”»åŸç†å›¾æ—¶</td></tr>
                        <tr><td><strong>Typical Circuit</strong></td><td>æ¥çº¿å‚è€ƒç”µè·¯</td><td>ç”»åŸç†å›¾æ—¶</td></tr>
                        <tr><td><strong>Timing Diagram</strong></td><td>é€šä¿¡æ—¶åºï¼ˆâ­æœ€é‡è¦ï¼‰</td><td>å†™é©±åŠ¨æ—¶</td></tr>
                        <tr><td><strong>Command/Register</strong></td><td>å‘½ä»¤æ ¼å¼ã€å¯„å­˜å™¨åœ°å€</td><td>å†™é©±åŠ¨æ—¶</td></tr>
                        <tr><td><strong>Electrical Specs</strong></td><td>ç”µå‹ç”µæµæ—¶åºå‚æ•°</td><td>è°ƒè¯•é—®é¢˜æ—¶</td></tr>
                    </table>
                </div>

                <div class="info-card danger">
                    <div class="info-card-title"><span class="icon">âš ï¸</span> æ–°æ‰‹å¸¸è§å‘</div>
                    <ul>
                        <li><strong>æ—¶åºæ–¹å‘æå</strong> â†’ ä»”ç»†çœ‹"ä¸Šå‡æ²¿é‡‡æ ·"è¿˜æ˜¯"ä¸‹é™æ²¿"</li>
                        <li><strong>MSB/LSB é¡ºåº</strong> â†’ DS1302 æ˜¯ LSB å…ˆå‘</li>
                        <li><strong>BCD ç¼–ç å¿˜è½¬æ¢</strong> â†’ è¯»å‡º 0x23 ä¸æ˜¯åè¿›åˆ¶ 23</li>
                        <li><strong>å†™ä¿æŠ¤æ²¡å…³</strong> â†’ DS1302 éœ€å…ˆå†™ 0x8E=0x00</li>
                        <li><strong>CE æ—¶åºä¸å¯¹</strong> â†’ CE è¦åœ¨ SCLK ä¹‹å‰æ‹‰é«˜</li>
                    </ul>
                </div>

                <div class="collapsible">
                    <div class="collapsible-header" onclick="toggleCollapsible(this.parentElement)">
                        <span>ğŸ“ ç»ƒä¹ ï¼šå¦‚ä½•è®¾ç½® DS1302 æ—¶é—´ä¸º 14:30:00ï¼Ÿ</span>
                        <span class="arrow">â–¼</span>
                    </div>
                    <div class="collapsible-content">
                        <div class="code-block">
                            <div class="code-header">
                                <span class="code-lang">C51</span>
                                <button class="copy-btn" onclick="copyCode(this)">å¤åˆ¶</button>
                            </div>
                            <pre><code>ds1302_write(0x8E, 0x00);  // å…³é—­å†™ä¿æŠ¤
ds1302_write(0x80, 0x00);  // ç§’ = 00ï¼ˆBCDï¼‰
ds1302_write(0x82, 0x30);  // åˆ† = 30ï¼ˆBCDï¼‰
ds1302_write(0x84, 0x14);  // æ—¶ = 14ï¼ˆBCDï¼‰
ds1302_write(0x8E, 0x80);  // å¼€å¯å†™ä¿æŠ¤</code></pre>
                        </div>
                        <p><strong>æ³¨æ„ï¼š</strong>æ—¶é—´å€¼æ˜¯ BCD ç¼–ç ï¼Œ14:30:00 å†™å…¥ 0x14ã€0x30ã€0x00</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- é€šä¿¡åè®® -->
        <section class="section" id="protocol">
            <header class="section-header">
                <span class="section-icon">ğŸ“¡</span>
                <h2 class="section-title">é€šä¿¡åè®®è¯¦è§£</h2>
            </header>

            <p>æŒæ¡äº†å‰é¢çš„æ•°ç”µåŸºç¡€å’ŒèŠ¯ç‰‡æ‰‹å†Œé˜…è¯»æ–¹æ³•ï¼Œç°åœ¨å¯ä»¥å­¦ä¹ æœ€å®ç”¨çš„<strong>é€šä¿¡åè®®</strong>äº†ï¼</p>

            <div class="info-card info">
                <div class="info-card-title"><span class="icon">ğŸ’¡</span> ä¸ºä»€ä¹ˆè¦å­¦é€šä¿¡åè®®ï¼Ÿ</div>
                <p>å•ç‰‡æœºéœ€è¦å’Œå„ç§å¤–è®¾ï¼ˆä¼ æ„Ÿå™¨ã€æ˜¾ç¤ºå±ã€å­˜å‚¨å™¨ï¼‰"å¯¹è¯"ï¼Œé€šä¿¡åè®®å°±æ˜¯åŒæ–¹çº¦å®šçš„"è¯­è¨€è§„åˆ™"ã€‚</p>
            </div>

            <div class="subsection" id="protocol-overview">
                <h3 class="subsection-title">4.1 å¸¸ç”¨åè®®å¯¹æ¯”</h3>

                <div class="table-wrapper">
                    <table>
                        <tr>
                            <th>åè®®</th>
                            <th>ä¿¡å·çº¿</th>
                            <th>é€Ÿåº¦</th>
                            <th>è®¾å¤‡æ•°</th>
                            <th>å…¸å‹åº”ç”¨</th>
                        </tr>
                        <tr>
                            <td><strong>UART</strong></td>
                            <td>2 çº¿ï¼ˆTX/RXï¼‰</td>
                            <td>è¾ƒæ…¢ï¼ˆ9600-115200bpsï¼‰</td>
                            <td>ç‚¹å¯¹ç‚¹</td>
                            <td>è°ƒè¯•ä¸²å£ã€GPSã€è“ç‰™æ¨¡å—</td>
                        </tr>
                        <tr>
                            <td><strong>I2C</strong></td>
                            <td>2 çº¿ï¼ˆSCL/SDAï¼‰</td>
                            <td>ä¸­ç­‰ï¼ˆ100k-400kHzï¼‰</td>
                            <td>å¤šè®¾å¤‡ï¼ˆåœ°å€åŒºåˆ†ï¼‰</td>
                            <td>EEPROMã€æ¸©æ¹¿åº¦ä¼ æ„Ÿå™¨ã€OLED</td>
                        </tr>
                        <tr>
                            <td><strong>SPI</strong></td>
                            <td>4 çº¿ï¼ˆSCK/MOSI/MISO/CSï¼‰</td>
                            <td>å¿«ï¼ˆå¯è¾¾ MHz çº§ï¼‰</td>
                            <td>å¤šè®¾å¤‡ï¼ˆCS é€‰æ‹©ï¼‰</td>
                            <td>Flashã€SD å¡ã€TFT å±å¹•</td>
                        </tr>
                        <tr>
                            <td><strong>1-Wire</strong></td>
                            <td>1 çº¿ï¼ˆDQï¼‰</td>
                            <td>æ…¢</td>
                            <td>å¤šè®¾å¤‡</td>
                            <td>DS18B20 æ¸©åº¦ä¼ æ„Ÿå™¨</td>
                        </tr>
                    </table>
                </div>

                <!-- ç¾åŒ–çš„åè®®é€‰æ‹©æµç¨‹å›¾ -->
                <div class="svg-diagram">
                    <div class="diagram-title">é€‰æ‹©é€šä¿¡åè®®çš„ç®€å•åŸåˆ™</div>
                    <svg width="550" height="140" viewBox="0 0 550 140">
                        <rect width="550" height="140" fill="#0f172a" rx="8"/>

                        <!-- UART -->
                        <g transform="translate(25, 25)">
                            <rect x="0" y="0" width="110" height="90" rx="8" fill="#3b82f6" opacity="0.2" stroke="#3b82f6" stroke-width="2"/>
                            <text x="55" y="25" fill="#60a5fa" font-size="10" text-anchor="middle" font-weight="bold">ğŸ”Œ UART</text>
                            <text x="55" y="45" fill="#94a3b8" font-size="9" text-anchor="middle">è°ƒè¯•/æ‰“å°</text>
                            <text x="55" y="60" fill="#94a3b8" font-size="9" text-anchor="middle">æœ€ç®€å•</text>
                            <rect x="20" y="70" width="70" height="16" rx="4" fill="#3b82f6"/>
                            <text x="55" y="82" fill="white" font-size="8" text-anchor="middle">2çº¿ + GND</text>
                        </g>

                        <!-- I2C -->
                        <g transform="translate(155, 25)">
                            <rect x="0" y="0" width="110" height="90" rx="8" fill="#22c55e" opacity="0.2" stroke="#22c55e" stroke-width="2"/>
                            <text x="55" y="25" fill="#4ade80" font-size="10" text-anchor="middle" font-weight="bold">ğŸ”— I2C</text>
                            <text x="55" y="45" fill="#94a3b8" font-size="9" text-anchor="middle">æ¥ä¼ æ„Ÿå™¨</text>
                            <text x="55" y="60" fill="#94a3b8" font-size="9" text-anchor="middle">å¯æŒ‚å¤šä¸ªè®¾å¤‡</text>
                            <rect x="20" y="70" width="70" height="16" rx="4" fill="#22c55e"/>
                            <text x="55" y="82" fill="white" font-size="8" text-anchor="middle">2çº¿ + GND</text>
                        </g>

                        <!-- SPI -->
                        <g transform="translate(285, 25)">
                            <rect x="0" y="0" width="110" height="90" rx="8" fill="#f59e0b" opacity="0.2" stroke="#f59e0b" stroke-width="2"/>
                            <text x="55" y="25" fill="#fbbf24" font-size="10" text-anchor="middle" font-weight="bold">âš¡ SPI</text>
                            <text x="55" y="45" fill="#94a3b8" font-size="9" text-anchor="middle">å­˜å‚¨å™¨/å±å¹•</text>
                            <text x="55" y="60" fill="#94a3b8" font-size="9" text-anchor="middle">é€Ÿåº¦å¿«</text>
                            <rect x="20" y="70" width="70" height="16" rx="4" fill="#f59e0b"/>
                            <text x="55" y="82" fill="white" font-size="8" text-anchor="middle">4çº¿ + GND</text>
                        </g>

                        <!-- 1-Wire -->
                        <g transform="translate(415, 25)">
                            <rect x="0" y="0" width="110" height="90" rx="8" fill="#8b5cf6" opacity="0.2" stroke="#8b5cf6" stroke-width="2"/>
                            <text x="55" y="25" fill="#a78bfa" font-size="10" text-anchor="middle" font-weight="bold">ğŸŒ¡ï¸ 1-Wire</text>
                            <text x="55" y="45" fill="#94a3b8" font-size="9" text-anchor="middle">æ¸©åº¦ä¼ æ„Ÿå™¨</text>
                            <text x="55" y="60" fill="#94a3b8" font-size="9" text-anchor="middle">çº¿æœ€å°‘</text>
                            <rect x="20" y="70" width="70" height="16" rx="4" fill="#8b5cf6"/>
                            <text x="55" y="82" fill="white" font-size="8" text-anchor="middle">1çº¿ + GND</text>
                        </g>
                    </svg>
                </div>
            </div>

            <div class="subsection" id="protocol-uart">
                <h3 class="subsection-title">4.2 UARTï¼ˆä¸²å£é€šä¿¡ï¼‰</h3>

                <p>UART æ˜¯æœ€ç®€å•ã€æœ€å¸¸ç”¨çš„é€šä¿¡åè®®ï¼Œ51å•ç‰‡æœºå†…ç½®ç¡¬ä»¶æ”¯æŒã€‚</p>

                <h4 style="margin: 1rem 0 0.5rem; color: var(--primary);">åŸºæœ¬æ¦‚å¿µ</h4>
                <!-- ç¾åŒ–çš„UARTè¿æ¥å›¾ -->
                <div class="svg-diagram">
                    <div class="diagram-title">UART è¿æ¥æ–¹å¼ï¼ˆäº¤å‰è¿æ¥ï¼‰</div>
                    <svg width="500" height="200" viewBox="0 0 500 200">
                        <rect width="500" height="200" fill="#0f172a" rx="8"/>

                        <!-- è®¾å¤‡A -->
                        <rect x="50" y="40" width="100" height="120" rx="10" fill="#3b82f6" stroke="#60a5fa" stroke-width="2"/>
                        <text x="100" y="70" fill="white" font-size="12" text-anchor="middle" font-weight="bold">è®¾å¤‡ A</text>
                        <text x="100" y="90" fill="#93c5fd" font-size="9" text-anchor="middle">51å•ç‰‡æœº</text>

                        <!-- è®¾å¤‡Aå¼•è„š -->
                        <rect x="150" y="95" width="25" height="16" rx="3" fill="#22c55e"/>
                        <text x="135" y="107" fill="#86efac" font-size="9" text-anchor="end">TX</text>
                        <rect x="150" y="115" width="25" height="16" rx="3" fill="#f59e0b"/>
                        <text x="135" y="127" fill="#fcd34d" font-size="9" text-anchor="end">RX</text>
                        <rect x="150" y="135" width="25" height="16" rx="3" fill="#475569"/>
                        <text x="135" y="147" fill="#94a3b8" font-size="9" text-anchor="end">GND</text>

                        <!-- è®¾å¤‡B -->
                        <rect x="350" y="40" width="100" height="120" rx="10" fill="#22c55e" stroke="#4ade80" stroke-width="2"/>
                        <text x="400" y="70" fill="white" font-size="12" text-anchor="middle" font-weight="bold">è®¾å¤‡ B</text>
                        <text x="400" y="90" fill="#bbf7d0" font-size="9" text-anchor="middle">PC/æ¨¡å—</text>

                        <!-- è®¾å¤‡Bå¼•è„š -->
                        <rect x="325" y="95" width="25" height="16" rx="3" fill="#f59e0b"/>
                        <text x="365" y="107" fill="#fcd34d" font-size="9">RX</text>
                        <rect x="325" y="115" width="25" height="16" rx="3" fill="#22c55e"/>
                        <text x="365" y="127" fill="#86efac" font-size="9">TX</text>
                        <rect x="325" y="135" width="25" height="16" rx="3" fill="#475569"/>
                        <text x="365" y="147" fill="#94a3b8" font-size="9">GND</text>

                        <!-- äº¤å‰è¿çº¿ -->
                        <path d="M 175 103 C 220 103, 230 103, 250 115 C 270 127, 280 103, 325 103" fill="none" stroke="#22c55e" stroke-width="3"/>
                        <path d="M 175 123 C 220 123, 230 123, 250 111 C 270 99, 280 123, 325 123" fill="none" stroke="#f59e0b" stroke-width="3"/>
                        <line x1="175" y1="143" x2="325" y2="143" stroke="#64748b" stroke-width="3"/>

                        <!-- äº¤å‰æ ‡è®° -->
                        <text x="250" y="90" fill="#ef4444" font-size="10" text-anchor="middle" font-weight="bold">âœ• äº¤å‰</text>

                        <!-- GNDè¯´æ˜ -->
                        <text x="250" y="160" fill="#fca5a5" font-size="9" text-anchor="middle">âš ï¸ å¿…é¡»å…±åœ°ï¼</text>

                        <!-- å‚æ•°è¯´æ˜ -->
                        <g transform="translate(50, 175)" font-size="8" fill="#94a3b8">
                            <text x="0" y="0">æ³¢ç‰¹ç‡: 9600bps</text>
                            <text x="110" y="0">æ•°æ®ä½: 8ä½</text>
                            <text x="200" y="0">åœæ­¢ä½: 1ä½</text>
                            <text x="290" y="0">æ ¡éªŒ: None</text>
                        </g>
                    </svg>
                </div>

                <h4 style="margin: 1.5rem 0 0.5rem; color: var(--primary);">å¸§æ ¼å¼</h4>
                <!-- ç¾åŒ–çš„UARTå¸§æ ¼å¼å›¾ -->
                <div class="svg-diagram">
                    <div class="diagram-title">UART ä¸€å¸§æ•°æ®ï¼ˆ8N1 æ ¼å¼ï¼‰- å‘é€å­—ç¬¦ 'A' (0x41)</div>
                    <svg width="600" height="180" viewBox="0 0 600 180">
                        <rect width="600" height="180" fill="#0f172a" rx="8"/>

                        <!-- æ³¢å½¢ -->
                        <path d="M 30 50 L 55 50 L 55 90 L 100 90 L 100 50 L 145 50 L 145 90 L 190 90 L 190 90 L 235 90 L 235 90 L 280 90 L 280 90 L 325 90 L 325 50 L 370 50 L 370 90 L 415 90 L 415 50 L 460 50 L 460 50 L 570 50"
                              fill="none" stroke="#22c55e" stroke-width="3" stroke-linecap="square"/>

                        <!-- é«˜ä½ç”µå¹³åŒºåŸŸå¡«å…… -->
                        <rect x="55" y="50" width="45" height="40" fill="#ef4444" opacity="0.15"/>
                        <rect x="100" y="50" width="45" height="40" fill="#22c55e" opacity="0.15"/>

                        <!-- ä½æ ‡ç­¾ -->
                        <g font-size="9" text-anchor="middle">
                            <text x="42" y="30" fill="#22c55e">ç©ºé—²</text>
                            <text x="77" y="30" fill="#ef4444" font-weight="bold">èµ·å§‹</text>
                            <text x="122" y="30" fill="#f59e0b">D0</text>
                            <text x="167" y="30" fill="#f59e0b">D1</text>
                            <text x="212" y="30" fill="#f59e0b">D2</text>
                            <text x="257" y="30" fill="#f59e0b">D3</text>
                            <text x="302" y="30" fill="#f59e0b">D4</text>
                            <text x="347" y="30" fill="#f59e0b">D5</text>
                            <text x="392" y="30" fill="#f59e0b">D6</text>
                            <text x="437" y="30" fill="#f59e0b">D7</text>
                            <text x="480" y="30" fill="#22c55e" font-weight="bold">åœæ­¢</text>
                            <text x="530" y="30" fill="#22c55e">ç©ºé—²</text>
                        </g>

                        <!-- ä½å€¼ -->
                        <g font-size="11" font-weight="bold" text-anchor="middle">
                            <text x="42" y="75" fill="#22c55e">1</text>
                            <text x="77" y="75" fill="#ef4444">0</text>
                            <text x="122" y="75" fill="#22c55e">1</text>
                            <text x="167" y="75" fill="#3b82f6">0</text>
                            <text x="212" y="75" fill="#3b82f6">0</text>
                            <text x="257" y="75" fill="#3b82f6">0</text>
                            <text x="302" y="75" fill="#3b82f6">0</text>
                            <text x="347" y="75" fill="#22c55e">1</text>
                            <text x="392" y="75" fill="#3b82f6">0</text>
                            <text x="437" y="75" fill="#22c55e">1</text>
                            <text x="480" y="75" fill="#22c55e">1</text>
                        </g>

                        <!-- 8ä½æ•°æ®èŒƒå›´ -->
                        <line x1="100" y1="105" x2="460" y2="105" stroke="#f59e0b" stroke-width="1"/>
                        <line x1="100" y1="100" x2="100" y2="110" stroke="#f59e0b" stroke-width="2"/>
                        <line x1="460" y1="100" x2="460" y2="110" stroke="#f59e0b" stroke-width="2"/>
                        <text x="280" y="120" fill="#f59e0b" font-size="9" text-anchor="middle">â† 8ä½æ•°æ® (LSBå…ˆå‘) â†’</text>

                        <!-- è§£é‡Š -->
                        <rect x="30" y="135" width="540" height="35" rx="5" fill="#1e293b" stroke="#334155"/>
                        <text x="45" y="157" fill="#94a3b8" font-size="9">
                            <tspan fill="#ec4899" font-weight="bold">'A'</tspan>
                            <tspan> = 0x41 = 0b0</tspan>
                            <tspan fill="#22c55e">1</tspan>
                            <tspan>00000</tspan>
                            <tspan fill="#22c55e">1</tspan>
                            <tspan dx="15">| æ¯ä½æ—¶é—´ = 1/9600 â‰ˆ </tspan>
                            <tspan fill="#f59e0b" font-weight="bold">104Î¼s</tspan>
                            <tspan dx="15">| ä¸€å¸§ = 10ä½ â‰ˆ 1.04ms</tspan>
                        </text>
                    </svg>
                </div>

                <h4 style="margin: 1.5rem 0 0.5rem; color: var(--primary);">51å•ç‰‡æœº UART é…ç½®</h4>
                <div class="code-block">
                    <div class="code-header">
                        <span class="code-lang">C51 - UART åˆå§‹åŒ–ä¸æ”¶å‘</span>
                        <button class="copy-btn" onclick="copyCode(this)">å¤åˆ¶</button>
                    </div>
                    <pre><code>#include &lt;reg52.h&gt;

// UART åˆå§‹åŒ–ï¼ˆ9600bpsï¼Œ11.0592MHz æ™¶æŒ¯ï¼‰
void uart_init() {
    SCON = 0x50;   // æ¨¡å¼1ï¼Œ8ä½æ•°æ®ï¼Œå…è®¸æ¥æ”¶
    TMOD &= 0x0F;  // æ¸…é™¤å®šæ—¶å™¨1è®¾ç½®
    TMOD |= 0x20;  // å®šæ—¶å™¨1ï¼Œæ¨¡å¼2ï¼ˆè‡ªåŠ¨é‡è£…ï¼‰
    TH1 = 0xFD;    // æ³¢ç‰¹ç‡ 9600
    TL1 = 0xFD;
    TR1 = 1;       // å¯åŠ¨å®šæ—¶å™¨1
}

// å‘é€ä¸€ä¸ªå­—èŠ‚
void uart_send_byte(unsigned char dat) {
    SBUF = dat;       // æ•°æ®æ”¾å…¥å‘é€ç¼“å†²åŒº
    while(!TI);       // ç­‰å¾…å‘é€å®Œæˆ
    TI = 0;           // æ¸…é™¤å‘é€æ ‡å¿—
}

// å‘é€å­—ç¬¦ä¸²
void uart_send_string(char *str) {
    while(*str) {
        uart_send_byte(*str++);
    }
}

// æ¥æ”¶ä¸€ä¸ªå­—èŠ‚ï¼ˆæŸ¥è¯¢æ–¹å¼ï¼‰
unsigned char uart_recv_byte() {
    while(!RI);       // ç­‰å¾…æ¥æ”¶å®Œæˆ
    RI = 0;           // æ¸…é™¤æ¥æ”¶æ ‡å¿—
    return SBUF;      // è¿”å›æ¥æ”¶æ•°æ®
}

void main() {
    uart_init();
    uart_send_string("Hello, 51!\r\n");

    while(1) {
        unsigned char ch = uart_recv_byte();
        uart_send_byte(ch);  // å›æ˜¾
    }
}</code></pre>
                </div>

                <div class="info-card tip">
                    <div class="info-card-title"><span class="icon">ğŸ’¡</span> å¸¸ç”¨æ³¢ç‰¹ç‡é…ç½®ï¼ˆ11.0592MHzï¼‰</div>
                    <div class="table-wrapper">
                        <table>
                            <tr><th>æ³¢ç‰¹ç‡</th><th>TH1</th><th>SMOD</th></tr>
                            <tr><td>9600</td><td>0xFD</td><td>0</td></tr>
                            <tr><td>4800</td><td>0xFA</td><td>0</td></tr>
                            <tr><td>2400</td><td>0xF4</td><td>0</td></tr>
                            <tr><td>19200</td><td>0xFD</td><td>1</td></tr>
                        </table>
                    </div>
                </div>

                <h4 style="margin: 1.5rem 0 0.5rem; color: var(--primary);">printf ä¸²å£é‡å®šå‘ï¼ˆé‡ç‚¹ï¼‰</h4>

                <p>é€šè¿‡é‡å®šå‘ <code>putchar</code> å‡½æ•°ï¼Œå¯ä»¥è®© <code>printf</code> ç›´æ¥é€šè¿‡ä¸²å£è¾“å‡ºï¼Œæ–¹ä¾¿è°ƒè¯•ã€‚</p>

                <div class="info-card tip">
                    <div class="info-card-title"><span class="icon">ğŸ”„</span> é‡å®šå‘åŸç†</div>
                    <!-- ç¾åŒ–çš„printfè°ƒç”¨é“¾å›¾ -->
                    <div class="svg-diagram" style="margin: 1rem 0; padding: 1rem;">
                        <svg width="450" height="220" viewBox="0 0 450 220">
                            <rect width="450" height="220" fill="#0f172a" rx="8"/>

                            <!-- Step 1: printfè°ƒç”¨ -->
                            <rect x="125" y="15" width="200" height="35" rx="6" fill="#3b82f6"/>
                            <text x="225" y="38" fill="white" font-size="10" text-anchor="middle" font-family="monospace">printf("Val: %d", 123)</text>

                            <!-- ç®­å¤´1 -->
                            <polygon points="225,55 220,65 230,65" fill="#64748b"/>

                            <!-- Step 2: æ ¼å¼åŒ– -->
                            <rect x="100" y="70" width="250" height="40" rx="6" fill="#22c55e"/>
                            <text x="225" y="87" fill="white" font-size="10" text-anchor="middle" font-weight="bold">æ ¼å¼åŒ–å­—ç¬¦ä¸²</text>
                            <text x="225" y="102" fill="#bbf7d0" font-size="9" text-anchor="middle">"Val: %d" + 123 â†’ "Val: 123"</text>

                            <!-- ç®­å¤´2 -->
                            <polygon points="225,115 220,125 230,125" fill="#64748b"/>

                            <!-- Step 3: putchar -->
                            <rect x="100" y="130" width="250" height="40" rx="6" fill="#f59e0b"/>
                            <text x="225" y="147" fill="white" font-size="10" text-anchor="middle" font-weight="bold">é€å­—ç¬¦è°ƒç”¨ putchar()</text>
                            <text x="225" y="162" fill="#fef3c7" font-size="9" text-anchor="middle">putchar('V') â†’ putchar('a') â†’ ...</text>

                            <!-- ç®­å¤´3 -->
                            <polygon points="225,175 220,185 230,185" fill="#64748b"/>

                            <!-- Step 4: é‡å®šå‘ -->
                            <rect x="75" y="190" width="300" height="25" rx="6" fill="#8b5cf6"/>
                            <text x="225" y="207" fill="white" font-size="9" text-anchor="middle" font-family="monospace">SBUF = ch; while(!TI); TI = 0; â†’ ä¸²å£è¾“å‡º</text>

                            <!-- æ ‡ç­¾ -->
                            <text x="365" y="38" fill="#64748b" font-size="8">ç”¨æˆ·ä»£ç </text>
                            <text x="365" y="93" fill="#64748b" font-size="8">Cåº“å†…éƒ¨</text>
                            <text x="365" y="153" fill="#64748b" font-size="8">Cåº“å†…éƒ¨</text>
                            <text x="385" y="207" fill="#c4b5fd" font-size="8" font-weight="bold">é‡å†™ï¼</text>
                        </svg>
                    </div>
                </div>

                <div class="code-block">
                    <div class="code-header">
                        <span class="code-lang">C51 - printf é‡å®šå‘å®ç°</span>
                        <button class="copy-btn" onclick="copyCode(this)">å¤åˆ¶</button>
                    </div>
                    <pre><code>#include &lt;STC15F2K60S2.H&gt;
#include &lt;stdio.h&gt;

// UART åˆå§‹åŒ–ï¼ˆ9600bpsï¼Œ12MHzï¼Œä½¿ç”¨å®šæ—¶å™¨2ï¼‰
void Uart1_Init(void) {
    SCON = 0x50;      // 8ä½æ•°æ®ï¼Œå¯å˜æ³¢ç‰¹ç‡
    AUXR |= 0x01;     // ä¸²å£1é€‰æ‹©å®šæ—¶å™¨2ä¸ºæ³¢ç‰¹ç‡å‘ç”Ÿå™¨
    AUXR &= 0xFB;     // å®šæ—¶å™¨æ—¶é’Ÿ12Tæ¨¡å¼
    T2L = 0xE6;       // è®¾å®šå®šæ—¶åˆå§‹å€¼
    T2H = 0xFF;       // è®¾å®šå®šæ—¶åˆå§‹å€¼
    AUXR |= 0x10;     // å®šæ—¶å™¨2å¼€å§‹è®¡æ—¶
    ES = 1;           // ä½¿èƒ½ä¸²å£1ä¸­æ–­
    EA = 1;           // å¼€æ€»ä¸­æ–­
}

/*=====================================================
 * ä¸²å£é‡å®šå‘ - æ ¸å¿ƒä»£ç 
 * é‡å†™ putchar å‡½æ•°ï¼Œä½¿ printf è¾“å‡ºåˆ°ä¸²å£
 *====================================================*/
extern char putchar(char ch)
{
    SBUF = ch;        // å°†å­—ç¬¦å†™å…¥å‘é€ç¼“å†²åŒº
    while(TI == 0);   // ç­‰å¾…å‘é€å®Œæˆï¼ˆTI=1 è¡¨ç¤ºå‘é€å®Œæ¯•ï¼‰
    TI = 0;           // æ‰‹åŠ¨æ¸…é™¤å‘é€å®Œæˆæ ‡å¿—
    return ch;        // è¿”å›å‘é€çš„å­—ç¬¦ï¼ˆæ ‡å‡†è¦æ±‚ï¼‰
}

void main() {
    unsigned char count = 0;

    Uart1_Init();

    printf("System Start!\r\n");

    while(1) {
        printf("Count: %bu\r\n", count++);  // %bu æ˜¯ Keil ç‰¹æœ‰æ ¼å¼
        // å»¶æ—¶...
    }
}</code></pre>
                </div>

                <div class="info-card warning">
                    <div class="info-card-title"><span class="icon">âš ï¸</span> æ³¨æ„äº‹é¡¹</div>
                    <ul style="margin: 0.5rem 0; padding-left: 1.5rem;">
                        <li><strong>%bu / %bd</strong>ï¼šKeil C51 ç‰¹æœ‰æ ¼å¼ç¬¦ï¼Œç”¨äº unsigned char / signed char</li>
                        <li><strong>ä»£ç ä½“ç§¯</strong>ï¼šprintf çº¦å ç”¨ 1-2KB ROMï¼Œèµ„æºç´§å¼ æ—¶è€ƒè™‘ç›´æ¥å‘é€</li>
                        <li><strong>é˜»å¡ç­‰å¾…</strong>ï¼š<code>while(TI==0)</code> ä¼šé˜»å¡ï¼Œé«˜é¢‘è°ƒç”¨å½±å“å®æ—¶æ€§</li>
                        <li><strong>\r\n</strong>ï¼šWindows é£æ ¼æ¢è¡Œï¼Œä¸²å£åŠ©æ‰‹æ˜¾ç¤ºæ›´è§„èŒƒ</li>
                    </ul>
                </div>

                <div class="code-block">
                    <div class="code-header">
                        <span class="code-lang">C51 - å¸¦è¶…æ—¶ä¿æŠ¤çš„ putcharï¼ˆæ›´å¥å£®ï¼‰</span>
                        <button class="copy-btn" onclick="copyCode(this)">å¤åˆ¶</button>
                    </div>
                    <pre><code>/*=====================================================
 * å¸¦è¶…æ—¶ä¿æŠ¤çš„ä¸²å£é‡å®šå‘
 * é¿å…ç¡¬ä»¶æ•…éšœæ—¶ç¨‹åºå¡æ­»
 *====================================================*/
extern int putchar(int ch)
{
    unsigned int timeout = 10000;  // è¶…æ—¶è®¡æ•°

    SBUF = ch;
    while(TI == 0) {
        if(--timeout == 0)
            return EOF;  // è¶…æ—¶è¿”å›é”™è¯¯ï¼ˆEOF = -1ï¼‰
    }
    TI = 0;
    return ch;  // æˆåŠŸè¿”å›å­—ç¬¦
}

// ä½¿ç”¨ç¤ºä¾‹
void debug_print() {
    int result = printf("Test\r\n");
    if(result < 0) {
        // å‘é€å¤±è´¥å¤„ç†...
    }
}</code></pre>
                </div>

                <div class="info-card tip">
                    <div class="info-card-title"><span class="icon">ğŸ“</span> putchar è¿”å›å€¼è¯´æ˜</div>
                    <div class="table-wrapper">
                        <table>
                            <tr><th>è¿”å›å€¼</th><th>å«ä¹‰</th><th>ç”¨é€”</th></tr>
                            <tr><td>chï¼ˆå­—ç¬¦æœ¬èº«ï¼‰</td><td>å‘é€æˆåŠŸ</td><td>ç¡®è®¤è¾“å‡ºå®Œæˆ</td></tr>
                            <tr><td>EOFï¼ˆ-1ï¼‰</td><td>å‘é€å¤±è´¥</td><td>è§¦å‘é”™è¯¯å¤„ç†</td></tr>
                        </table>
                    </div>
                    <p style="margin-top: 0.5rem; font-size: 0.9rem;">
                        <strong>ä¸ºä»€ä¹ˆç”¨ int è€Œä¸æ˜¯ charï¼Ÿ</strong><br>
                        å› ä¸º EOF æ˜¯ -1ï¼Œunsigned char æ— æ³•è¡¨ç¤ºè´Ÿæ•°ï¼Œå¿…é¡»ç”¨ int æ‰èƒ½åŒºåˆ†æˆåŠŸå’Œå¤±è´¥ã€‚
                    </p>
                </div>
            </div>

            <div class="subsection" id="protocol-i2c">
                <h3 class="subsection-title">4.3 I2Cï¼ˆä¸¤çº¿å¼æ¥å£ï¼‰</h3>

                <p>I2C åªéœ€è¦ 2 æ ¹çº¿å°±èƒ½è¿æ¥å¤šä¸ªè®¾å¤‡ï¼Œéå¸¸é€‚åˆè¿æ¥ä¼ æ„Ÿå™¨ã€‚</p>

                <h4 style="margin: 1rem 0 0.5rem; color: var(--primary);">åŸºæœ¬æ¦‚å¿µ</h4>
                <!-- ç¾åŒ–çš„I2Cæ€»çº¿è¿æ¥å›¾ -->
                <div class="svg-diagram">
                    <div class="diagram-title">I2C æ€»çº¿è¿æ¥ï¼ˆä¸€ä¸»å¤šä»æ¶æ„ï¼‰</div>
                    <svg width="550" height="230" viewBox="0 0 550 230">
                        <rect width="550" height="230" fill="#0f172a" rx="8"/>

                        <!-- VDD ç”µæº -->
                        <rect x="245" y="15" width="60" height="22" rx="4" fill="#ef4444"/>
                        <text x="275" y="31" fill="white" font-size="10" text-anchor="middle" font-weight="bold">VDD</text>

                        <!-- ç”µæºçº¿ -->
                        <line x1="275" y1="37" x2="275" y2="50" stroke="#ef4444" stroke-width="2"/>
                        <line x1="175" y1="50" x2="375" y2="50" stroke="#ef4444" stroke-width="2"/>

                        <!-- ä¸Šæ‹‰ç”µé˜» -->
                        <g transform="translate(175, 50)">
                            <rect x="-12" y="5" width="24" height="30" rx="3" fill="none" stroke="#f59e0b" stroke-width="2"/>
                            <text x="0" y="24" fill="#f59e0b" font-size="8" font-weight="bold" text-anchor="middle">4.7k</text>
                            <line x1="0" y1="35" x2="0" y2="50" stroke="#f59e0b" stroke-width="2"/>
                        </g>
                        <g transform="translate(375, 50)">
                            <rect x="-12" y="5" width="24" height="30" rx="3" fill="none" stroke="#f59e0b" stroke-width="2"/>
                            <text x="0" y="24" fill="#f59e0b" font-size="8" font-weight="bold" text-anchor="middle">4.7k</text>
                            <line x1="0" y1="35" x2="0" y2="50" stroke="#f59e0b" stroke-width="2"/>
                        </g>

                        <!-- I2C æ€»çº¿ -->
                        <line x1="30" y1="110" x2="520" y2="110" stroke="#ec4899" stroke-width="4"/>
                        <line x1="30" y1="125" x2="520" y2="125" stroke="#8b5cf6" stroke-width="4"/>
                        <text x="175" y="107" fill="#ec4899" font-size="10" font-weight="bold">SDA</text>
                        <text x="375" y="142" fill="#8b5cf6" font-size="10" font-weight="bold">SCL</text>

                        <!-- è¿æ¥ç‚¹ -->
                        <line x1="175" y1="100" x2="175" y2="110" stroke="#ec4899" stroke-width="2"/>
                        <line x1="375" y1="100" x2="375" y2="125" stroke="#8b5cf6" stroke-width="2"/>
                        <circle cx="175" cy="110" r="5" fill="#ec4899"/>
                        <circle cx="375" cy="125" r="5" fill="#8b5cf6"/>

                        <!-- ä¸»æœº -->
                        <g transform="translate(50, 145)">
                            <rect x="0" y="0" width="80" height="55" rx="8" fill="#3b82f6"/>
                            <text x="40" y="22" fill="white" font-size="10" text-anchor="middle" font-weight="bold">ä¸»æœº</text>
                            <text x="40" y="38" fill="#93c5fd" font-size="8" text-anchor="middle">51å•ç‰‡æœº</text>
                            <text x="40" y="50" fill="#60a5fa" font-size="7" text-anchor="middle">Master</text>
                            <line x1="40" y1="-20" x2="40" y2="0" stroke="#64748b" stroke-width="2"/>
                        </g>
                        <circle cx="90" cy="110" r="4" fill="#ec4899"/>
                        <circle cx="90" cy="125" r="4" fill="#8b5cf6"/>

                        <!-- ä»æœº1 -->
                        <g transform="translate(235, 145)">
                            <rect x="0" y="0" width="80" height="55" rx="8" fill="#22c55e"/>
                            <text x="40" y="22" fill="white" font-size="10" text-anchor="middle" font-weight="bold">ä»æœº1</text>
                            <text x="40" y="38" fill="#bbf7d0" font-size="8" text-anchor="middle">AT24C02</text>
                            <text x="40" y="50" fill="#86efac" font-size="7" text-anchor="middle">EEPROM</text>
                            <line x1="40" y1="-20" x2="40" y2="0" stroke="#64748b" stroke-width="2"/>
                        </g>
                        <circle cx="275" cy="110" r="4" fill="#ec4899"/>
                        <circle cx="275" cy="125" r="4" fill="#8b5cf6"/>

                        <!-- ä»æœº2 -->
                        <g transform="translate(420, 145)">
                            <rect x="0" y="0" width="80" height="55" rx="8" fill="#f59e0b"/>
                            <text x="40" y="22" fill="white" font-size="10" text-anchor="middle" font-weight="bold">ä»æœº2</text>
                            <text x="40" y="38" fill="#fef3c7" font-size="8" text-anchor="middle">OLED</text>
                            <text x="40" y="50" fill="#fcd34d" font-size="7" text-anchor="middle">æ˜¾ç¤ºå±</text>
                            <line x1="40" y1="-20" x2="40" y2="0" stroke="#64748b" stroke-width="2"/>
                        </g>
                        <circle cx="460" cy="110" r="4" fill="#ec4899"/>
                        <circle cx="460" cy="125" r="4" fill="#8b5cf6"/>

                        <!-- æ³¨æ„ -->
                        <rect x="30" y="210" width="490" height="18" rx="4" fill="#ef4444" opacity="0.2"/>
                        <text x="275" y="222" fill="#fca5a5" font-size="9" text-anchor="middle">âš ï¸ å¿…é¡»æœ‰ä¸Šæ‹‰ç”µé˜»ï¼ˆ4.7kÎ©ï¼‰ï¼Œå› ä¸º SDA/SCL éƒ½æ˜¯å¼€æ¼è¾“å‡ºï¼</text>
                    </svg>
                    <div class="diagram-legend">
                        <span class="legend-item"><span class="legend-color" style="background: #ec4899;"></span>SDA æ•°æ®çº¿ï¼ˆåŒå‘ï¼‰</span>
                        <span class="legend-item"><span class="legend-color" style="background: #8b5cf6;"></span>SCL æ—¶é’Ÿçº¿ï¼ˆä¸»æœºäº§ç”Ÿï¼‰</span>
                        <span class="legend-item"><span class="legend-color" style="background: #f59e0b;"></span>ä¸Šæ‹‰ç”µé˜»ï¼ˆå¿…é¡»ï¼‰</span>
                    </div>
                </div>

                <h4 style="margin: 1.5rem 0 0.5rem; color: var(--primary);">é€šä¿¡æ—¶åº</h4>
                <!-- ç¾åŒ–çš„I2Cæ—¶åºå›¾ -->
                <div class="svg-diagram">
                    <div class="diagram-title">I2C åŸºæœ¬æ—¶åº</div>
                    <svg width="600" height="320" viewBox="0 0 600 320">
                        <rect width="600" height="320" fill="#0f172a" rx="8"/>

                        <!-- 1. èµ·å§‹æ¡ä»¶ -->
                        <g transform="translate(20, 20)">
                            <text x="0" y="15" fill="#22c55e" font-size="11" font-weight="bold">1. èµ·å§‹æ¡ä»¶ï¼ˆStartï¼‰</text>
                            <text x="170" y="15" fill="#64748b" font-size="9">SCLé«˜æ—¶ï¼ŒSDAä¸‹é™æ²¿</text>

                            <text x="5" y="45" fill="#8b5cf6" font-size="9">SCL</text>
                            <path d="M 35 40 L 100 40 L 100 55 L 160 55" fill="none" stroke="#8b5cf6" stroke-width="2"/>

                            <text x="5" y="70" fill="#ec4899" font-size="9">SDA</text>
                            <path d="M 35 65 L 70 65 L 70 80 L 160 80" fill="none" stroke="#ec4899" stroke-width="2"/>

                            <polygon points="70,82 65,90 75,90" fill="#f59e0b"/>
                            <text x="70" y="105" fill="#f59e0b" font-size="8" text-anchor="middle">Start</text>
                        </g>

                        <!-- 2. åœæ­¢æ¡ä»¶ -->
                        <g transform="translate(200, 20)">
                            <text x="0" y="15" fill="#ef4444" font-size="11" font-weight="bold">2. åœæ­¢æ¡ä»¶ï¼ˆStopï¼‰</text>
                            <text x="160" y="15" fill="#64748b" font-size="9">SCLé«˜æ—¶ï¼ŒSDAä¸Šå‡æ²¿</text>

                            <text x="5" y="45" fill="#8b5cf6" font-size="9">SCL</text>
                            <path d="M 35 55 L 70 55 L 70 40 L 160 40" fill="none" stroke="#8b5cf6" stroke-width="2"/>

                            <text x="5" y="70" fill="#ec4899" font-size="9">SDA</text>
                            <path d="M 35 80 L 100 80 L 100 65 L 160 65" fill="none" stroke="#ec4899" stroke-width="2"/>

                            <polygon points="100,63 95,55 105,55" fill="#f59e0b"/>
                            <text x="100" y="50" fill="#f59e0b" font-size="8" text-anchor="middle">Stop</text>
                        </g>

                        <!-- 3. æ•°æ®ä¼ è¾“ -->
                        <g transform="translate(20, 130)">
                            <text x="0" y="15" fill="#3b82f6" font-size="11" font-weight="bold">3. æ•°æ®ä¼ è¾“</text>
                            <text x="90" y="15" fill="#64748b" font-size="9">SCLä½æ—¶SDAå¯å˜åŒ–ï¼ŒSCLé«˜æ—¶é‡‡æ ·ï¼ˆMSBå…ˆå‘ï¼‰</text>

                            <text x="5" y="50" fill="#8b5cf6" font-size="9">SCL</text>
                            <path d="M 35 55 L 50 55 L 50 40 L 90 40 L 90 55 L 130 55 L 130 40 L 170 40 L 170 55 L 210 55 L 210 40 L 250 40 L 250 55 L 290 55 L 290 40 L 330 40 L 330 55 L 370 55 L 370 40 L 410 40 L 410 55 L 450 55 L 450 40 L 490 40 L 490 55 L 550 55"
                                  fill="none" stroke="#8b5cf6" stroke-width="2"/>

                            <text x="5" y="80" fill="#ec4899" font-size="9">SDA</text>
                            <!-- æ•°æ®ä½åŒºåŸŸ -->
                            <g fill="#ec4899" opacity="0.2">
                                <rect x="35" y="62" width="55" height="22" rx="3"/>
                                <rect x="95" y="62" width="55" height="22" rx="3"/>
                                <rect x="155" y="62" width="55" height="22" rx="3"/>
                                <rect x="215" y="62" width="55" height="22" rx="3"/>
                                <rect x="275" y="62" width="55" height="22" rx="3"/>
                                <rect x="335" y="62" width="55" height="22" rx="3"/>
                                <rect x="395" y="62" width="55" height="22" rx="3"/>
                                <rect x="455" y="62" width="55" height="22" rx="3"/>
                            </g>
                            <path d="M 35 73 L 550 73" fill="none" stroke="#ec4899" stroke-width="2"/>

                            <!-- ä½æ ‡ç­¾ -->
                            <g fill="#fcd34d" font-size="9" text-anchor="middle">
                                <text x="62" y="77">D7</text>
                                <text x="122" y="77">D6</text>
                                <text x="182" y="77">D5</text>
                                <text x="242" y="77">D4</text>
                                <text x="302" y="77">D3</text>
                                <text x="362" y="77">D2</text>
                                <text x="422" y="77">D1</text>
                                <text x="482" y="77">D0</text>
                            </g>

                            <!-- é‡‡æ ·ç‚¹ç®­å¤´ -->
                            <g fill="#22c55e">
                                <polygon points="70,58 66,48 74,48"/>
                                <polygon points="150,58 146,48 154,48"/>
                                <polygon points="230,58 226,48 234,48"/>
                                <polygon points="310,58 306,48 314,48"/>
                                <polygon points="390,58 386,48 394,48"/>
                                <polygon points="470,58 466,48 474,48"/>
                            </g>
                            <text x="530" y="48" fill="#22c55e" font-size="8">â†‘é‡‡æ ·</text>
                        </g>

                        <!-- 4. ACK/NACK -->
                        <g transform="translate(20, 240)">
                            <text x="0" y="15" fill="#f59e0b" font-size="11" font-weight="bold">4. åº”ç­”ï¼ˆACK/NACKï¼‰</text>
                            <text x="150" y="15" fill="#64748b" font-size="9">ç¬¬9ä¸ªæ—¶é’Ÿï¼Œæ¥æ”¶æ–¹æ‹‰ä½SDA=ACK</text>

                            <rect x="35" y="25" width="200" height="50" rx="5" fill="#1e293b" stroke="#334155"/>
                            <text x="135" y="42" fill="#94a3b8" font-size="9" text-anchor="middle">8ä½æ•°æ®</text>
                            <text x="135" y="58" fill="#64748b" font-size="8" text-anchor="middle">(8ä¸ªæ—¶é’Ÿè„‰å†²)</text>

                            <rect x="250" y="25" width="80" height="50" rx="5" fill="#22c55e" opacity="0.3" stroke="#22c55e"/>
                            <text x="290" y="42" fill="#22c55e" font-size="10" text-anchor="middle" font-weight="bold">ACK</text>
                            <text x="290" y="58" fill="#86efac" font-size="8" text-anchor="middle">ç¬¬9ä¸ªè„‰å†²</text>

                            <text x="350" y="42" fill="#94a3b8" font-size="9">ACK = SDAä½ (æ¥æ”¶æˆåŠŸ)</text>
                            <text x="350" y="58" fill="#94a3b8" font-size="9">NACK = SDAé«˜ (ç»“æŸ/é”™è¯¯)</text>
                        </g>
                    </svg>
                </div>
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”˜
                          â†“
   SDA  ç”±å‘é€æ–¹æ§åˆ¶ â†’ é‡Šæ”¾ â†’ æ¥æ”¶æ–¹æ‹‰ä½=ACKï¼Œä¿æŒé«˜=NACK
                    </pre>
                </div>

                <h4 style="margin: 1.5rem 0 0.5rem; color: var(--primary);">åœ°å€æ ¼å¼</h4>
                <!-- ç¾åŒ–çš„I2Cåœ°å€æ ¼å¼å›¾ -->
                <div class="svg-diagram">
                    <div class="diagram-title">I2C åœ°å€å­—èŠ‚æ ¼å¼ï¼ˆç¬¬ä¸€ä¸ªå­—èŠ‚ï¼‰</div>
                    <svg width="550" height="180" viewBox="0 0 550 180">
                        <rect width="550" height="180" fill="#0f172a" rx="8"/>

                        <!-- ä½æ ‡ç­¾ -->
                        <g font-size="10" fill="#94a3b8" text-anchor="middle">
                            <text x="75" y="30">bit7</text>
                            <text x="135" y="30">bit6</text>
                            <text x="195" y="30">bit5</text>
                            <text x="255" y="30">bit4</text>
                            <text x="315" y="30">bit3</text>
                            <text x="375" y="30">bit2</text>
                            <text x="435" y="30">bit1</text>
                            <text x="495" y="30">bit0</text>
                        </g>

                        <!-- åœ°å€æ ¼å­ -->
                        <g transform="translate(45, 40)">
                            <rect x="0" y="0" width="60" height="35" rx="4" fill="#22c55e" stroke="#4ade80"/>
                            <text x="30" y="23" fill="white" font-size="12" text-anchor="middle" font-weight="bold">A6</text>

                            <rect x="60" y="0" width="60" height="35" rx="4" fill="#22c55e" stroke="#4ade80"/>
                            <text x="90" y="23" fill="white" font-size="12" text-anchor="middle" font-weight="bold">A5</text>

                            <rect x="120" y="0" width="60" height="35" rx="4" fill="#22c55e" stroke="#4ade80"/>
                            <text x="150" y="23" fill="white" font-size="12" text-anchor="middle" font-weight="bold">A4</text>

                            <rect x="180" y="0" width="60" height="35" rx="4" fill="#22c55e" stroke="#4ade80"/>
                            <text x="210" y="23" fill="white" font-size="12" text-anchor="middle" font-weight="bold">A3</text>

                            <rect x="240" y="0" width="60" height="35" rx="4" fill="#22c55e" stroke="#4ade80"/>
                            <text x="270" y="23" fill="white" font-size="12" text-anchor="middle" font-weight="bold">A2</text>

                            <rect x="300" y="0" width="60" height="35" rx="4" fill="#22c55e" stroke="#4ade80"/>
                            <text x="330" y="23" fill="white" font-size="12" text-anchor="middle" font-weight="bold">A1</text>

                            <rect x="360" y="0" width="60" height="35" rx="4" fill="#22c55e" stroke="#4ade80"/>
                            <text x="390" y="23" fill="white" font-size="12" text-anchor="middle" font-weight="bold">A0</text>

                            <rect x="420" y="0" width="60" height="35" rx="4" fill="#8b5cf6" stroke="#a78bfa"/>
                            <text x="450" y="23" fill="white" font-size="12" text-anchor="middle" font-weight="bold">R/W</text>
                        </g>

                        <!-- è¯´æ˜ -->
                        <line x1="75" y1="80" x2="435" y2="80" stroke="#22c55e" stroke-width="2"/>
                        <text x="255" y="100" fill="#86efac" font-size="10" text-anchor="middle">7ä½è®¾å¤‡åœ°å€</text>

                        <line x1="495" y1="80" x2="495" y2="95" stroke="#8b5cf6" stroke-width="2"/>
                        <text x="495" y="110" fill="#c4b5fd" font-size="9" text-anchor="middle">0=å†™</text>
                        <text x="495" y="122" fill="#c4b5fd" font-size="9" text-anchor="middle">1=è¯»</text>

                        <!-- å¸¸è§è®¾å¤‡åœ°å€ -->
                        <g transform="translate(45, 135)" font-size="9">
                            <text x="0" y="0" fill="#94a3b8" font-weight="bold">å¸¸è§è®¾å¤‡åœ°å€ï¼š</text>
                            <rect x="100" y="-12" width="100" height="18" rx="3" fill="#3b82f6"/>
                            <text x="150" y="3" fill="white" text-anchor="middle">AT24C02: 0x50</text>
                            <rect x="210" y="-12" width="100" height="18" rx="3" fill="#22c55e"/>
                            <text x="260" y="3" fill="white" text-anchor="middle">OLED: 0x3C</text>
                            <rect x="320" y="-12" width="100" height="18" rx="3" fill="#f59e0b"/>
                            <text x="370" y="3" fill="white" text-anchor="middle">BMP280: 0x76</text>
                        </g>
                    </svg>
                </div>

                <h4 style="margin: 1.5rem 0 0.5rem; color: var(--primary);">æ•°æ®å¸§æ ¼å¼</h4>
                <!-- ç¾åŒ–çš„I2Cæ•°æ®å¸§æ ¼å¼å›¾ -->
                <div class="svg-diagram">
                    <div class="diagram-title">I2C å†™æ“ä½œ - å‘ AT24C02 å†™å…¥æ•°æ®</div>
                    <svg width="600" height="130" viewBox="0 0 600 130">
                        <rect width="600" height="130" fill="#0f172a" rx="8"/>

                        <!-- å¸§ç»“æ„ -->
                        <g transform="translate(20, 25)">
                            <rect x="0" y="0" width="45" height="40" rx="4" fill="#22c55e"/>
                            <text x="22" y="25" fill="white" font-size="10" text-anchor="middle" font-weight="bold">Start</text>

                            <rect x="50" y="0" width="80" height="40" rx="4" fill="#3b82f6"/>
                            <text x="90" y="18" fill="white" font-size="9" text-anchor="middle">è®¾å¤‡åœ°å€</text>
                            <text x="90" y="32" fill="#93c5fd" font-size="8" text-anchor="middle">+ å†™(0)</text>

                            <rect x="135" y="0" width="35" height="40" rx="4" fill="#f59e0b"/>
                            <text x="152" y="25" fill="white" font-size="9" text-anchor="middle">ACK</text>

                            <rect x="175" y="0" width="80" height="40" rx="4" fill="#8b5cf6"/>
                            <text x="215" y="25" fill="white" font-size="9" text-anchor="middle">å¯„å­˜å™¨åœ°å€</text>

                            <rect x="260" y="0" width="35" height="40" rx="4" fill="#f59e0b"/>
                            <text x="277" y="25" fill="white" font-size="9" text-anchor="middle">ACK</text>

                            <rect x="300" y="0" width="80" height="40" rx="4" fill="#ec4899"/>
                            <text x="340" y="25" fill="white" font-size="9" text-anchor="middle">æ•°æ®</text>

                            <rect x="385" y="0" width="35" height="40" rx="4" fill="#f59e0b"/>
                            <text x="402" y="25" fill="white" font-size="9" text-anchor="middle">ACK</text>

                            <rect x="425" y="0" width="45" height="40" rx="4" fill="#ef4444"/>
                            <text x="447" y="25" fill="white" font-size="10" text-anchor="middle" font-weight="bold">Stop</text>
                        </g>

                        <!-- è§’è‰²è¯´æ˜ -->
                        <g transform="translate(20, 75)" font-size="8" fill="#64748b">
                            <text x="22" y="0" text-anchor="middle">ä¸»æœº</text>
                            <text x="90" y="0" text-anchor="middle">ä¸»æœº</text>
                            <text x="152" y="0" text-anchor="middle">ä»æœº</text>
                            <text x="215" y="0" text-anchor="middle">ä¸»æœº</text>
                            <text x="277" y="0" text-anchor="middle">ä»æœº</text>
                            <text x="340" y="0" text-anchor="middle">ä¸»æœº</text>
                            <text x="402" y="0" text-anchor="middle">ä»æœº</text>
                            <text x="447" y="0" text-anchor="middle">ä¸»æœº</text>
                        </g>

                        <!-- ç¤ºä¾‹ -->
                        <rect x="20" y="90" width="450" height="30" rx="5" fill="#1e293b" stroke="#334155"/>
                        <text x="35" y="110" fill="#94a3b8" font-size="9">
                            <tspan fill="#f59e0b">ç¤ºä¾‹ï¼š</tspan>
                            <tspan>S â†’ </tspan>
                            <tspan fill="#3b82f6">0xA0(0x50&lt;&lt;1|0)</tspan>
                            <tspan> â†’ ACK â†’ </tspan>
                            <tspan fill="#8b5cf6">0x00</tspan>
                            <tspan> â†’ ACK â†’ </tspan>
                            <tspan fill="#ec4899">0x5A</tspan>
                            <tspan> â†’ ACK â†’ P</tspan>
                        </text>
                    </svg>
                </div>

                <div class="svg-diagram" style="margin-top: 1rem;">
                    <div class="diagram-title">I2C è¯»æ“ä½œ - éœ€è¦é‡å¤èµ·å§‹ï¼ˆRepeated Startï¼‰</div>
                    <svg width="600" height="160" viewBox="0 0 600 160">
                        <rect width="600" height="160" fill="#0f172a" rx="8"/>

                        <!-- å†™é˜¶æ®µ -->
                        <g transform="translate(10, 25)">
                            <rect x="0" y="0" width="35" height="35" rx="3" fill="#22c55e"/>
                            <text x="17" y="22" fill="white" font-size="8" text-anchor="middle" font-weight="bold">S</text>

                            <rect x="38" y="0" width="60" height="35" rx="3" fill="#3b82f6"/>
                            <text x="68" y="15" fill="white" font-size="8" text-anchor="middle">åœ°å€</text>
                            <text x="68" y="28" fill="#93c5fd" font-size="7" text-anchor="middle">+å†™(0)</text>

                            <rect x="101" y="0" width="28" height="35" rx="3" fill="#f59e0b"/>
                            <text x="115" y="22" fill="white" font-size="7" text-anchor="middle">ACK</text>

                            <rect x="132" y="0" width="55" height="35" rx="3" fill="#8b5cf6"/>
                            <text x="159" y="22" fill="white" font-size="8" text-anchor="middle">å¯„å­˜å™¨</text>

                            <rect x="190" y="0" width="28" height="35" rx="3" fill="#f59e0b"/>
                            <text x="204" y="22" fill="white" font-size="7" text-anchor="middle">ACK</text>
                        </g>

                        <!-- é‡å¤èµ·å§‹ -->
                        <g transform="translate(225, 25)">
                            <rect x="0" y="0" width="35" height="35" rx="3" fill="#ef4444" stroke="#fca5a5" stroke-width="2"/>
                            <text x="17" y="22" fill="white" font-size="8" text-anchor="middle" font-weight="bold">Sr</text>
                        </g>

                        <!-- è¯»é˜¶æ®µ -->
                        <g transform="translate(263, 25)">
                            <rect x="0" y="0" width="60" height="35" rx="3" fill="#3b82f6"/>
                            <text x="30" y="15" fill="white" font-size="8" text-anchor="middle">åœ°å€</text>
                            <text x="30" y="28" fill="#93c5fd" font-size="7" text-anchor="middle">+è¯»(1)</text>

                            <rect x="63" y="0" width="28" height="35" rx="3" fill="#f59e0b"/>
                            <text x="77" y="22" fill="white" font-size="7" text-anchor="middle">ACK</text>

                            <rect x="94" y="0" width="55" height="35" rx="3" fill="#ec4899"/>
                            <text x="121" y="22" fill="white" font-size="8" text-anchor="middle">æ•°æ®</text>

                            <rect x="152" y="0" width="35" height="35" rx="3" fill="#64748b"/>
                            <text x="169" y="22" fill="white" font-size="7" text-anchor="middle">NACK</text>

                            <rect x="190" y="0" width="35" height="35" rx="3" fill="#ef4444"/>
                            <text x="207" y="22" fill="white" font-size="8" text-anchor="middle" font-weight="bold">P</text>
                        </g>

                        <!-- é˜¶æ®µè¯´æ˜ -->
                        <line x1="10" y1="70" x2="220" y2="70" stroke="#22c55e" stroke-width="2"/>
                        <text x="115" y="85" fill="#86efac" font-size="9" text-anchor="middle">å†™é˜¶æ®µï¼šå‘Šè¯‰ä»æœºè¦è¯»å“ªä¸ªå¯„å­˜å™¨</text>

                        <line x1="263" y1="70" x2="490" y2="70" stroke="#ec4899" stroke-width="2"/>
                        <text x="376" y="85" fill="#f9a8d4" font-size="9" text-anchor="middle">è¯»é˜¶æ®µï¼šä»æœºè¿”å›æ•°æ®</text>

                        <!-- é‡å¤èµ·å§‹è¯´æ˜ -->
                        <rect x="10" y="100" width="480" height="50" rx="5" fill="#ef4444" opacity="0.1" stroke="#ef4444"/>
                        <text x="25" y="118" fill="#fca5a5" font-size="9" font-weight="bold">âš ï¸ ä¸ºä»€ä¹ˆç”¨"é‡å¤èµ·å§‹(Sr)"è€Œä¸æ˜¯å…ˆStopå†Startï¼Ÿ</text>
                        <text x="35" y="135" fill="#94a3b8" font-size="9">â†’ é˜²æ­¢å…¶ä»–ä¸»æœºæŠ¢å æ€»çº¿ï¼Œä¿è¯è¯»æ“ä½œçš„åŸå­æ€§</text>
                    </svg>
                </div>

                <div class="svg-diagram" style="margin-top: 1rem;">
                    <div class="diagram-title">I2C è¿ç»­è¯»æ“ä½œ - ä¸€æ¬¡è¯»å–å¤šä¸ªå­—èŠ‚</div>
                    <svg width="600" height="110" viewBox="0 0 600 110">
                        <rect width="600" height="110" fill="#0f172a" rx="8"/>

                        <g transform="translate(10, 20)">
                            <!-- å†™é˜¶æ®µï¼ˆç®€åŒ–ï¼‰ -->
                            <rect x="0" y="0" width="25" height="30" rx="3" fill="#22c55e"/>
                            <text x="12" y="20" fill="white" font-size="7" text-anchor="middle">S</text>

                            <rect x="28" y="0" width="50" height="30" rx="3" fill="#3b82f6"/>
                            <text x="53" y="20" fill="white" font-size="7" text-anchor="middle">åœ°å€W</text>

                            <rect x="81" y="0" width="50" height="30" rx="3" fill="#8b5cf6"/>
                            <text x="106" y="20" fill="white" font-size="7" text-anchor="middle">å¯„å­˜å™¨</text>

                            <!-- é‡å¤èµ·å§‹ -->
                            <rect x="134" y="0" width="25" height="30" rx="3" fill="#ef4444"/>
                            <text x="146" y="20" fill="white" font-size="7" text-anchor="middle">Sr</text>

                            <rect x="162" y="0" width="50" height="30" rx="3" fill="#3b82f6"/>
                            <text x="187" y="20" fill="white" font-size="7" text-anchor="middle">åœ°å€R</text>

                            <!-- è¿ç»­è¯»æ•°æ® -->
                            <rect x="215" y="0" width="50" height="30" rx="3" fill="#ec4899"/>
                            <text x="240" y="20" fill="white" font-size="7" text-anchor="middle">æ•°æ®1</text>

                            <rect x="268" y="0" width="25" height="30" rx="3" fill="#22c55e"/>
                            <text x="280" y="20" fill="white" font-size="6" text-anchor="middle">ACK</text>

                            <rect x="296" y="0" width="50" height="30" rx="3" fill="#ec4899"/>
                            <text x="321" y="20" fill="white" font-size="7" text-anchor="middle">æ•°æ®2</text>

                            <rect x="349" y="0" width="25" height="30" rx="3" fill="#22c55e"/>
                            <text x="361" y="20" fill="white" font-size="6" text-anchor="middle">ACK</text>

                            <text x="390" y="20" fill="#64748b" font-size="12">...</text>

                            <rect x="410" y="0" width="50" height="30" rx="3" fill="#ec4899"/>
                            <text x="435" y="20" fill="white" font-size="7" text-anchor="middle">æ•°æ®N</text>

                            <rect x="463" y="0" width="30" height="30" rx="3" fill="#64748b"/>
                            <text x="478" y="20" fill="white" font-size="6" text-anchor="middle">NACK</text>

                            <rect x="496" y="0" width="25" height="30" rx="3" fill="#ef4444"/>
                            <text x="508" y="20" fill="white" font-size="7" text-anchor="middle">P</text>
                        </g>

                        <!-- è¯´æ˜ -->
                        <g transform="translate(10, 65)" font-size="8" fill="#94a3b8">
                            <circle cx="10" cy="5" r="4" fill="#22c55e"/>
                            <text x="20" y="8">ACKï¼šä¸»æœºå‘é€ï¼Œå‘Šè¯‰ä»æœº"ç»§ç»­å‘ä¸‹ä¸€ä¸ª"</text>

                            <circle cx="230" cy="5" r="4" fill="#64748b"/>
                            <text x="240" y="8">NACKï¼šä¸»æœºå‘é€ï¼Œå‘Šè¯‰ä»æœº"ä¸è¦å†å‘äº†"</text>
                        </g>

                        <text x="300" y="95" fill="#f59e0b" font-size="9" text-anchor="middle">ğŸ’¡ ä»æœºåœ°å€è‡ªå¢ï¼Œè‡ªåŠ¨å‘é€åç»­æ•°æ®</text>
                    </svg>
                </div>

                <div class="info-card">
                    <div class="info-card-title"><span class="icon">ğŸ“</span> æ•°æ®å¸§é€Ÿè®°å£è¯€</div>
                    <table style="width: 100%; border-collapse: collapse; margin-top: 0.5rem;">
                        <tr style="border-bottom: 1px solid var(--border);">
                            <th style="text-align: left; padding: 0.5rem; width: 30%;">æ“ä½œ</th>
                            <th style="text-align: left; padding: 0.5rem;">å¸§æ ¼å¼å£è¯€</th>
                        </tr>
                        <tr style="border-bottom: 1px solid var(--border);">
                            <td style="padding: 0.5rem;"><strong>å†™ä¸€ä¸ªå­—èŠ‚</strong></td>
                            <td style="padding: 0.5rem; font-family: monospace;">S â†’ åœ°å€W â†’ å¯„å­˜å™¨ â†’ æ•°æ® â†’ P</td>
                        </tr>
                        <tr style="border-bottom: 1px solid var(--border);">
                            <td style="padding: 0.5rem;"><strong>è¯»ä¸€ä¸ªå­—èŠ‚</strong></td>
                            <td style="padding: 0.5rem; font-family: monospace;">S â†’ åœ°å€W â†’ å¯„å­˜å™¨ â†’ <span style="color: var(--danger);">S</span> â†’ åœ°å€R â†’ æ•°æ® â†’ P</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem;"><strong>è¿ç»­è¯»Nä¸ª</strong></td>
                            <td style="padding: 0.5rem; font-family: monospace;">S â†’ åœ°å€W â†’ å¯„å­˜å™¨ â†’ <span style="color: var(--danger);">S</span> â†’ åœ°å€R â†’ æ•°æ®<sub>ACK</sub>Ã—(N-1) â†’ æ•°æ®<sub>NACK</sub> â†’ P</td>
                        </tr>
                    </table>
                    <p style="margin-top: 0.8rem; color: var(--text-secondary); font-size: 0.9rem;">
                        <strong>S</strong>=èµ·å§‹ï¼Œ<strong>P</strong>=åœæ­¢ï¼Œ<strong>W</strong>=å†™(0)ï¼Œ<strong>R</strong>=è¯»(1)ï¼Œ<span style="color: var(--danger);"><strong>çº¢è‰²S</strong></span>=é‡å¤èµ·å§‹
                    </p>
                </div>

                <div class="code-block">
                    <div class="code-header">
                        <span class="code-lang">C51 - I2C è½¯ä»¶æ¨¡æ‹Ÿï¼ˆGPIO æ¨¡æ‹Ÿï¼‰- ä¼˜åŒ–ç‰ˆ</span>
                        <button class="copy-btn" onclick="copyCode(this)">å¤åˆ¶</button>
                    </div>
                    <pre><code>#include &lt;reg52.h&gt;

sbit SCL = P2^1;
sbit SDA = P2^0;

// ç²¾ç¡®å»¶æ—¶ï¼ˆ12MHz æ™¶æŒ¯ï¼Œçº¦ 5Î¼sï¼‰
#define I2C_DELAY() {_nop_();_nop_();_nop_();_nop_();_nop_();}

// è¿”å›å€¼å®šä¹‰
#define I2C_ACK  0    // æ”¶åˆ°åº”ç­”
#define I2C_NACK 1    // æœªæ”¶åˆ°åº”ç­”

//========== åº•å±‚æ—¶åºå‡½æ•° ==========

// èµ·å§‹æ¡ä»¶ï¼šSCL é«˜æ—¶ï¼ŒSDA ä¸‹é™æ²¿
void i2c_start(void) {
    SDA = 1;
    SCL = 1;
    I2C_DELAY();
    SDA = 0;        // å…³é”®ï¼šSCL é«˜æ—¶ SDA ä¸‹é™
    I2C_DELAY();
    SCL = 0;        // é’³ä½æ€»çº¿ï¼Œå‡†å¤‡ä¼ è¾“
}

// åœæ­¢æ¡ä»¶ï¼šSCL é«˜æ—¶ï¼ŒSDA ä¸Šå‡æ²¿
void i2c_stop(void) {
    SDA = 0;        // ç¡®ä¿ SDA ä¸ºä½
    SCL = 1;
    I2C_DELAY();
    SDA = 1;        // å…³é”®ï¼šSCL é«˜æ—¶ SDA ä¸Šå‡
    I2C_DELAY();
}

// å‘é€ä¸€ä¸ªå­—èŠ‚ï¼Œè¿”å› ACK çŠ¶æ€ï¼ˆ0=æœ‰åº”ç­”ï¼Œ1=æ— åº”ç­”ï¼‰
unsigned char i2c_send_byte(unsigned char dat) {
    unsigned char i, ack;
    for(i = 0; i &lt; 8; i++) {
        SDA = (dat &amp; 0x80) ? 1 : 0;  // MSB å…ˆå‘
        dat &lt;&lt;= 1;
        I2C_DELAY();
        SCL = 1;
        I2C_DELAY();
        SCL = 0;
    }
    SDA = 1;        // é‡Šæ”¾ SDAï¼Œå‡†å¤‡è¯» ACK
    I2C_DELAY();
    SCL = 1;
    I2C_DELAY();
    ack = SDA;      // è¯»å– ACKï¼š0=ä»æœºåº”ç­”ï¼Œ1=æ— åº”ç­”
    SCL = 0;
    return ack;
}

// æ¥æ”¶ä¸€ä¸ªå­—èŠ‚ï¼Œsend_ack=1 å‘é€ ACKï¼Œsend_ack=0 å‘é€ NACK
unsigned char i2c_recv_byte(unsigned char send_ack) {
    unsigned char i, dat = 0;
    SDA = 1;        // é‡Šæ”¾ SDAï¼Œå‡†å¤‡è¯»æ•°æ®
    for(i = 0; i &lt; 8; i++) {
        SCL = 1;
        I2C_DELAY();
        dat &lt;&lt;= 1;
        if(SDA) dat |= 0x01;  // MSB å…ˆæ”¶
        SCL = 0;
        I2C_DELAY();
    }
    // å‘é€åº”ç­”ä½
    SDA = send_ack ? 0 : 1;   // send_ack=1 å‘ ACKï¼ˆæ‹‰ä½ï¼‰ï¼Œ=0 å‘ NACKï¼ˆä¿æŒé«˜ï¼‰
    I2C_DELAY();
    SCL = 1;
    I2C_DELAY();
    SCL = 0;
    SDA = 1;        // é‡Šæ”¾ SDA
    return dat;
}

//========== åº”ç”¨å±‚å‡½æ•°ï¼ˆå¸¦é”™è¯¯æ£€æµ‹ï¼‰==========

// å‘è®¾å¤‡å¯„å­˜å™¨å†™ä¸€ä¸ªå­—èŠ‚ï¼Œè¿”å› 0=æˆåŠŸ
unsigned char i2c_write_reg(unsigned char addr, unsigned char reg, unsigned char dat) {
    i2c_start();
    if(i2c_send_byte(addr &lt;&lt; 1)) {     // åœ°å€ + å†™ä½(0)
        i2c_stop();
        return 1;   // è®¾å¤‡æ— å“åº”
    }
    if(i2c_send_byte(reg)) {            // å¯„å­˜å™¨åœ°å€
        i2c_stop();
        return 2;   // å¯„å­˜å™¨åœ°å€ NACK
    }
    if(i2c_send_byte(dat)) {            // å†™å…¥æ•°æ®
        i2c_stop();
        return 3;   // æ•°æ® NACK
    }
    i2c_stop();
    return 0;       // æˆåŠŸ
}

// ä»è®¾å¤‡å¯„å­˜å™¨è¯»ä¸€ä¸ªå­—èŠ‚
unsigned char i2c_read_reg(unsigned char addr, unsigned char reg) {
    unsigned char dat;
    i2c_start();
    i2c_send_byte(addr &lt;&lt; 1);           // åœ°å€ + å†™ä½(0)
    i2c_send_byte(reg);                  // å¯„å­˜å™¨åœ°å€
    i2c_start();                         // é‡å¤èµ·å§‹æ¡ä»¶ï¼ˆä¸å‘ Stopï¼‰
    i2c_send_byte((addr &lt;&lt; 1) | 1);     // åœ°å€ + è¯»ä½(1)
    dat = i2c_recv_byte(0);              // è¯»æ•°æ®ï¼Œå‘ NACK è¡¨ç¤ºç»“æŸ
    i2c_stop();
    return dat;
}

// è¿ç»­è¯»å¤šä¸ªå­—èŠ‚ï¼ˆé€‚ç”¨äºä¼ æ„Ÿå™¨æ‰¹é‡è¯»å–ï¼‰
void i2c_read_bytes(unsigned char addr, unsigned char reg,
                    unsigned char *buf, unsigned char len) {
    unsigned char i;
    i2c_start();
    i2c_send_byte(addr &lt;&lt; 1);
    i2c_send_byte(reg);
    i2c_start();
    i2c_send_byte((addr &lt;&lt; 1) | 1);
    for(i = 0; i &lt; len; i++) {
        // æœ€åä¸€ä¸ªå­—èŠ‚å‘ NACKï¼Œå…¶ä½™å‘ ACK
        buf[i] = i2c_recv_byte(i &lt; len - 1);
    }
    i2c_stop();
}</code></pre>
                </div>

                <div class="info-card">
                    <div class="info-card-title"><span class="icon">âœ¨</span> ä»£ç ä¼˜åŒ–è¦ç‚¹</div>
                    <ul>
                        <li><strong>ç²¾ç¡®å»¶æ—¶</strong> â†’ ä½¿ç”¨ <code>_nop_()</code> ä»£æ›¿ä¸å¯æ§çš„ while å¾ªç¯</li>
                        <li><strong>é”™è¯¯æ£€æµ‹</strong> â†’ <code>i2c_write_reg</code> è¿”å›é”™è¯¯ç ï¼Œä¾¿äºè°ƒè¯•</li>
                        <li><strong>å‚æ•°è¯­ä¹‰æ¸…æ™°</strong> â†’ <code>send_ack=1</code> è¡¨ç¤º"è¦å‘é€ACK"ï¼Œç›´è§‚æ˜“æ‡‚</li>
                        <li><strong>æ‰¹é‡è¯»å–</strong> â†’ <code>i2c_read_bytes</code> æ”¯æŒè¿ç»­è¯»å¤šå­—èŠ‚</li>
                    </ul>
                </div>

                <div class="info-card warning">
                    <div class="info-card-title"><span class="icon">âš ï¸</span> I2C æ³¨æ„äº‹é¡¹</div>
                    <ul>
                        <li><strong>å¿…é¡»ä¸Šæ‹‰ç”µé˜»</strong> â†’ å…¸å‹å€¼ 4.7kÎ©ï¼ˆé€Ÿåº¦å¿«å¯ç”¨ 2.2kÎ©ï¼Œé€Ÿåº¦æ…¢å¯ç”¨ 10kÎ©ï¼‰</li>
                        <li><strong>MSB å…ˆå‘</strong> â†’ ä¸ UARTï¼ˆLSBå…ˆå‘ï¼‰ã€DS1302ï¼ˆLSBå…ˆå‘ï¼‰ä¸åŒï¼</li>
                        <li><strong>å¼€æ¼è¾“å‡º</strong> â†’ P0 å£å¤©ç„¶å¼€æ¼é€‚åˆ I2Cï¼ŒP1-P3 ä¸ºå‡†åŒå‘å£éœ€ç¡®ä¿èƒ½è¢«æ‹‰ä½</li>
                        <li><strong>åœ°å€å·¦ç§»</strong> â†’ 7ä½åœ°å€è¦å·¦ç§»1ä½ï¼Œæœ€ä½ä½æ˜¯è¯»å†™ä½ï¼ˆ0å†™1è¯»ï¼‰</li>
                        <li><strong>é‡å¤èµ·å§‹</strong> â†’ è¯»æ“ä½œéœ€è¦"å†™å¯„å­˜å™¨åœ°å€â†’é‡å¤èµ·å§‹â†’è¯»æ•°æ®"ï¼Œä¸èƒ½ä¸­é—´å‘ Stop</li>
                        <li><strong>ACK/NACK</strong> â†’ è¿ç»­è¯»æ—¶ï¼Œè¯»åˆ°æœ€åä¸€ä¸ªå­—èŠ‚è¦å‘ NACK é€šçŸ¥ä»æœºç»“æŸ</li>
                    </ul>
                </div>

                <div class="info-card">
                    <div class="info-card-title"><span class="icon">ğŸ”§</span> å¸¸è§é—®é¢˜æ’æŸ¥</div>
                    <table style="width: 100%; border-collapse: collapse; margin-top: 0.5rem;">
                        <tr style="border-bottom: 1px solid var(--border);">
                            <th style="text-align: left; padding: 0.5rem;">ç°è±¡</th>
                            <th style="text-align: left; padding: 0.5rem;">å¯èƒ½åŸå› </th>
                        </tr>
                        <tr style="border-bottom: 1px solid var(--border);">
                            <td style="padding: 0.5rem;">æ‰€æœ‰æ“ä½œéƒ½ NACK</td>
                            <td style="padding: 0.5rem;">â‘ ä¸Šæ‹‰ç”µé˜»æœªæ¥ â‘¡åœ°å€é”™è¯¯ â‘¢è®¾å¤‡æœªä¸Šç”µ</td>
                        </tr>
                        <tr style="border-bottom: 1px solid var(--border);">
                            <td style="padding: 0.5rem;">è¯»å‡ºæ•°æ®å…¨æ˜¯ 0xFF</td>
                            <td style="padding: 0.5rem;">â‘ SDA è¢«æ‹‰é«˜æ— æ³•é‡‡æ · â‘¡æ—¶åºè¿‡å¿«ä»æœºè·Ÿä¸ä¸Š</td>
                        </tr>
                        <tr style="border-bottom: 1px solid var(--border);">
                            <td style="padding: 0.5rem;">æ•°æ®å¶å‘é”™è¯¯</td>
                            <td style="padding: 0.5rem;">â‘ ä¸Šæ‹‰ç”µé˜»å¤ªå¤§ï¼ˆä¿¡å·ä¸Šå‡æ…¢ï¼‰â‘¡çº¿å¤ªé•¿å¹²æ‰°</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem;">æ€»çº¿æ­»é”ï¼ˆSDA ä¸€ç›´ä½ï¼‰</td>
                            <td style="padding: 0.5rem;">å¤ä½æ—¶åºä¸å®Œæ•´ï¼Œå‘é€ 9 ä¸ª SCL è„‰å†²å¯æ¢å¤</td>
                        </tr>
                    </table>
                </div>
            </div>

            <div class="subsection" id="protocol-spi">
                <h3 class="subsection-title">4.4 SPIï¼ˆä¸²è¡Œå¤–è®¾æ¥å£ï¼‰</h3>

                <p>SPI æ˜¯æœ€å¿«çš„ä¸²è¡Œåè®®ï¼Œé€‚åˆä¼ è¾“å¤§é‡æ•°æ®ï¼ˆå¦‚ Flashã€LCDï¼‰ã€‚</p>

                <h4 style="margin: 1rem 0 0.5rem; color: var(--primary);">åŸºæœ¬æ¦‚å¿µ</h4>
                <div class="svg-diagram">
                    <svg viewBox="0 0 700 320" style="width: 100%; max-width: 700px;">
                        <defs>
                            <linearGradient id="spiMasterGrad" x1="0%" y1="0%" x2="0%" y2="100%">
                                <stop offset="0%" style="stop-color:#1e3a5f;stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#0f172a;stop-opacity:1" />
                            </linearGradient>
                            <linearGradient id="spiSlaveGrad" x1="0%" y1="0%" x2="0%" y2="100%">
                                <stop offset="0%" style="stop-color:#1e293b;stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#0f172a;stop-opacity:1" />
                            </linearGradient>
                            <marker id="spiArrow" markerWidth="8" markerHeight="8" refX="8" refY="4" orient="auto" markerUnits="strokeWidth">
                                <path d="M0,0 L8,4 L0,8 Z" fill="#f59e0b"/>
                            </marker>
                        </defs>

                        <!-- æ ‡é¢˜ -->
                        <text x="350" y="22" fill="#e2e8f0" font-size="14" text-anchor="middle" font-weight="bold">SPI è¿æ¥æ–¹å¼ï¼ˆä¸€ä¸»å¤šä»ï¼‰</text>

                        <!-- ä¸»æœº -->
                        <rect x="40" y="40" width="150" height="130" fill="url(#spiMasterGrad)" stroke="#3b82f6" stroke-width="2" rx="8"/>
                        <text x="115" y="62" fill="#93c5fd" font-size="12" text-anchor="middle" font-weight="bold">ä¸»æœºï¼ˆ51å•ç‰‡æœºï¼‰</text>

                        <text x="170" y="90" fill="#fcd34d" font-size="11" text-anchor="end" font-weight="bold">SCK</text>
                        <text x="170" y="115" fill="#86efac" font-size="11" text-anchor="end" font-weight="bold">MOSI</text>
                        <text x="170" y="140" fill="#f9a8d4" font-size="11" text-anchor="end" font-weight="bold">MISO</text>
                        <text x="170" y="165" fill="#c4b5fd" font-size="11" text-anchor="end" font-weight="bold">CS0</text>

                        <!-- ä»æœº1 -->
                        <rect x="420" y="40" width="150" height="130" fill="url(#spiSlaveGrad)" stroke="#22c55e" stroke-width="2" rx="8"/>
                        <text x="495" y="62" fill="#86efac" font-size="12" text-anchor="middle" font-weight="bold">ä»æœº1</text>

                        <text x="440" y="90" fill="#fcd34d" font-size="11" font-weight="bold">SCK</text>
                        <text x="440" y="115" fill="#86efac" font-size="11" font-weight="bold">DI (MOSI)</text>
                        <text x="440" y="140" fill="#f9a8d4" font-size="11" font-weight="bold">DO (MISO)</text>
                        <text x="440" y="165" fill="#c4b5fd" font-size="11" font-weight="bold">CS</text>

                        <!-- è¿æ¥çº¿ -->
                        <line x1="190" y1="87" x2="420" y2="87" stroke="#f59e0b" stroke-width="2"/>
                        <line x1="190" y1="112" x2="420" y2="112" stroke="#22c55e" stroke-width="2" marker-end="url(#spiArrow)"/>
                        <line x1="420" y1="137" x2="190" y2="137" stroke="#ec4899" stroke-width="2" marker-end="url(#spiArrow)"/>
                        <line x1="190" y1="162" x2="420" y2="162" stroke="#8b5cf6" stroke-width="2"/>

                        <!-- ä»æœº2 -->
                        <rect x="420" y="190" width="150" height="70" fill="url(#spiSlaveGrad)" stroke="#64748b" stroke-width="2" rx="8"/>
                        <text x="495" y="215" fill="#94a3b8" font-size="12" text-anchor="middle" font-weight="bold">ä»æœº2</text>
                        <text x="440" y="240" fill="#c4b5fd" font-size="11" font-weight="bold">CS</text>

                        <!-- CS1è¿æ¥çº¿ -->
                        <text x="100" y="195" fill="#c4b5fd" font-size="11" font-weight="bold">CS1</text>
                        <line x1="125" y1="192" x2="125" y2="225" stroke="#8b5cf6" stroke-width="2"/>
                        <line x1="125" y1="225" x2="420" y2="225" stroke="#8b5cf6" stroke-width="2"/>

                        <!-- ä¿¡å·è¯´æ˜ -->
                        <rect x="40" y="275" width="620" height="40" fill="#0f172a" stroke="#334155" stroke-width="1" rx="6"/>
                        <text x="60" y="295" fill="#e2e8f0" font-size="11" font-weight="bold">å››æ ¹çº¿ï¼ˆå…¨åŒå·¥ï¼‰ï¼š</text>
                        <rect x="175" y="285" width="10" height="10" fill="#f59e0b" rx="2"/>
                        <text x="190" y="295" fill="#fcd34d" font-size="10">SCK=æ—¶é’Ÿ</text>
                        <rect x="275" y="285" width="10" height="10" fill="#22c55e" rx="2"/>
                        <text x="290" y="295" fill="#86efac" font-size="10">MOSI=ä¸»å‡ºä»å…¥</text>
                        <rect x="405" y="285" width="10" height="10" fill="#ec4899" rx="2"/>
                        <text x="420" y="295" fill="#f9a8d4" font-size="10">MISO=ä¸»å…¥ä»å‡º</text>
                        <rect x="525" y="285" width="10" height="10" fill="#8b5cf6" rx="2"/>
                        <text x="540" y="295" fill="#c4b5fd" font-size="10">CS=ç‰‡é€‰(ä½æœ‰æ•ˆ)</text>
                    </svg>
                </div>

                <h4 style="margin: 1.5rem 0 0.5rem; color: var(--primary);">å››ç§å·¥ä½œæ¨¡å¼</h4>
                <div class="svg-diagram">
                    <svg viewBox="0 0 700 380" style="width: 100%; max-width: 700px;">
                        <defs>
                            <linearGradient id="spiModeGrad" x1="0%" y1="0%" x2="100%" y2="0%">
                                <stop offset="0%" style="stop-color:#8b5cf6;stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#6366f1;stop-opacity:1" />
                            </linearGradient>
                        </defs>

                        <!-- æ ‡é¢˜ -->
                        <text x="350" y="22" fill="#e2e8f0" font-size="14" text-anchor="middle" font-weight="bold">SPI å››ç§å·¥ä½œæ¨¡å¼ï¼ˆCPOL/CPHAï¼‰</text>

                        <!-- æ¨¡å¼è¡¨æ ¼ -->
                        <rect x="50" y="35" width="500" height="130" fill="#0f172a" stroke="#334155" stroke-width="1" rx="6"/>

                        <!-- è¡¨å¤´ -->
                        <rect x="50" y="35" width="500" height="26" fill="#1e293b" rx="6"/>
                        <text x="105" y="53" fill="#e2e8f0" font-size="11" text-anchor="middle" font-weight="bold">CPOL</text>
                        <text x="180" y="53" fill="#e2e8f0" font-size="11" text-anchor="middle" font-weight="bold">CPHA</text>
                        <text x="375" y="53" fill="#e2e8f0" font-size="11" text-anchor="middle" font-weight="bold">è¯´æ˜</text>

                        <!-- æ¨¡å¼0 (é«˜äº®) -->
                        <rect x="50" y="61" width="500" height="25" fill="#22c55e" fill-opacity="0.1"/>
                        <text x="105" y="78" fill="#22c55e" font-size="11" text-anchor="middle" font-weight="bold">0</text>
                        <text x="180" y="78" fill="#22c55e" font-size="11" text-anchor="middle" font-weight="bold">0</text>
                        <text x="375" y="78" fill="#22c55e" font-size="11" text-anchor="middle" font-weight="bold">æ—¶é’Ÿç©ºé—²=ä½ï¼Œç¬¬1ä¸ªè¾¹æ²¿é‡‡æ ·ï¼ˆä¸Šå‡æ²¿ï¼‰â˜…æœ€å¸¸ç”¨</text>

                        <!-- æ¨¡å¼1 -->
                        <line x1="50" y1="86" x2="550" y2="86" stroke="#334155" stroke-width="1"/>
                        <text x="105" y="103" fill="#94a3b8" font-size="11" text-anchor="middle">0</text>
                        <text x="180" y="103" fill="#94a3b8" font-size="11" text-anchor="middle">1</text>
                        <text x="375" y="103" fill="#94a3b8" font-size="11" text-anchor="middle">æ—¶é’Ÿç©ºé—²=ä½ï¼Œç¬¬2ä¸ªè¾¹æ²¿é‡‡æ ·ï¼ˆä¸‹é™æ²¿ï¼‰</text>

                        <!-- æ¨¡å¼2 -->
                        <line x1="50" y1="111" x2="550" y2="111" stroke="#334155" stroke-width="1"/>
                        <text x="105" y="128" fill="#94a3b8" font-size="11" text-anchor="middle">1</text>
                        <text x="180" y="128" fill="#94a3b8" font-size="11" text-anchor="middle">0</text>
                        <text x="375" y="128" fill="#94a3b8" font-size="11" text-anchor="middle">æ—¶é’Ÿç©ºé—²=é«˜ï¼Œç¬¬1ä¸ªè¾¹æ²¿é‡‡æ ·ï¼ˆä¸‹é™æ²¿ï¼‰</text>

                        <!-- æ¨¡å¼3 -->
                        <line x1="50" y1="136" x2="550" y2="136" stroke="#334155" stroke-width="1"/>
                        <text x="105" y="153" fill="#94a3b8" font-size="11" text-anchor="middle">1</text>
                        <text x="180" y="153" fill="#94a3b8" font-size="11" text-anchor="middle">1</text>
                        <text x="375" y="153" fill="#94a3b8" font-size="11" text-anchor="middle">æ—¶é’Ÿç©ºé—²=é«˜ï¼Œç¬¬2ä¸ªè¾¹æ²¿é‡‡æ ·ï¼ˆä¸Šå‡æ²¿ï¼‰</text>

                        <!-- æ—¶åºå›¾æ ‡é¢˜ -->
                        <text x="350" y="190" fill="#22c55e" font-size="13" text-anchor="middle" font-weight="bold">æ¨¡å¼0 æ—¶åºå›¾ï¼ˆCPOL=0, CPHA=0ï¼‰</text>

                        <!-- CSä¿¡å· -->
                        <text x="50" y="225" fill="#c4b5fd" font-size="11" font-weight="bold">CS</text>
                        <path d="M80,210 L100,210 L100,230 L550,230 L550,210 L570,210" fill="none" stroke="#8b5cf6" stroke-width="2"/>
                        <text x="580" y="225" fill="#64748b" font-size="9">ä½æœ‰æ•ˆ</text>

                        <!-- SCKä¿¡å· -->
                        <text x="50" y="275" fill="#fcd34d" font-size="11" font-weight="bold">SCK</text>
                        <path d="M80,280 L110,280 L110,260 L140,260 L140,280 L170,280 L170,260 L200,260 L200,280 L230,280 L230,260 L260,260 L260,280 L290,280 L290,260 L320,260 L320,280 L350,280 L350,260 L380,260 L380,280 L410,280 L410,260 L440,260 L440,280 L470,280 L470,260 L500,260 L500,280 L530,280 L530,260 L560,260 L560,280 L570,280" fill="none" stroke="#f59e0b" stroke-width="2"/>

                        <!-- é‡‡æ ·ç®­å¤´ -->
                        <line x1="110" y1="250" x2="110" y2="258" stroke="#ef4444" stroke-width="2"/>
                        <polygon points="110,248 106,255 114,255" fill="#ef4444"/>
                        <text x="115" y="248" fill="#ef4444" font-size="9">é‡‡æ ·</text>

                        <!-- MOSIä¿¡å· -->
                        <text x="50" y="325" fill="#86efac" font-size="11" font-weight="bold">MOSI</text>
                        <path d="M80,320 L100,320 L100,310 L140,310 L140,320 L180,320 L180,310 L220,310 L220,320 L260,320 L260,310 L300,310 L300,320 L340,320 L340,310 L380,310 L380,320 L420,320 L420,310 L460,310 L460,320 L500,320 L500,310 L540,310 L540,320 L570,320" fill="none" stroke="#22c55e" stroke-width="2"/>

                        <!-- æ•°æ®ä½æ ‡ç­¾ -->
                        <text x="120" y="340" fill="#86efac" font-size="9" text-anchor="middle">D7</text>
                        <text x="160" y="340" fill="#86efac" font-size="9" text-anchor="middle">D6</text>
                        <text x="200" y="340" fill="#86efac" font-size="9" text-anchor="middle">D5</text>
                        <text x="240" y="340" fill="#86efac" font-size="9" text-anchor="middle">D4</text>
                        <text x="280" y="340" fill="#86efac" font-size="9" text-anchor="middle">D3</text>
                        <text x="320" y="340" fill="#86efac" font-size="9" text-anchor="middle">D2</text>
                        <text x="360" y="340" fill="#86efac" font-size="9" text-anchor="middle">D1</text>
                        <text x="400" y="340" fill="#86efac" font-size="9" text-anchor="middle">D0</text>

                        <!-- å›¾ä¾‹ -->
                        <rect x="560" y="35" width="130" height="70" fill="#0f172a" stroke="#334155" stroke-width="1" rx="6"/>
                        <text x="625" y="52" fill="#e2e8f0" font-size="10" text-anchor="middle" font-weight="bold">å›¾ä¾‹</text>
                        <rect x="570" y="60" width="10" height="10" fill="#8b5cf6" rx="2"/>
                        <text x="585" y="69" fill="#c4b5fd" font-size="9">CS ç‰‡é€‰</text>
                        <rect x="570" y="75" width="10" height="10" fill="#f59e0b" rx="2"/>
                        <text x="585" y="84" fill="#fcd34d" font-size="9">SCK æ—¶é’Ÿ</text>
                        <rect x="570" y="90" width="10" height="10" fill="#22c55e" rx="2"/>
                        <text x="585" y="99" fill="#86efac" font-size="9">MOSI æ•°æ®</text>
                    </svg>
                </div>

                <div class="code-block">
                    <div class="code-header">
                        <span class="code-lang">C51 - SPI è½¯ä»¶æ¨¡æ‹Ÿï¼ˆæ¨¡å¼0ï¼‰</span>
                        <button class="copy-btn" onclick="copyCode(this)">å¤åˆ¶</button>
                    </div>
                    <pre><code>#include &lt;reg52.h&gt;

sbit SCK  = P1^5;
sbit MOSI = P1^6;
sbit MISO = P1^7;
sbit CS   = P1^4;

// SPI å‘é€å¹¶æ¥æ”¶ä¸€ä¸ªå­—èŠ‚ï¼ˆå…¨åŒå·¥ï¼‰
unsigned char spi_transfer(unsigned char dat) {
    unsigned char i, recv = 0;
    for(i = 0; i < 8; i++) {
        MOSI = (dat & 0x80) ? 1 : 0;  // MSB å…ˆå‘
        dat <<= 1;
        SCK = 1;                       // ä¸Šå‡æ²¿
        recv <<= 1;
        if(MISO) recv |= 0x01;         // é‡‡æ · MISO
        SCK = 0;                       // ä¸‹é™æ²¿
    }
    return recv;
}

// å†™å¯„å­˜å™¨
void spi_write_reg(unsigned char reg, unsigned char dat) {
    CS = 0;                   // ç‰‡é€‰
    spi_transfer(reg);        // å‘é€å¯„å­˜å™¨åœ°å€
    spi_transfer(dat);        // å‘é€æ•°æ®
    CS = 1;                   // å–æ¶ˆç‰‡é€‰
}

// è¯»å¯„å­˜å™¨
unsigned char spi_read_reg(unsigned char reg) {
    unsigned char dat;
    CS = 0;
    spi_transfer(reg | 0x80); // æœ€é«˜ä½=1 è¡¨ç¤ºè¯»
    dat = spi_transfer(0xFF); // å‘é€ç©ºæ•°æ®ï¼Œæ¥æ”¶è¿”å›å€¼
    CS = 1;
    return dat;
}</code></pre>
                </div>

                <div class="info-card tip">
                    <div class="info-card-title"><span class="icon">ğŸ’¡</span> SPI vs I2C å¯¹æ¯”</div>
                    <div class="table-wrapper">
                        <table>
                            <tr>
                                <th>ç‰¹æ€§</th>
                                <th>SPI</th>
                                <th>I2C</th>
                            </tr>
                            <tr><td>é€Ÿåº¦</td><td>å¿«ï¼ˆMHzçº§ï¼‰</td><td>æ…¢ï¼ˆkHzçº§ï¼‰</td></tr>
                            <tr><td>çº¿æ•°</td><td>4çº¿ + æ¯è®¾å¤‡1æ ¹CS</td><td>2çº¿ï¼ˆå…±äº«ï¼‰</td></tr>
                            <tr><td>è®¾å¤‡å¯»å€</td><td>CS ç¡¬ä»¶é€‰æ‹©</td><td>åœ°å€è½¯ä»¶é€‰æ‹©</td></tr>
                            <tr><td>é€šä¿¡æ–¹å¼</td><td>å…¨åŒå·¥</td><td>åŠåŒå·¥</td></tr>
                            <tr><td>ä¸Šæ‹‰ç”µé˜»</td><td>ä¸éœ€è¦</td><td>å¿…é¡»</td></tr>
                            <tr><td>é€‚ç”¨åœºæ™¯</td><td>Flashã€SDå¡ã€å±å¹•</td><td>ä¼ æ„Ÿå™¨ã€EEPROM</td></tr>
                        </table>
                    </div>
                </div>
            </div>

            <div class="subsection" id="protocol-onewire">
                <h3 class="subsection-title">4.5 1-Wireï¼ˆå•æ€»çº¿ï¼‰</h3>

                <p>1-Wire åªéœ€ä¸€æ ¹æ•°æ®çº¿ï¼Œå¸¸è§äº DS18B20 æ¸©åº¦ä¼ æ„Ÿå™¨ã€‚</p>

                <h4 style="margin: 1rem 0 0.5rem; color: var(--primary);">åŸºæœ¬æ¦‚å¿µ</h4>
                <!-- ç¾åŒ–çš„1-Wireè¿æ¥å›¾ -->
                <div class="svg-diagram">
                    <div class="diagram-title">1-Wire è¿æ¥ - æç®€å•çº¿é€šä¿¡</div>
                    <svg width="350" height="220" viewBox="0 0 350 220">
                        <rect width="350" height="220" fill="#0f172a" rx="8"/>

                        <!-- VDD -->
                        <rect x="145" y="15" width="60" height="24" rx="4" fill="#ef4444"/>
                        <text x="175" y="32" fill="white" font-size="10" text-anchor="middle" font-weight="bold">VDD</text>

                        <!-- è¿çº¿ -->
                        <line x1="175" y1="39" x2="175" y2="55" stroke="#ef4444" stroke-width="2"/>

                        <!-- ä¸Šæ‹‰ç”µé˜» -->
                        <rect x="160" y="55" width="30" height="35" rx="4" fill="none" stroke="#f59e0b" stroke-width="2"/>
                        <text x="175" y="77" fill="#f59e0b" font-size="9" font-weight="bold" text-anchor="middle">4.7k</text>

                        <!-- DQæ•°æ®çº¿ -->
                        <line x1="175" y1="90" x2="175" y2="105" stroke="#f59e0b" stroke-width="2"/>
                        <line x1="50" y1="115" x2="300" y2="115" stroke="#22c55e" stroke-width="4"/>
                        <circle cx="175" cy="115" r="6" fill="#22c55e"/>
                        <text x="310" y="118" fill="#22c55e" font-size="10" font-weight="bold">DQ</text>

                        <!-- DS18B20 -->
                        <line x1="175" y1="121" x2="175" y2="140" stroke="#64748b" stroke-width="2"/>
                        <rect x="130" y="140" width="90" height="45" rx="8" fill="#8b5cf6"/>
                        <text x="175" y="165" fill="white" font-size="11" text-anchor="middle" font-weight="bold">DS18B20</text>
                        <text x="175" y="180" fill="#c4b5fd" font-size="8" text-anchor="middle">æ¸©åº¦ä¼ æ„Ÿå™¨</text>

                        <!-- GND -->
                        <line x1="175" y1="185" x2="175" y2="200" stroke="#64748b" stroke-width="2"/>
                        <rect x="145" y="195" width="60" height="20" rx="4" fill="#475569"/>
                        <text x="175" y="209" fill="white" font-size="10" text-anchor="middle" font-weight="bold">GND</text>

                        <!-- ç‰¹ç‚¹è¯´æ˜ -->
                        <text x="50" y="35" fill="#22c55e" font-size="9">åªéœ€ 1 æ ¹æ•°æ®çº¿ï¼</text>
                        <text x="50" y="50" fill="#64748b" font-size="8">ï¼ˆå¯„ç”Ÿä¾›ç”µå¯ä¸æ¥VDDï¼‰</text>
                    </svg>
                </div>

                <h4 style="margin: 1.5rem 0 0.5rem; color: var(--primary);">é€šä¿¡æ—¶åº</h4>
                <!-- ç¾åŒ–çš„1-Wireæ—¶åºå›¾ -->
                <div class="svg-diagram">
                    <div class="diagram-title">1-Wire åŸºæœ¬æ“ä½œæ—¶åº</div>
                    <svg width="600" height="280" viewBox="0 0 600 280">
                        <rect width="600" height="280" fill="#0f172a" rx="8"/>

                        <!-- 1. å¤ä½è„‰å†² -->
                        <g transform="translate(20, 20)">
                            <text x="0" y="15" fill="#22c55e" font-size="10" font-weight="bold">1. å¤ä½ + å­˜åœ¨è„‰å†²</text>
                            <text x="180" y="15" fill="#64748b" font-size="8">ä¸»æœºæ‹‰ä½480Î¼s â†’ é‡Šæ”¾ â†’ ä»æœºåº”ç­”</text>

                            <text x="5" y="45" fill="#94a3b8" font-size="9">DQ</text>
                            <path d="M 30 40 L 50 40 L 50 60 L 170 60 L 170 40 L 200 40 L 200 60 L 260 60 L 260 40 L 350 40" fill="none" stroke="#22c55e" stroke-width="2"/>

                            <line x1="50" y1="70" x2="170" y2="70" stroke="#f59e0b" stroke-width="1"/>
                            <text x="110" y="82" fill="#f59e0b" font-size="8" text-anchor="middle">480Î¼s</text>

                            <line x1="200" y1="70" x2="260" y2="70" stroke="#8b5cf6" stroke-width="1"/>
                            <text x="230" y="82" fill="#8b5cf6" font-size="8" text-anchor="middle">å­˜åœ¨</text>
                        </g>

                        <!-- 2. å†™0 -->
                        <g transform="translate(20, 100)">
                            <text x="0" y="15" fill="#3b82f6" font-size="10" font-weight="bold">2. å†™ 0</text>
                            <text x="70" y="15" fill="#64748b" font-size="8">ä¸»æœºæ‹‰ä½ 60-120Î¼s</text>

                            <text x="5" y="45" fill="#94a3b8" font-size="9">DQ</text>
                            <path d="M 30 40 L 50 40 L 50 60 L 170 60 L 170 40 L 220 40" fill="none" stroke="#3b82f6" stroke-width="2"/>

                            <rect x="50" y="60" width="120" height="5" fill="#3b82f6" opacity="0.3"/>
                            <text x="110" y="80" fill="#3b82f6" font-size="8" text-anchor="middle">60-120Î¼s (ä¿æŒä½)</text>
                        </g>

                        <!-- 3. å†™1 -->
                        <g transform="translate(260, 100)">
                            <text x="0" y="15" fill="#22c55e" font-size="10" font-weight="bold">3. å†™ 1</text>
                            <text x="70" y="15" fill="#64748b" font-size="8">ä¸»æœºæ‹‰ä½ 1-15Î¼s åé‡Šæ”¾</text>

                            <text x="5" y="45" fill="#94a3b8" font-size="9">DQ</text>
                            <path d="M 30 40 L 50 40 L 50 60 L 65 60 L 65 40 L 220 40" fill="none" stroke="#22c55e" stroke-width="2"/>

                            <rect x="65" y="35" width="100" height="10" fill="#22c55e" opacity="0.3"/>
                            <text x="115" y="80" fill="#22c55e" font-size="8" text-anchor="middle">å¿«é€Ÿé‡Šæ”¾ = 1</text>
                        </g>

                        <!-- 4. è¯» -->
                        <g transform="translate(20, 180)">
                            <text x="0" y="15" fill="#f59e0b" font-size="10" font-weight="bold">4. è¯»ä½</text>
                            <text x="60" y="15" fill="#64748b" font-size="8">ä¸»æœºæ‹‰ä½1Î¼sï¼Œç„¶ååœ¨15Î¼så†…é‡‡æ ·</text>

                            <text x="5" y="50" fill="#94a3b8" font-size="9">DQ</text>
                            <path d="M 30 45 L 50 45 L 50 65 L 60 65 L 60 45 L 220 45" fill="none" stroke="#f59e0b" stroke-width="2"/>

                            <polygon points="90,35 85,28 95,28" fill="#ef4444"/>
                            <text x="90" y="22" fill="#ef4444" font-size="8" text-anchor="middle">é‡‡æ ·</text>

                            <text x="150" y="80" fill="#64748b" font-size="8">ä»æœºæ‹‰é«˜=1ï¼Œä¿æŒä½=0</text>
                        </g>

                        <!-- æ—¶åºè¦ç‚¹ -->
                        <rect x="280" y="180" width="300" height="85" rx="5" fill="#1e293b" stroke="#334155"/>
                        <text x="295" y="200" fill="#f59e0b" font-size="10" font-weight="bold">â±ï¸ 1-Wire æ—¶åºè¦ç‚¹</text>
                        <text x="295" y="220" fill="#94a3b8" font-size="9">â€¢ å¤ä½è„‰å†²: 480Î¼sï¼ˆæœ€å…³é”®ï¼‰</text>
                        <text x="295" y="235" fill="#94a3b8" font-size="9">â€¢ å†™0: æ‹‰ä½æ•´ä¸ªæ—¶éš™(60-120Î¼s)</text>
                        <text x="295" y="250" fill="#94a3b8" font-size="9">â€¢ å†™1: å¿«é€Ÿæ‹‰ä½åç«‹å³é‡Šæ”¾</text>
                        <text x="295" y="265" fill="#94a3b8" font-size="9">â€¢ è¯»: 15Î¼så†…é‡‡æ ·ï¼Œè¶Šæ—©è¶Šå¥½</text>
                    </svg>
                </div>

                <div class="code-block">
                    <div class="code-header">
                        <span class="code-lang">C51 - DS18B20 æ¸©åº¦è¯»å–</span>
                        <button class="copy-btn" onclick="copyCode(this)">å¤åˆ¶</button>
                    </div>
                    <pre><code>#include &lt;reg52.h&gt;

sbit DQ = P3^7;

void delay_us(unsigned int us) {
    while(us--);
}

// å¤ä½å¹¶æ£€æµ‹å­˜åœ¨
unsigned char ds18b20_reset() {
    unsigned char presence;
    DQ = 0;
    delay_us(480);    // æ‹‰ä½ 480Î¼s
    DQ = 1;
    delay_us(60);     // ç­‰å¾…
    presence = DQ;    // è¯»å–å­˜åœ¨è„‰å†²ï¼ˆ0=è®¾å¤‡å­˜åœ¨ï¼‰
    delay_us(420);    // ç­‰å¾…å¤ä½å®Œæˆ
    return presence;
}

// å†™ä¸€ä¸ªå­—èŠ‚
void ds18b20_write_byte(unsigned char dat) {
    unsigned char i;
    for(i = 0; i < 8; i++) {
        DQ = 0;
        delay_us(2);
        DQ = dat & 0x01;  // LSB å…ˆå‘
        delay_us(60);
        DQ = 1;
        dat >>= 1;
    }
}

// è¯»ä¸€ä¸ªå­—èŠ‚
unsigned char ds18b20_read_byte() {
    unsigned char i, dat = 0;
    for(i = 0; i < 8; i++) {
        DQ = 0;
        delay_us(2);
        DQ = 1;
        delay_us(8);
        dat >>= 1;
        if(DQ) dat |= 0x80;
        delay_us(50);
    }
    return dat;
}

// è¯»å–æ¸©åº¦ï¼ˆè¿”å› 0.1â„ƒ ä¸ºå•ä½ï¼‰
int ds18b20_read_temp() {
    unsigned char LSB, MSB;
    int temp;

    ds18b20_reset();
    ds18b20_write_byte(0xCC);  // è·³è¿‡ ROM
    ds18b20_write_byte(0x44);  // å¯åŠ¨æ¸©åº¦è½¬æ¢

    delay_us(750);  // ç­‰å¾…è½¬æ¢å®Œæˆï¼ˆçº¦ 750msï¼‰

    ds18b20_reset();
    ds18b20_write_byte(0xCC);  // è·³è¿‡ ROM
    ds18b20_write_byte(0xBE);  // è¯»å–æš‚å­˜å™¨

    LSB = ds18b20_read_byte();
    MSB = ds18b20_read_byte();

    temp = (MSB << 8) | LSB;
    return temp * 10 / 16;  // è½¬æ¢ä¸º 0.1â„ƒ
}</code></pre>
                </div>
            </div>

            <div class="subsection" id="protocol-summary">
                <h3 class="subsection-title">4.6 åè®®é€‰æ‹©æŒ‡å—</h3>

                <div class="svg-diagram">
                    <svg viewBox="0 0 700 380" style="width: 100%; max-width: 700px;">
                        <defs>
                            <linearGradient id="flowStartGrad" x1="0%" y1="0%" x2="100%" y2="0%">
                                <stop offset="0%" style="stop-color:#8b5cf6;stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#6366f1;stop-opacity:1" />
                            </linearGradient>
                            <linearGradient id="flowDecisionGrad" x1="0%" y1="0%" x2="0%" y2="100%">
                                <stop offset="0%" style="stop-color:#1e3a5f;stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#0f172a;stop-opacity:1" />
                            </linearGradient>
                            <linearGradient id="flowResultGrad" x1="0%" y1="0%" x2="0%" y2="100%">
                                <stop offset="0%" style="stop-color:#14532d;stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#0f172a;stop-opacity:1" />
                            </linearGradient>
                            <marker id="flowArrowG" markerWidth="8" markerHeight="8" refX="8" refY="4" orient="auto">
                                <path d="M0,0 L8,4 L0,8 Z" fill="#64748b"/>
                            </marker>
                        </defs>

                        <!-- æ ‡é¢˜ -->
                        <text x="350" y="25" fill="#e2e8f0" font-size="15" text-anchor="middle" font-weight="bold">å¦‚ä½•é€‰æ‹©é€šä¿¡åè®®ï¼Ÿ</text>

                        <!-- èµ·å§‹èŠ‚ç‚¹ -->
                        <rect x="260" y="40" width="180" height="35" fill="url(#flowStartGrad)" stroke="#8b5cf6" stroke-width="2" rx="17"/>
                        <text x="350" y="63" fill="#fff" font-size="12" text-anchor="middle" font-weight="bold">éœ€è¦å’Œå¤–è®¾é€šä¿¡ï¼Ÿ</text>

                        <!-- ç¬¬ä¸€å±‚è¿æ¥çº¿ -->
                        <line x1="350" y1="75" x2="350" y2="95" stroke="#64748b" stroke-width="2"/>
                        <line x1="120" y1="95" x2="580" y2="95" stroke="#64748b" stroke-width="2"/>
                        <line x1="120" y1="95" x2="120" y2="110" stroke="#64748b" stroke-width="2" marker-end="url(#flowArrowG)"/>
                        <line x1="350" y1="95" x2="350" y2="110" stroke="#64748b" stroke-width="2" marker-end="url(#flowArrowG)"/>
                        <line x1="580" y1="95" x2="580" y2="110" stroke="#64748b" stroke-width="2" marker-end="url(#flowArrowG)"/>

                        <!-- ç¬¬äºŒå±‚ï¼šç”¨é€”åˆ†ç±» -->
                        <rect x="50" y="115" width="140" height="35" fill="url(#flowDecisionGrad)" stroke="#3b82f6" stroke-width="2" rx="6"/>
                        <text x="120" y="138" fill="#93c5fd" font-size="12" text-anchor="middle" font-weight="bold">ğŸ–¥ï¸ è°ƒè¯•æ‰“å°</text>

                        <rect x="280" y="115" width="140" height="35" fill="url(#flowDecisionGrad)" stroke="#22c55e" stroke-width="2" rx="6"/>
                        <text x="350" y="138" fill="#86efac" font-size="12" text-anchor="middle" font-weight="bold">ğŸ“¡ ä¼ æ„Ÿå™¨</text>

                        <rect x="510" y="115" width="140" height="35" fill="url(#flowDecisionGrad)" stroke="#f59e0b" stroke-width="2" rx="6"/>
                        <text x="580" y="138" fill="#fcd34d" font-size="12" text-anchor="middle" font-weight="bold">ğŸ’¾ å­˜å‚¨/å±å¹•</text>

                        <!-- ç¬¬äºŒå±‚åˆ°ç¬¬ä¸‰å±‚è¿æ¥çº¿ -->
                        <line x1="120" y1="150" x2="120" y2="180" stroke="#64748b" stroke-width="2" marker-end="url(#flowArrowG)"/>
                        <line x1="350" y1="150" x2="350" y2="180" stroke="#64748b" stroke-width="2" marker-end="url(#flowArrowG)"/>
                        <line x1="580" y1="150" x2="580" y2="180" stroke="#64748b" stroke-width="2" marker-end="url(#flowArrowG)"/>

                        <!-- ç¬¬ä¸‰å±‚ï¼šç»“æœ/å†³ç­– -->
                        <rect x="50" y="185" width="140" height="40" fill="url(#flowResultGrad)" stroke="#22c55e" stroke-width="2" rx="8"/>
                        <text x="120" y="205" fill="#22c55e" font-size="14" text-anchor="middle" font-weight="bold">UART</text>
                        <text x="120" y="218" fill="#86efac" font-size="9" text-anchor="middle">ä¸²å£é€šä¿¡</text>

                        <rect x="280" y="185" width="140" height="40" fill="url(#flowDecisionGrad)" stroke="#a78bfa" stroke-width="2" rx="6"/>
                        <text x="350" y="210" fill="#c4b5fd" font-size="11" text-anchor="middle" font-weight="bold">è®¾å¤‡è‡ªå¸¦åè®®ï¼Ÿ</text>

                        <rect x="510" y="185" width="140" height="40" fill="url(#flowResultGrad)" stroke="#f59e0b" stroke-width="2" rx="8"/>
                        <text x="580" y="205" fill="#f59e0b" font-size="14" text-anchor="middle" font-weight="bold">SPI</text>
                        <text x="580" y="218" fill="#fcd34d" font-size="9" text-anchor="middle">é«˜é€Ÿä¼ è¾“</text>

                        <!-- è®¾å¤‡åè®®åˆ¤æ–­è¿æ¥çº¿ -->
                        <line x1="350" y1="225" x2="350" y2="250" stroke="#64748b" stroke-width="2"/>
                        <line x1="180" y1="250" x2="520" y2="250" stroke="#64748b" stroke-width="2"/>
                        <line x1="180" y1="250" x2="180" y2="270" stroke="#64748b" stroke-width="2" marker-end="url(#flowArrowG)"/>
                        <line x1="350" y1="250" x2="350" y2="270" stroke="#64748b" stroke-width="2" marker-end="url(#flowArrowG)"/>
                        <line x1="520" y1="250" x2="520" y2="270" stroke="#64748b" stroke-width="2" marker-end="url(#flowArrowG)"/>

                        <!-- ç¬¬å››å±‚ï¼šå…·ä½“åè®® -->
                        <rect x="110" y="275" width="140" height="50" fill="url(#flowResultGrad)" stroke="#14b8a6" stroke-width="2" rx="8"/>
                        <text x="180" y="298" fill="#14b8a6" font-size="12" text-anchor="middle" font-weight="bold">DS18B20</text>
                        <text x="180" y="315" fill="#5eead4" font-size="11" text-anchor="middle">â†’ 1-Wire</text>

                        <rect x="280" y="275" width="140" height="50" fill="url(#flowResultGrad)" stroke="#3b82f6" stroke-width="2" rx="8"/>
                        <text x="350" y="298" fill="#3b82f6" font-size="12" text-anchor="middle" font-weight="bold">å¤§å¤šæ•°ä¼ æ„Ÿå™¨</text>
                        <text x="350" y="315" fill="#93c5fd" font-size="11" text-anchor="middle">â†’ I2C</text>

                        <rect x="450" y="275" width="140" height="50" fill="url(#flowDecisionGrad)" stroke="#64748b" stroke-width="2" rx="8"/>
                        <text x="520" y="298" fill="#94a3b8" font-size="12" text-anchor="middle" font-weight="bold">ç‰¹æ®Šè®¾å¤‡</text>
                        <text x="520" y="315" fill="#64748b" font-size="11" text-anchor="middle">â†’ æŸ¥æ‰‹å†Œ</text>

                        <!-- åº•éƒ¨æ€»ç»“ -->
                        <rect x="50" y="340" width="600" height="30" fill="#0f172a" stroke="#334155" stroke-width="1" rx="6"/>
                        <text x="350" y="360" fill="#94a3b8" font-size="10" text-anchor="middle">ğŸ’¡ DS1302 æ˜¯ 3 çº¿ SPI å˜ç§ | I2C æœ€é€šç”¨ | SPI æœ€å¿« | UART æœ€ç®€å•</text>
                    </svg>
                </div>

                <div class="info-card tip">
                    <div class="info-card-title"><span class="icon">ğŸ¯</span> å®ç”¨å»ºè®®</div>
                    <ul>
                        <li><strong>åˆå­¦è€…</strong> â†’ å…ˆå­¦ UARTï¼ˆæœ€ç®€å•ï¼Œè°ƒè¯•å¿…å¤‡ï¼‰</li>
                        <li><strong>æ¥ä¼ æ„Ÿå™¨</strong> â†’ å­¦ I2Cï¼ˆç”¨å¾—æœ€å¤šï¼‰</li>
                        <li><strong>æ¥å±å¹•/å­˜å‚¨</strong> â†’ å­¦ SPIï¼ˆé€Ÿåº¦å¿«ï¼‰</li>
                        <li><strong>ç‰¹å®šèŠ¯ç‰‡</strong> â†’ æŒ‰æ‰‹å†Œæ¥ï¼ˆå¦‚ DS1302 æ˜¯ 3 çº¿ SPI å˜ç§ï¼‰</li>
                    </ul>
                </div>

                <div class="collapsible">
                    <div class="collapsible-header" onclick="toggleCollapsible(this.parentElement)">
                        <span>ğŸ“ è‡ªæµ‹ï¼šåŒºåˆ†å„åè®®çš„å…³é”®ç‚¹ï¼Ÿ</span>
                        <span class="arrow">â–¼</span>
                    </div>
                    <div class="collapsible-content">
                        <div class="table-wrapper">
                            <table>
                                <tr>
                                    <th>é—®é¢˜</th>
                                    <th>ç­”æ¡ˆ</th>
                                </tr>
                                <tr><td>UART éœ€è¦æ—¶é’Ÿçº¿å—ï¼Ÿ</td><td>ä¸éœ€è¦ï¼Œé æ³¢ç‰¹ç‡åŒæ­¥</td></tr>
                                <tr><td>I2C ä¸ºä»€ä¹ˆéœ€è¦ä¸Šæ‹‰ï¼Ÿ</td><td>å¼€æ¼è¾“å‡ºï¼Œéœ€å¤–éƒ¨æ‹‰é«˜</td></tr>
                                <tr><td>SPI æ€ä¹ˆé€‰æ‹©ä»æœºï¼Ÿ</td><td>ç”¨ CS çº¿ï¼ˆä½æœ‰æ•ˆï¼‰</td></tr>
                                <tr><td>è°æ˜¯ MSB å…ˆå‘ï¼Ÿ</td><td>I2Cã€SPI æ˜¯ MSBï¼›UARTã€1-Wire æ˜¯ LSB</td></tr>
                                <tr><td>å“ªä¸ªåè®®æœ€å¿«ï¼Ÿ</td><td>SPIï¼ˆå¯è¾¾ MHzï¼‰</td></tr>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section class="section" id="resources">
            <header class="section-header">
                <span class="section-icon">ğŸ“</span>
                <h2 class="section-title">å­¦ä¹ èµ„æºæ¨è</h2>
            </header>

            <div class="subsection">
                <h3 class="subsection-title">è§†é¢‘è¯¾ç¨‹</h3>

                <div class="resource-grid">
                    <a href="https://www.bilibili.com/video/BV18p411Z7ce/" target="_blank" class="resource-card">
                        <div class="resource-card-icon">ğŸ¬</div>
                        <div class="resource-card-title">æ•°ç”µåŸºç¡€ï¼ˆæ¸…å ç‹çº¢ï¼‰</div>
                        <div class="resource-card-desc">æ•°å­—ä¿¡å·ã€é€»è¾‘ç”µå¹³ã€æ—¶åºå›¾ç­‰æ ¸å¿ƒæ¦‚å¿µ</div>
                    </a>
                    <a href="https://www.bilibili.com/video/BV1Mb411e7re/" target="_blank" class="resource-card">
                        <div class="resource-card-icon">ğŸ“º</div>
                        <div class="resource-card-title">æ±Ÿåç§‘æŠ€ 51å•ç‰‡æœº</div>
                        <div class="resource-card-desc">2020ç‰ˆ ä»é›¶å¼€å§‹å…¥é—¨ï¼ŒBç«™æœ€çƒ­é—¨æ•™ç¨‹</div>
                    </a>
                    <a href="https://www.bilibili.com/video/BV1nx411A7KA/" target="_blank" class="resource-card">
                        <div class="resource-card-icon">ğŸ“–</div>
                        <div class="resource-card-title">éƒ­å¤©ç¥¥ åå¤©å­¦ä¼šå•ç‰‡æœº</div>
                        <div class="resource-card-desc">ç»å…¸å…¥é—¨æ•™ç¨‹ï¼Œé…å¥—æ–°æ¦‚å¿µæ•™æ</div>
                    </a>
                </div>
            </div>

            <div class="subsection">
                <h3 class="subsection-title">å¼€å‘å·¥å…·</h3>

                <div class="resource-grid">
                    <a href="https://www.keil.com/c51/" target="_blank" class="resource-card">
                        <div class="resource-card-icon">âš¡</div>
                        <div class="resource-card-title">Keil C51</div>
                        <div class="resource-card-desc">51å•ç‰‡æœºå®˜æ–¹å¼€å‘ç¯å¢ƒï¼Œç¼–è¯‘+è°ƒè¯•ä¸€ä½“</div>
                    </a>
                    <a href="https://www.labcenter.com/" target="_blank" class="resource-card">
                        <div class="resource-card-icon">ğŸ”§</div>
                        <div class="resource-card-title">Proteus ä»¿çœŸ</div>
                        <div class="resource-card-desc">æ— éœ€ç¡¬ä»¶ï¼Œä»¿çœŸ 51 å•ç‰‡æœºç”µè·¯</div>
                    </a>
                    <a href="https://www.stcmcudata.com/" target="_blank" class="resource-card">
                        <div class="resource-card-icon">ğŸ“š</div>
                        <div class="resource-card-title">STC å®˜æ–¹èµ„æ–™</div>
                        <div class="resource-card-desc">STC ç³»åˆ—èŠ¯ç‰‡æ•°æ®æ‰‹å†Œä¸‹è½½</div>
                    </a>
                </div>
            </div>
        </section>

        <!-- å­¦ä¹ è®¡åˆ’ -->
        <section class="section" id="plan">
            <header class="section-header">
                <span class="section-icon">ğŸ“…</span>
                <h2 class="section-title">ä¸‰å‘¨å­¦ä¹ è®¡åˆ’</h2>
            </header>

            <div class="progress-tracker">
                <div class="progress-tracker-title"><span class="icon">ğŸ“Š</span> å­¦ä¹ è¿›åº¦è¿½è¸ª</div>
                <div class="week-progress">
                    <div class="week-card" onclick="toggleWeek(this)">
                        <div class="week-number">Week 1</div>
                        <div class="week-title">ç†è®ºé€Ÿæˆ</div>
                        <div class="week-status">ğŸ“˜</div>
                    </div>
                    <div class="week-card" onclick="toggleWeek(this)">
                        <div class="week-number">Week 2</div>
                        <div class="week-title">å®éªŒéªŒè¯</div>
                        <div class="week-status">ğŸ”¬</div>
                    </div>
                    <div class="week-card" onclick="toggleWeek(this)">
                        <div class="week-number">Week 3</div>
                        <div class="week-title">èŠ¯ç‰‡æ‰‹å†Œ</div>
                        <div class="week-status">ğŸ“š</div>
                    </div>
                </div>
            </div>

            <div class="subsection">
                <h3 class="subsection-title">Week 1ï¼šç†è®ºé€Ÿæˆ</h3>
                <div class="table-wrapper">
                    <table>
                        <tr>
                            <th>å¤©æ•°</th>
                            <th>ä»»åŠ¡</th>
                            <th>éªŒæ”¶æ ‡å‡†</th>
                        </tr>
                        <tr><td>Day 1-2</td><td>ç”µå¹³æ¦‚å¿µã€æ¨æŒ½/å¼€æ¼</td><td>èƒ½ç”»å‡ºæ¨æŒ½è¾“å‡ºç”µè·¯</td></tr>
                        <tr><td>Day 3-4</td><td>ä¸Šæ‹‰/ä¸‹æ‹‰ç”µé˜»</td><td>çŸ¥é“ I2C ä¸ºä»€ä¹ˆè¦ä¸Šæ‹‰</td></tr>
                        <tr><td>Day 5-7</td><td>æ—¶åºå›¾é˜…è¯»</td><td>èƒ½çœ‹æ‡‚ UART/SPI æ—¶åºå›¾</td></tr>
                    </table>
                </div>
            </div>

            <div class="subsection">
                <h3 class="subsection-title">Week 2ï¼šå®éªŒéªŒè¯</h3>
                <div class="table-wrapper">
                    <table>
                        <tr>
                            <th>å¤©æ•°</th>
                            <th>ä»»åŠ¡</th>
                            <th>ææ–™</th>
                        </tr>
                        <tr><td>Day 8-9</td><td>LED é—ªçƒå®éªŒ</td><td>51å•ç‰‡æœºå¼€å‘æ¿ + LED</td></tr>
                        <tr><td>Day 10-11</td><td>æŒ‰é”®è¾“å…¥å®éªŒ</td><td>æŒ‰é”® + ä¸Šæ‹‰ç”µé˜»</td></tr>
                        <tr><td>Day 12-14</td><td>UART æ”¶å‘å®éªŒ</td><td>USB-TTL æ¨¡å—ï¼ˆCH340ï¼‰</td></tr>
                    </table>
                </div>
            </div>

            <div class="subsection">
                <h3 class="subsection-title">Week 3ï¼šèŠ¯ç‰‡æ‰‹å†Œ</h3>
                <div class="table-wrapper">
                    <table>
                        <tr>
                            <th>å¤©æ•°</th>
                            <th>ä»»åŠ¡</th>
                            <th>æ–‡æ¡£</th>
                        </tr>
                        <tr><td>Day 15-17</td><td>è¯» STC89C52 æ•°æ®æ‰‹å†Œ</td><td>å¼•è„šå®šä¹‰ã€ç”µæ°”ç‰¹æ€§</td></tr>
                        <tr><td>Day 18-19</td><td>è¯»é€šä¿¡å¤–è®¾ç« èŠ‚</td><td>UARTã€å®šæ—¶å™¨å¯„å­˜å™¨</td></tr>
                        <tr><td>Day 20-21</td><td>ç»¼åˆé¡¹ç›®</td><td>ç”¨ UART æ§åˆ¶ LED</td></tr>
                    </table>
                </div>
            </div>
        </section>

        <!-- è‡ªæ£€æ¸…å• -->
        <section class="section" id="quiz">
            <header class="section-header">
                <span class="section-icon">âœ…</span>
                <h2 class="section-title">æœ€å°å¿…è¦çŸ¥è¯†è‡ªæ£€</h2>
            </header>

            <p>å¦‚æœèƒ½å›ç­”è¿™äº›é—®é¢˜ï¼Œè¯´æ˜æ•°ç”µåŸºç¡€åˆæ ¼ï¼š</p>

            <div class="collapsible">
                <div class="collapsible-header" onclick="toggleCollapsible(this.parentElement)">
                    <span>1. æ¨æŒ½è¾“å‡ºå’Œå¼€æ¼è¾“å‡ºæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</span>
                    <span class="arrow">â–¼</span>
                </div>
                <div class="collapsible-content">
                    <p>æ¨æŒ½èƒ½ä¸»åŠ¨è¾“å‡ºé«˜/ä½ç”µå¹³ï¼Œå¼€æ¼åªèƒ½è¾“å‡ºä½ç”µå¹³ï¼Œé«˜ç”µå¹³éœ€è¦å¤–éƒ¨ä¸Šæ‹‰ã€‚</p>
                </div>
            </div>

            <div class="collapsible">
                <div class="collapsible-header" onclick="toggleCollapsible(this.parentElement)">
                    <span>2. I2C æ€»çº¿ä¸ºä»€ä¹ˆå¿…é¡»ä½¿ç”¨ä¸Šæ‹‰ç”µé˜»ï¼Ÿ</span>
                    <span class="arrow">â–¼</span>
                </div>
                <div class="collapsible-content">
                    <p>I2C ä½¿ç”¨å¼€æ¼è¾“å‡ºï¼Œéœ€è¦ä¸Šæ‹‰ç”µé˜»å°†ä¿¡å·æ‹‰é«˜ï¼ŒåŒæ—¶å…è®¸å¤šä¸ªè®¾å¤‡å…±äº«æ€»çº¿ã€‚</p>
                </div>
            </div>

            <div class="collapsible">
                <div class="collapsible-header" onclick="toggleCollapsible(this.parentElement)">
                    <span>3. UART ç©ºé—²çŠ¶æ€æ˜¯é«˜ç”µå¹³è¿˜æ˜¯ä½ç”µå¹³ï¼Ÿ</span>
                    <span class="arrow">â–¼</span>
                </div>
                <div class="collapsible-content">
                    <p>é«˜ç”µå¹³ï¼ˆ1ï¼‰ï¼Œèµ·å§‹ä½æ˜¯ä¸‹é™æ²¿ï¼ˆ1â†’0ï¼‰è§¦å‘æ¥æ”¶ã€‚</p>
                </div>
            </div>

            <div class="collapsible">
                <div class="collapsible-header" onclick="toggleCollapsible(this.parentElement)">
                    <span>4. 3.3V çš„ MCU èƒ½ç›´æ¥è¿æ¥ 5V çš„ä¼ æ„Ÿå™¨å—ï¼Ÿ</span>
                    <span class="arrow">â–¼</span>
                </div>
                <div class="collapsible-content">
                    <p>ä¸èƒ½ï¼éœ€è¦ç”µå¹³è½¬æ¢ï¼Œå¦åˆ™ä¼šçƒ§å 3.3V MCU çš„è¾“å…¥å¼•è„šã€‚</p>
                </div>
            </div>

            <div class="collapsible">
                <div class="collapsible-header" onclick="toggleCollapsible(this.parentElement)">
                    <span>5. æ—¶åºå›¾é¢˜ï¼šå“ªä¸ªæ—¶åˆ»é‡‡æ ·æ•°æ®ï¼Ÿ</span>
                    <span class="arrow">â–¼</span>
                </div>
                <div class="collapsible-content">
                    <div class="svg-diagram" style="padding: 1rem;">
                        <svg viewBox="0 0 500 140" style="width: 100%; max-width: 500px;">
                            <!-- CLKä¿¡å· -->
                            <text x="30" y="40" fill="#fcd34d" font-size="12" font-weight="bold">CLK</text>
                            <path d="M70,50 L90,50 L90,25 L130,25 L130,50 L170,50 L170,25 L210,25 L210,50 L250,50 L250,25 L290,25 L290,50 L330,50 L330,25 L370,25 L370,50 L400,50" fill="none" stroke="#f59e0b" stroke-width="2"/>

                            <!-- é‡‡æ ·ç®­å¤´ -->
                            <line x1="90" y1="18" x2="90" y2="24" stroke="#ef4444" stroke-width="2"/>
                            <polygon points="90,15 86,22 94,22" fill="#ef4444"/>
                            <line x1="170" y1="18" x2="170" y2="24" stroke="#ef4444" stroke-width="2"/>
                            <polygon points="170,15 166,22 174,22" fill="#ef4444"/>
                            <line x1="250" y1="18" x2="250" y2="24" stroke="#ef4444" stroke-width="2"/>
                            <polygon points="250,15 246,22 254,22" fill="#ef4444"/>
                            <line x1="330" y1="18" x2="330" y2="24" stroke="#ef4444" stroke-width="2"/>
                            <polygon points="330,15 326,22 334,22" fill="#ef4444"/>
                            <text x="90" y="12" fill="#ef4444" font-size="8" text-anchor="middle">é‡‡æ ·</text>

                            <!-- DATAä¿¡å· -->
                            <text x="30" y="90" fill="#86efac" font-size="12" font-weight="bold">DATA</text>
                            <path d="M70,100 L90,100 L90,75 L130,75 L130,100 L170,100 L170,75 L210,75 L210,100 L250,100 L250,75 L290,75 L290,100 L330,100 L330,75 L370,75 L370,100 L400,100" fill="none" stroke="#22c55e" stroke-width="2"/>

                            <!-- æ•°æ®ä½æ ‡ç­¾ -->
                            <text x="110" y="120" fill="#22c55e" font-size="11" text-anchor="middle" font-weight="bold">1</text>
                            <text x="190" y="120" fill="#22c55e" font-size="11" text-anchor="middle" font-weight="bold">0</text>
                            <text x="270" y="120" fill="#22c55e" font-size="11" text-anchor="middle" font-weight="bold">1</text>
                            <text x="350" y="120" fill="#22c55e" font-size="11" text-anchor="middle" font-weight="bold">0</text>

                            <!-- å›¾ä¾‹ -->
                            <rect x="420" y="25" width="8" height="8" fill="#ef4444" rx="1"/>
                            <text x="432" y="33" fill="#fca5a5" font-size="9">ä¸Šå‡æ²¿é‡‡æ ·</text>
                        </svg>
                    </div>
                    <p><strong>ç­”æ¡ˆï¼š</strong>CLK ä¸Šå‡æ²¿ï¼ˆâ†‘ï¼‰é‡‡æ ·ï¼Œä¾æ¬¡è¯»åˆ° 1ã€0ã€1ã€0ã€‚</p>
                </div>
            </div>
        </section>

        <!-- æé€Ÿå…¥é—¨ -->
        <section class="section" id="speedrun">
            <header class="section-header">
                <span class="section-icon">ğŸš€</span>
                <h2 class="section-title">æé€Ÿå…¥é—¨æ–¹æ¡ˆï¼ˆæœ€çŸ­ 1 å‘¨ï¼‰</h2>
            </header>

            <p>å¦‚æœæ—¶é—´ç´§æ€¥ï¼ŒæŒ‰è¿™ä¸ªé¡ºåºï¼š</p>

            <div class="timeline">
                <div class="timeline-item">
                    <div class="timeline-title">Day 1</div>
                    <div class="timeline-content">ç†è§£é«˜/ä½ç”µå¹³ã€æ¨æŒ½/å¼€æ¼</div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-title">Day 2</div>
                    <div class="timeline-content">ä¸Šæ‹‰ç”µé˜»åŸç†</div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-title">Day 3</div>
                    <div class="timeline-content">æ—¶åºå›¾ç¬¦å·ï¼ˆä¸Šå‡æ²¿ã€ä¸‹é™æ²¿ï¼‰</div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-title">Day 4-5</div>
                    <div class="timeline-content">UART æ—¶åºå›¾ï¼ˆé‡å¤çœ‹ 10 éï¼‰</div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-title">Day 6-7</div>
                    <div class="timeline-content">ç”¨ 51 å¼€å‘æ¿è·‘ UART ä¾‹ç¨‹ï¼ˆKeil + Proteus ä»¿çœŸä¹Ÿè¡Œï¼‰</div>
                </div>
            </div>

            <div class="info-card tip">
                <div class="info-card-title"><span class="icon">ğŸ¯</span> æ ¸å¿ƒåŸåˆ™</div>
                <p><strong>å…ˆç”¨èµ·æ¥ï¼Œé‡åˆ°é—®é¢˜å†æ·±å…¥ï¼</strong></p>
                <ul style="margin-top: 0.5rem;">
                    <li>70% æ—¶é—´å†™ä»£ç </li>
                    <li>20% æ—¶é—´çœ‹èµ„æ–™</li>
                    <li>10% æ—¶é—´è°ƒè¯•ç¡¬ä»¶</li>
                </ul>
            </div>
        </section>

        <!-- é¡µè„š -->
        <footer style="margin-top: 4rem; padding-top: 2rem; border-top: 1px solid var(--border); text-align: center; color: var(--text-secondary);">
            <p>ğŸ“š æ•°å­—ç”µè·¯é›¶åŸºç¡€å¿«é€Ÿé€šå…³ - 51å•ç‰‡æœºå…¥é—¨ä¸“ç”¨ç‰ˆ</p>
            <p style="font-size: 0.9rem; margin-top: 0.5rem;">å­¦ä¹ ç›®æ ‡æ˜ç¡® Â· å†…å®¹ç²¾ç®€å®ç”¨ Â· åŠ¨æ‰‹å®è·µä¼˜å…ˆ</p>
        </footer>
    </main>

    <script>
        // å¤åˆ¶ä»£ç åŠŸèƒ½
        function copyCode(btn) {
            const codeBlock = btn.closest('.code-block');
            const code = codeBlock.querySelector('code').textContent;

            navigator.clipboard.writeText(code).then(() => {
                btn.textContent = 'å·²å¤åˆ¶!';
                btn.classList.add('copied');
                setTimeout(() => {
                    btn.textContent = 'å¤åˆ¶';
                    btn.classList.remove('copied');
                }, 2000);
            });
        }

        // æŠ˜å é¢æ¿
        function toggleCollapsible(element) {
            element.classList.toggle('open');
        }

        // å‘¨è¿›åº¦åˆ‡æ¢
        function toggleWeek(element) {
            element.classList.toggle('completed');
        }

        // ä¾§è¾¹æ åˆ‡æ¢
        const sidebar = document.getElementById('sidebar');
        const sidebarToggle = document.getElementById('sidebarToggle');

        sidebarToggle.addEventListener('click', () => {
            sidebar.classList.toggle('hidden');
        });

        // é˜…è¯»è¿›åº¦æ¡
        window.addEventListener('scroll', () => {
            const scrollTop = document.documentElement.scrollTop;
            const scrollHeight = document.documentElement.scrollHeight - document.documentElement.clientHeight;
            const progress = (scrollTop / scrollHeight) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
        });

        // ç›®å½•é«˜äº®
        const sections = document.querySelectorAll('.section, .subsection');
        const tocItems = document.querySelectorAll('.toc-item');

        function highlightToc() {
            let currentSection = '';

            sections.forEach(section => {
                const sectionTop = section.offsetTop;
                if (window.scrollY >= sectionTop - 100) {
                    currentSection = section.getAttribute('id');
                }
            });

            tocItems.forEach(item => {
                item.classList.remove('active');
                const link = item.querySelector('a');
                if (link && link.getAttribute('href') === '#' + currentSection) {
                    item.classList.add('active');
                }
            });
        }

        window.addEventListener('scroll', highlightToc);
        highlightToc();

        // å¹³æ»‘æ»šåŠ¨
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function(e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({ behavior: 'smooth' });
                }
            });
        });

        // å“åº”å¼ä¾§è¾¹æ 
        function handleResize() {
            if (window.innerWidth <= 1024) {
                sidebar.classList.add('hidden');
            } else {
                sidebar.classList.remove('hidden');
            }
        }

        window.addEventListener('resize', handleResize);
        handleResize();
    </script>
</body>
</html>
